<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Netpanzer-cvs] r1035 - in trunk/netpanzer: nbproject	src/NetPanzer/Classes src/NetPanzer/Classes/Network	src/NetPanzer/Interfaces src/NetPanzer/Interfaces/unix	src/NetPanzer/Views/MainMenu/Multi
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/netpanzer-cvs/2008-August/index.html" >
   <LINK REL="made" HREF="mailto:netpanzer-cvs%40lists.berlios.de?Subject=Re%3A%20%5BNetpanzer-cvs%5D%20r1035%20-%20in%20trunk/netpanzer%3A%20nbproject%0A%09src/NetPanzer/Classes%20src/NetPanzer/Classes/Network%0A%09src/NetPanzer/Interfaces%20src/NetPanzer/Interfaces/unix%0A%09src/NetPanzer/Views/MainMenu/Multi&In-Reply-To=%3C200808301735.m7UHZ2rv023233%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000075.html">
   <LINK REL="Next"  HREF="000077.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Netpanzer-cvs] r1035 - in trunk/netpanzer: nbproject	src/NetPanzer/Classes src/NetPanzer/Classes/Network	src/NetPanzer/Interfaces src/NetPanzer/Interfaces/unix	src/NetPanzer/Views/MainMenu/Multi</H1>
    <B>kromxp at mail.berlios.de</B> 
    <A HREF="mailto:netpanzer-cvs%40lists.berlios.de?Subject=Re%3A%20%5BNetpanzer-cvs%5D%20r1035%20-%20in%20trunk/netpanzer%3A%20nbproject%0A%09src/NetPanzer/Classes%20src/NetPanzer/Classes/Network%0A%09src/NetPanzer/Interfaces%20src/NetPanzer/Interfaces/unix%0A%09src/NetPanzer/Views/MainMenu/Multi&In-Reply-To=%3C200808301735.m7UHZ2rv023233%40sheep.berlios.de%3E"
       TITLE="[Netpanzer-cvs] r1035 - in trunk/netpanzer: nbproject	src/NetPanzer/Classes src/NetPanzer/Classes/Network	src/NetPanzer/Interfaces src/NetPanzer/Interfaces/unix	src/NetPanzer/Views/MainMenu/Multi">kromxp at mail.berlios.de
       </A><BR>
    <I>Sat Aug 30 19:35:02 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000075.html">[Netpanzer-cvs] r1034 - trunk/netpanzer/nbproject
</A></li>
        <LI>Next message: <A HREF="000077.html">[Netpanzer-cvs] r1036 - in trunk/netpanzer: nbproject	src/NetPanzer/Bot src/NetPanzer/Classes	src/NetPanzer/Classes/Network src/NetPanzer/Interfaces	src/NetPanzer/Interfaces/unix src/NetPanzer/Views/Game	src/NetPanzer/Views/MainMenu/Multi
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#76">[ date ]</a>
              <a href="thread.html#76">[ thread ]</a>
              <a href="subject.html#76">[ subject ]</a>
              <a href="author.html#76">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: kromxp
Date: 2008-08-30 19:34:18 +0200 (Sat, 30 Aug 2008)
New Revision: 1035

Removed:
   trunk/netpanzer/src/NetPanzer/Interfaces/Server.cpp
   trunk/netpanzer/src/NetPanzer/Interfaces/Server.hpp
   trunk/netpanzer/src/NetPanzer/Interfaces/unix/NetworkServerUnix.cpp
   trunk/netpanzer/src/NetPanzer/Interfaces/unix/NetworkServerUnix.hpp
Modified:
   trunk/netpanzer/nbproject/configurations.xml
   trunk/netpanzer/src/NetPanzer/Classes/BonusUnitPowerUp.cpp
   trunk/netpanzer/src/NetPanzer/Classes/EnemyRadarPowerUp.cpp
   trunk/netpanzer/src/NetPanzer/Classes/Network/NetMessageEncoder.cpp
   trunk/netpanzer/src/NetPanzer/Classes/Network/NetworkServer.cpp
   trunk/netpanzer/src/NetPanzer/Classes/Network/NetworkServer.hpp
   trunk/netpanzer/src/NetPanzer/Classes/Network/ServerConnectDaemon.cpp
   trunk/netpanzer/src/NetPanzer/Classes/Network/ServerMessageRouter.cpp
   trunk/netpanzer/src/NetPanzer/Classes/Network/UnitSync.cpp
   trunk/netpanzer/src/NetPanzer/Classes/Outpost.cpp
   trunk/netpanzer/src/NetPanzer/Classes/UnitOpcodeEncoder.cpp
   trunk/netpanzer/src/NetPanzer/Classes/UnitPowerUp.cpp
   trunk/netpanzer/src/NetPanzer/Interfaces/BaseGameManager.cpp
   trunk/netpanzer/src/NetPanzer/Interfaces/ChatInterface.cpp
   trunk/netpanzer/src/NetPanzer/Interfaces/DedicatedGameManager.cpp
   trunk/netpanzer/src/NetPanzer/Interfaces/GameControlRulesDaemon.cpp
   trunk/netpanzer/src/NetPanzer/Interfaces/GameManager.cpp
   trunk/netpanzer/src/NetPanzer/Interfaces/ObjectiveInterface.cpp
   trunk/netpanzer/src/NetPanzer/Interfaces/PlayerGameManager.cpp
   trunk/netpanzer/src/NetPanzer/Interfaces/PlayerInterface.cpp
   trunk/netpanzer/src/NetPanzer/Interfaces/PowerUpInterface.cpp
   trunk/netpanzer/src/NetPanzer/Interfaces/UnitInterface.cpp
   trunk/netpanzer/src/NetPanzer/Views/MainMenu/Multi/GetSessionView.cpp
   trunk/netpanzer/src/NetPanzer/Views/MainMenu/Multi/HostJoinTemplateView.cpp
Log:
- Removed NetworkServerUnix and merged its functionality with NetworkServer
- Removed Server.{h,c}pp and merget it with NetworkServer
- Modified other files to work with the new NetworkServer

Modified: trunk/netpanzer/nbproject/configurations.xml
===================================================================
--- trunk/netpanzer/nbproject/configurations.xml	2008-08-30 14:51:07 UTC (rev 1034)
+++ trunk/netpanzer/nbproject/configurations.xml	2008-08-30 17:34:18 UTC (rev 1035)
@@ -370,8 +370,6 @@
           &lt;logicalFolder name=&quot;unix&quot; displayName=&quot;unix&quot; projectFiles=&quot;true&quot;&gt;
             &lt;itemPath&gt;src/NetPanzer/Interfaces/unix/NetworkClientUnix.cpp&lt;/itemPath&gt;
             &lt;itemPath&gt;src/NetPanzer/Interfaces/unix/NetworkClientUnix.hpp&lt;/itemPath&gt;
-            &lt;itemPath&gt;src/NetPanzer/Interfaces/unix/NetworkServerUnix.cpp&lt;/itemPath&gt;
-            &lt;itemPath&gt;src/NetPanzer/Interfaces/unix/NetworkServerUnix.hpp&lt;/itemPath&gt;
           &lt;/logicalFolder&gt;
           &lt;itemPath&gt;src/NetPanzer/Interfaces/BaseGameManager.cpp&lt;/itemPath&gt;
           &lt;itemPath&gt;src/NetPanzer/Interfaces/BaseGameManager.hpp&lt;/itemPath&gt;
@@ -401,7 +399,6 @@
           &lt;itemPath&gt;src/NetPanzer/Interfaces/InfoSocket.hpp&lt;/itemPath&gt;
           &lt;itemPath&gt;src/NetPanzer/Interfaces/KeyboardInterface.cpp&lt;/itemPath&gt;
           &lt;itemPath&gt;src/NetPanzer/Interfaces/KeyboardInterface.hpp&lt;/itemPath&gt;
-          &lt;itemPath&gt;src/NetPanzer/Interfaces/LogicManager.hpp&lt;/itemPath&gt;
           &lt;itemPath&gt;src/NetPanzer/Interfaces/MapInterface.cpp&lt;/itemPath&gt;
           &lt;itemPath&gt;src/NetPanzer/Interfaces/MapInterface.hpp&lt;/itemPath&gt;
           &lt;itemPath&gt;src/NetPanzer/Interfaces/MapsManager.cpp&lt;/itemPath&gt;
@@ -422,8 +419,6 @@
           &lt;itemPath&gt;src/NetPanzer/Interfaces/PowerUpInterface.hpp&lt;/itemPath&gt;
           &lt;itemPath&gt;src/NetPanzer/Interfaces/ProjectileInterface.cpp&lt;/itemPath&gt;
           &lt;itemPath&gt;src/NetPanzer/Interfaces/ProjectileInterface.hpp&lt;/itemPath&gt;
-          &lt;itemPath&gt;src/NetPanzer/Interfaces/Server.cpp&lt;/itemPath&gt;
-          &lt;itemPath&gt;src/NetPanzer/Interfaces/Server.hpp&lt;/itemPath&gt;
           &lt;itemPath&gt;src/NetPanzer/Interfaces/ServerCommand.hpp&lt;/itemPath&gt;
           &lt;itemPath&gt;src/NetPanzer/Interfaces/ServerConsole.cpp&lt;/itemPath&gt;
           &lt;itemPath&gt;src/NetPanzer/Interfaces/ServerConsole.hpp&lt;/itemPath&gt;
@@ -1747,9 +1742,6 @@
       &lt;item path=&quot;src/NetPanzer/Interfaces/KeyboardInterface.hpp&quot;&gt;
         &lt;itemTool&gt;3&lt;/itemTool&gt;
       &lt;/item&gt;
-      &lt;item path=&quot;src/NetPanzer/Interfaces/LogicManager.hpp&quot;&gt;
-        &lt;itemTool&gt;3&lt;/itemTool&gt;
-      &lt;/item&gt;
       &lt;item path=&quot;src/NetPanzer/Interfaces/MapInterface.cpp&quot;&gt;
         &lt;itemTool&gt;1&lt;/itemTool&gt;
       &lt;/item&gt;
@@ -1810,12 +1802,6 @@
       &lt;item path=&quot;src/NetPanzer/Interfaces/ProjectileInterface.hpp&quot;&gt;
         &lt;itemTool&gt;3&lt;/itemTool&gt;
       &lt;/item&gt;
-      &lt;item path=&quot;src/NetPanzer/Interfaces/Server.cpp&quot;&gt;
-        &lt;itemTool&gt;1&lt;/itemTool&gt;
-      &lt;/item&gt;
-      &lt;item path=&quot;src/NetPanzer/Interfaces/Server.hpp&quot;&gt;
-        &lt;itemTool&gt;3&lt;/itemTool&gt;
-      &lt;/item&gt;
       &lt;item path=&quot;src/NetPanzer/Interfaces/ServerCommand.hpp&quot;&gt;
         &lt;itemTool&gt;3&lt;/itemTool&gt;
       &lt;/item&gt;
@@ -1855,12 +1841,6 @@
       &lt;item path=&quot;src/NetPanzer/Interfaces/unix/NetworkClientUnix.hpp&quot;&gt;
         &lt;itemTool&gt;3&lt;/itemTool&gt;
       &lt;/item&gt;
-      &lt;item path=&quot;src/NetPanzer/Interfaces/unix/NetworkServerUnix.cpp&quot;&gt;
-        &lt;itemTool&gt;1&lt;/itemTool&gt;
-      &lt;/item&gt;
-      &lt;item path=&quot;src/NetPanzer/Interfaces/unix/NetworkServerUnix.hpp&quot;&gt;
-        &lt;itemTool&gt;3&lt;/itemTool&gt;
-      &lt;/item&gt;
       &lt;item path=&quot;src/NetPanzer/Network/ClientSocket.cpp&quot;&gt;
         &lt;itemTool&gt;1&lt;/itemTool&gt;
       &lt;/item&gt;
@@ -3515,9 +3495,6 @@
       &lt;item path=&quot;src/NetPanzer/Interfaces/KeyboardInterface.hpp&quot;&gt;
         &lt;itemTool&gt;3&lt;/itemTool&gt;
       &lt;/item&gt;
-      &lt;item path=&quot;src/NetPanzer/Interfaces/LogicManager.hpp&quot;&gt;
-        &lt;itemTool&gt;3&lt;/itemTool&gt;
-      &lt;/item&gt;
       &lt;item path=&quot;src/NetPanzer/Interfaces/MapInterface.cpp&quot;&gt;
         &lt;itemTool&gt;1&lt;/itemTool&gt;
       &lt;/item&gt;
@@ -3578,12 +3555,6 @@
       &lt;item path=&quot;src/NetPanzer/Interfaces/ProjectileInterface.hpp&quot;&gt;
         &lt;itemTool&gt;3&lt;/itemTool&gt;
       &lt;/item&gt;
-      &lt;item path=&quot;src/NetPanzer/Interfaces/Server.cpp&quot;&gt;
-        &lt;itemTool&gt;1&lt;/itemTool&gt;
-      &lt;/item&gt;
-      &lt;item path=&quot;src/NetPanzer/Interfaces/Server.hpp&quot;&gt;
-        &lt;itemTool&gt;3&lt;/itemTool&gt;
-      &lt;/item&gt;
       &lt;item path=&quot;src/NetPanzer/Interfaces/ServerCommand.hpp&quot;&gt;
         &lt;itemTool&gt;3&lt;/itemTool&gt;
       &lt;/item&gt;
@@ -3623,12 +3594,6 @@
       &lt;item path=&quot;src/NetPanzer/Interfaces/unix/NetworkClientUnix.hpp&quot;&gt;
         &lt;itemTool&gt;3&lt;/itemTool&gt;
       &lt;/item&gt;
-      &lt;item path=&quot;src/NetPanzer/Interfaces/unix/NetworkServerUnix.cpp&quot;&gt;
-        &lt;itemTool&gt;1&lt;/itemTool&gt;
-      &lt;/item&gt;
-      &lt;item path=&quot;src/NetPanzer/Interfaces/unix/NetworkServerUnix.hpp&quot;&gt;
-        &lt;itemTool&gt;3&lt;/itemTool&gt;
-      &lt;/item&gt;
       &lt;item path=&quot;src/NetPanzer/Network/ClientSocket.cpp&quot;&gt;
         &lt;itemTool&gt;1&lt;/itemTool&gt;
       &lt;/item&gt;

Modified: trunk/netpanzer/src/NetPanzer/Classes/BonusUnitPowerUp.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Classes/BonusUnitPowerUp.cpp	2008-08-30 14:51:07 UTC (rev 1034)
+++ trunk/netpanzer/src/NetPanzer/Classes/BonusUnitPowerUp.cpp	2008-08-30 17:34:18 UTC (rev 1035)
@@ -26,7 +26,6 @@
 #include &quot;Interfaces/ConsoleInterface.hpp&quot;
 #include &quot;Interfaces/UnitProfileInterface.hpp&quot;
 
-#include &quot;Interfaces/Server.hpp&quot;
 #include &quot;Classes/Network/NetworkServer.hpp&quot;
 #include &quot;Classes/Network/NetworkState.hpp&quot;
 #include &quot;Classes/Network/UnitNetMessage.hpp&quot;

Modified: trunk/netpanzer/src/NetPanzer/Classes/EnemyRadarPowerUp.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Classes/EnemyRadarPowerUp.cpp	2008-08-30 14:51:07 UTC (rev 1034)
+++ trunk/netpanzer/src/NetPanzer/Classes/EnemyRadarPowerUp.cpp	2008-08-30 17:34:18 UTC (rev 1035)
@@ -26,7 +26,6 @@
 #include &quot;Interfaces/MiniMapInterface.hpp&quot;
 #include &quot;Interfaces/ConsoleInterface.hpp&quot;
 
-#include &quot;Interfaces/Server.hpp&quot;
 #include &quot;Classes/Network/NetworkServer.hpp&quot;
 #include &quot;Classes/Network/NetworkState.hpp&quot;
 #include &quot;Classes/Network/UnitNetMessage.hpp&quot;

Modified: trunk/netpanzer/src/NetPanzer/Classes/Network/NetMessageEncoder.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Classes/Network/NetMessageEncoder.cpp	2008-08-30 14:51:07 UTC (rev 1034)
+++ trunk/netpanzer/src/NetPanzer/Classes/Network/NetMessageEncoder.cpp	2008-08-30 17:34:18 UTC (rev 1035)
@@ -21,7 +21,6 @@
 #include &lt;string.h&gt;
 
 #include &quot;Classes/Network/NetworkState.hpp&quot;
-#include &quot;Interfaces/Server.hpp&quot;
 #include &quot;Classes/Network/NetworkServer.hpp&quot;
 #include &quot;Interfaces/Client.hpp&quot;
 #include &quot;NetworkClient.hpp&quot;

Modified: trunk/netpanzer/src/NetPanzer/Classes/Network/NetworkServer.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Classes/Network/NetworkServer.cpp	2008-08-30 14:51:07 UTC (rev 1034)
+++ trunk/netpanzer/src/NetPanzer/Classes/Network/NetworkServer.cpp	2008-08-30 17:34:18 UTC (rev 1035)
@@ -22,23 +22,31 @@
 
 #include &quot;ClientServerNetMessage.hpp&quot;
 #include &quot;Classes/Network/ServerConnectDaemon.hpp&quot;
+#include &quot;Classes/Network/NetworkState.hpp&quot;
 
 #include &quot;Interfaces/PlayerInterface.hpp&quot;
 #include &quot;Interfaces/ConsoleInterface.hpp&quot;
+#include &quot;Interfaces/GameConfig.hpp&quot;
 
+NetworkServer* SERVER = 0;
+
 NetworkServer::NetworkServer()
-        : NetworkInterface()
+        : NetworkInterface(), serversocket(0)
 {
+    // nothing
 }
 
 NetworkServer::~NetworkServer()
 {
+    if ( serversocket )
+        delete serversocket;
 }
 
 void NetworkServer::resetClientList()
 {
     for(ClientList::iterator i = client_list.begin(); i != client_list.end();
-            ++i) {
+            ++i)
+    {
         delete *i;
     }
     client_list.clear();
@@ -106,19 +114,144 @@
 }
 
 void
+NetworkServer::openSession()
+{
+    // nothing
+}
+
+void
+NetworkServer::hostSession()
+{
+    if ( serversocket )
+    {
+        delete serversocket;
+        serversocket = 0;
+    }
+    
+    serversocket = new ServerSocket(gameconfig-&gt;bindaddress,
+                                    gameconfig-&gt;serverport);
+    
+}
+
+void
+NetworkServer::closeSession()
+{
+    if ( serversocket )
+        delete serversocket;
+    
+    serversocket = 0;
+}
+
+void
+NetworkServer::sendMessage(NetMessage *message, size_t size)
+{
+    ClientList::iterator i = client_list.begin();
+    while ( i != client_list.end() )
+    {
+        if((*i)-&gt;wannadie)
+        {
+            ++i;
+            continue;
+        }
+
+        try
+        {
+            sendMessage((*i)-&gt;client_id.getNetworkID(), message, size);
+        }
+        catch(std::exception&amp; e)
+        {
+            LOG( (&quot;Error while sending network packet.&quot;) );
+            return;
+        }
+        
+        ++i;
+    }
+}
+
+void
+NetworkServer::sendMessage(NetClientID network_id, NetMessage* message,
+        size_t size)
+{
+    if(serversocket == 0)
+        return;
+    
+    message-&gt;setSize(size);
+
+    try
+    {
+        serversocket-&gt;sendMessage(network_id, message, size);
+    }
+    catch(std::exception&amp; e)
+    {
+        LOG ( (&quot;Network send error when sending to client %d: %s&quot;,
+               network_id, e.what()) );
+        dropClient(network_id);
+        return;
+    }
+
+    NetworkState::incPacketsSent(size);
+
+#ifdef NETWORKDEBUG
+    NetPacketDebugger::logMessage(&quot;S&quot;, message);
+#endif
+}
+
+bool
+NetworkServer::getPacket(NetPacket* packet)
+{
+    if ( loop_back_recv_queue.isReady() )
+    {
+        loop_back_recv_queue.dequeue(packet);
+
+#ifdef NETWORKDEBUG
+        NetPacketDebugger::logPacket(&quot;R&quot;, packet);
+#endif
+        return true;
+    }
+    else if (receive_queue.isReady())
+    {
+        receive_queue.dequeue(packet);
+        NetworkState::incPacketsReceived(packet-&gt;getSize());
+
+        if (packet-&gt;getNetMessage()-&gt;message_class 
+                == _net_message_class_client_server)
+        {
+            processNetPacket(packet);
+        }
+
+#ifdef NETWORKDEBUG
+        NetPacketDebugger::logPacket(&quot;R&quot;, packet);
+#endif
+        return true;
+    }
+
+    return false;
+}
+
+void
 NetworkServer::dropClient(NetClientID network_id)
 {
-    for(ClientList::iterator i = client_list.begin(); i != client_list.end();
-            ++i) {
+    ClientList::iterator i = client_list.begin();
+    while( i != client_list.end() )
+    {
         ServerClientListData* data = *i;
-        if(data-&gt;client_id.getNetworkID() == network_id) {
+        if(data-&gt;client_id.getNetworkID() == network_id)
+        {
             ServerConnectDaemon::startClientDropProcess(data-&gt;client_id);
             return;
         }
+        ++i;
     }
 }
 
 void
+NetworkServer::shutdownClientTransport(NetClientID client_id)
+{
+    if (serversocket)
+        serversocket-&gt;disconectClient(client_id);
+}
+
+void
 NetworkServer::cleanupClients()
 {
     for(ClientList::iterator i = client_list.begin(); i != client_list.end();
@@ -133,3 +266,24 @@
     }
 }
 
+void
+NetworkServer::checkIncoming()
+{
+    cleanupClients();
+}
+
+void
+NetworkServer::sendRemaining()
+{
+    if ( serversocket )
+        serversocket-&gt;sendRemaining();
+}
+
+std::string
+NetworkServer::getIP(NetClientID id) const
+{
+    if ( serversocket )
+        return serversocket-&gt;getClientIP(id);
+
+    return &quot;No server&quot;;
+}

Modified: trunk/netpanzer/src/NetPanzer/Classes/Network/NetworkServer.hpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Classes/Network/NetworkServer.hpp	2008-08-30 14:51:07 UTC (rev 1034)
+++ trunk/netpanzer/src/NetPanzer/Classes/Network/NetworkServer.hpp	2008-08-30 17:34:18 UTC (rev 1035)
@@ -21,6 +21,7 @@
 #include &lt;list&gt;
 #include &quot;NetworkInterface.hpp&quot;
 #include &quot;NetworkReturnCodes.hpp&quot;
+#include &quot;Network/ServerSocket.hpp&quot;
 
 #include &quot;Util/Timer.hpp&quot;
 #include &quot;Classes/PlayerID.hpp&quot;
@@ -64,25 +65,37 @@
     bool addClientToSendList(const PlayerID&amp; client_player_id);
     void removeClientFromSendList(const PlayerID&amp; client_player_id);
 
-    virtual void openSession() = 0;
-    virtual void hostSession() = 0;
-    virtual void closeSession() = 0;
+    void openSession();
+    
+    void hostSession();
+    
+    void closeSession();
 
-    virtual void sendMessage(NetMessage *message, size_t size) = 0;
-    virtual void sendMessage(NetClientID network_id, NetMessage* message,
-            size_t size) = 0;
+    void sendMessage(NetMessage *message, size_t size);
+    
+    void sendMessage(NetClientID network_id, NetMessage* message,
+            size_t size);
+    
     void sendMessage(const PlayerID&amp; player_id, NetMessage *message,
-            size_t size) {
+            size_t size)
+    {
         sendMessage(player_id.getNetworkID(), message, size);
     }
-    virtual void sendRemaining() = 0;
+    
+    void sendRemaining();
 
-    virtual bool getPacket(NetPacket* packet) = 0;
+    bool getPacket(NetPacket* packet);
 
-    virtual void dropClient(NetClientID client_id);
-    virtual void shutdownClientTransport(NetClientID network_id) = 0;
+    void dropClient(NetClientID client_id);
+    void shutdownClientTransport(NetClientID network_id);
 
-    virtual void checkIncoming() = 0;
+    void checkIncoming();
+    std::string getIP(NetClientID network_id) const;
+
+private:
+    ServerSocket* serversocket;
 };
 
+extern NetworkServer *SERVER;
+
 #endif // ** _NETWORKSERVER_HPP

Modified: trunk/netpanzer/src/NetPanzer/Classes/Network/ServerConnectDaemon.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Classes/Network/ServerConnectDaemon.cpp	2008-08-30 14:51:07 UTC (rev 1034)
+++ trunk/netpanzer/src/NetPanzer/Classes/Network/ServerConnectDaemon.cpp	2008-08-30 17:34:18 UTC (rev 1035)
@@ -24,7 +24,6 @@
 #include &quot;Interfaces/ObjectiveInterface.hpp&quot;
 #include &quot;Interfaces/PowerUpInterface.hpp&quot;
 #include &quot;Interfaces/MapInterface.hpp&quot;
-#include &quot;Interfaces/Server.hpp&quot;
 #include &quot;Classes/Network/NetworkServer.hpp&quot;
 #include &quot;Interfaces/GameManager.hpp&quot;
 #include &quot;Interfaces/GameConfig.hpp&quot;

Modified: trunk/netpanzer/src/NetPanzer/Classes/Network/ServerMessageRouter.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Classes/Network/ServerMessageRouter.cpp	2008-08-30 14:51:07 UTC (rev 1034)
+++ trunk/netpanzer/src/NetPanzer/Classes/Network/ServerMessageRouter.cpp	2008-08-30 17:34:18 UTC (rev 1035)
@@ -18,7 +18,6 @@
 #include &lt;config.h&gt;
 #include &quot;ServerMessageRouter.hpp&quot;
 
-#include &quot;Interfaces/Server.hpp&quot;
 #include &quot;Classes/Network/NetworkServer.hpp&quot;
 #include &quot;Classes/Network/ServerConnectDaemon.hpp&quot;
 #include &quot;Interfaces/UnitInterface.hpp&quot;

Modified: trunk/netpanzer/src/NetPanzer/Classes/Network/UnitSync.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Classes/Network/UnitSync.cpp	2008-08-30 14:51:07 UTC (rev 1034)
+++ trunk/netpanzer/src/NetPanzer/Classes/Network/UnitSync.cpp	2008-08-30 17:34:18 UTC (rev 1035)
@@ -18,7 +18,6 @@
 #include &lt;config.h&gt;
 
 #include &quot;UnitSync.hpp&quot;
-#include &quot;Interfaces/Server.hpp&quot;
 #include &quot;Classes/Network/NetworkServer.hpp&quot;
 #include &quot;Interfaces/UnitInterface.hpp&quot;
 #include &quot;Classes/UnitBase.hpp&quot;

Modified: trunk/netpanzer/src/NetPanzer/Classes/Outpost.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Classes/Outpost.cpp	2008-08-30 14:51:07 UTC (rev 1034)
+++ trunk/netpanzer/src/NetPanzer/Classes/Outpost.cpp	2008-08-30 17:34:18 UTC (rev 1035)
@@ -24,7 +24,6 @@
 #include &quot;Interfaces/MapInterface.hpp&quot;
 #include &quot;Interfaces/ConsoleInterface.hpp&quot;
 
-#include &quot;Interfaces/Server.hpp&quot;
 #include &quot;Classes/Network/NetworkServer.hpp&quot;
 #include &quot;Classes/Network/NetworkState.hpp&quot;
 #include &quot;Classes/Network/UnitNetMessage.hpp&quot;

Modified: trunk/netpanzer/src/NetPanzer/Classes/UnitOpcodeEncoder.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Classes/UnitOpcodeEncoder.cpp	2008-08-30 14:51:07 UTC (rev 1034)
+++ trunk/netpanzer/src/NetPanzer/Classes/UnitOpcodeEncoder.cpp	2008-08-30 17:34:18 UTC (rev 1035)
@@ -18,7 +18,6 @@
 #include &lt;config.h&gt;
 
 #include &quot;Classes/UnitOpcodeEncoder.hpp&quot;
-#include &quot;Interfaces/Server.hpp&quot;
 #include &quot;Classes/Network/NetworkServer.hpp&quot;
 #include &quot;Classes/Network/NetworkState.hpp&quot;
 #include &quot;Interfaces/ConsoleInterface.hpp&quot;

Modified: trunk/netpanzer/src/NetPanzer/Classes/UnitPowerUp.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Classes/UnitPowerUp.cpp	2008-08-30 14:51:07 UTC (rev 1034)
+++ trunk/netpanzer/src/NetPanzer/Classes/UnitPowerUp.cpp	2008-08-30 17:34:18 UTC (rev 1035)
@@ -26,7 +26,6 @@
 #include &quot;Interfaces/MapInterface.hpp&quot;
 #include &quot;Interfaces/ConsoleInterface.hpp&quot;
 
-#include &quot;Interfaces/Server.hpp&quot;
 #include &quot;Classes/Network/NetworkServer.hpp&quot;
 #include &quot;Classes/Network/NetworkState.hpp&quot;
 #include &quot;Classes/Network/UnitNetMessage.hpp&quot;

Modified: trunk/netpanzer/src/NetPanzer/Interfaces/BaseGameManager.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Interfaces/BaseGameManager.cpp	2008-08-30 14:51:07 UTC (rev 1034)
+++ trunk/netpanzer/src/NetPanzer/Interfaces/BaseGameManager.cpp	2008-08-30 17:34:18 UTC (rev 1035)
@@ -19,16 +19,15 @@
 #include &quot;BaseGameManager.hpp&quot;
 
 #include &quot;SDL.h&quot;
-#include &quot;Interfaces/unix/NetworkServerUnix.hpp&quot;
 #include &quot;Interfaces/unix/NetworkClientUnix.hpp&quot;
 
 // ** PObject netPanzer Network Includes
-#include &quot;Interfaces/Server.hpp&quot;
 #include &quot;Interfaces/Client.hpp&quot;
 #include &quot;Classes/Network/ClientMessageRouter.hpp&quot;
 #include &quot;Classes/Network/ServerConnectDaemon.hpp&quot;
 #include &quot;Classes/Network/ServerMessageRouter.hpp&quot;
 #include &quot;Classes/Network/NetworkState.hpp&quot;
+#include &quot;Classes/Network/NetworkServer.hpp&quot;
 
 #include &quot;Util/Log.hpp&quot;
 #include &quot;Interfaces/GameConfig.hpp&quot;
@@ -146,7 +145,7 @@
 //-----------------------------------------------------------------
 void BaseGameManager::initializeNetworkSubSystem()
 {
-    SERVER = new NetworkServerUnix();
+    SERVER = new NetworkServer();
     CLIENT = new NetworkClientUnix();
 
     ServerMessageRouter::initialize();

Modified: trunk/netpanzer/src/NetPanzer/Interfaces/ChatInterface.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Interfaces/ChatInterface.cpp	2008-08-30 14:51:07 UTC (rev 1034)
+++ trunk/netpanzer/src/NetPanzer/Interfaces/ChatInterface.cpp	2008-08-30 17:34:18 UTC (rev 1035)
@@ -22,7 +22,6 @@
 #include &quot;Interfaces/ChatInterface.hpp&quot;
 #include &quot;Interfaces/ConsoleInterface.hpp&quot;
 #include &quot;Interfaces/PlayerInterface.hpp&quot;
-#include &quot;Interfaces/Server.hpp&quot;
 #include &quot;Interfaces/Client.hpp&quot;
 #include &quot;Classes/Network/NetworkState.hpp&quot;
 #include &quot;Classes/Network/NetworkServer.hpp&quot;

Modified: trunk/netpanzer/src/NetPanzer/Interfaces/DedicatedGameManager.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Interfaces/DedicatedGameManager.cpp	2008-08-30 14:51:07 UTC (rev 1034)
+++ trunk/netpanzer/src/NetPanzer/Interfaces/DedicatedGameManager.cpp	2008-08-30 17:34:18 UTC (rev 1035)
@@ -36,10 +36,9 @@
 #include &quot;Interfaces/InfoSocket.hpp&quot;
 #include &quot;Interfaces/ObjectiveInterface.hpp&quot;
 #include &quot;Interfaces/PlayerInterface.hpp&quot;
-#include &quot;Interfaces/Server.hpp&quot;
-#include &quot;Interfaces/unix/NetworkServerUnix.hpp&quot;
 
 #include &quot;Classes/Network/NetworkState.hpp&quot;
+#include &quot;Classes/Network/NetworkServer.hpp&quot;
 
 #include &quot;Particles/Particle2D.hpp&quot;
 #include &quot;Particles/ParticleInterface.hpp&quot;
@@ -126,7 +125,6 @@
                     &lt;&lt; std::setw(4) &lt;&lt; &quot;Lost&quot; &lt;&lt; &quot; &quot;
                     &lt;&lt; std::setw(5) &lt;&lt; &quot;Score&quot; &lt;&lt; &quot; &quot;
                     &lt;&lt; std::setw(21) &lt;&lt; &quot;IP\n&quot;;
-                NetworkServerUnix* server = (NetworkServerUnix*) SERVER;
                 for(size_t i = 0; i&lt;PlayerInterface::getMaxPlayers(); ++i) {
                     PlayerState* playerstate =
                         PlayerInterface::getPlayerState(i);
@@ -140,7 +138,7 @@
                         &lt;&lt; std::setw(4) &lt;&lt; playerstate-&gt;getLosses() &lt;&lt; &quot; &quot;
                         &lt;&lt; std::setw(5) &lt;&lt; playerstate-&gt;getTotal() &lt;&lt; &quot; &quot;
                         &lt;&lt; std::setw(21) 
-                        &lt;&lt; server-&gt;getIP(playerstate-&gt;getNetworkID())
+                        &lt;&lt; SERVER-&gt;getIP(playerstate-&gt;getNetworkID())
                         &lt;&lt; &quot;\n&quot;;
                 }
                 //*Console::server &lt;&lt; std::flush;

Modified: trunk/netpanzer/src/NetPanzer/Interfaces/GameControlRulesDaemon.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Interfaces/GameControlRulesDaemon.cpp	2008-08-30 14:51:07 UTC (rev 1034)
+++ trunk/netpanzer/src/NetPanzer/Interfaces/GameControlRulesDaemon.cpp	2008-08-30 17:34:18 UTC (rev 1035)
@@ -26,7 +26,6 @@
 #include &quot;Interfaces/ConsoleInterface.hpp&quot;
 #include &quot;Interfaces/ChatInterface.hpp&quot;
 
-#include &quot;Interfaces/Server.hpp&quot;
 #include &quot;Interfaces/Client.hpp&quot;
 #include &quot;Classes/Network/NetworkState.hpp&quot;
 #include &quot;Classes/Network/SystemNetMessage.hpp&quot;

Modified: trunk/netpanzer/src/NetPanzer/Interfaces/GameManager.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Interfaces/GameManager.cpp	2008-08-30 14:51:07 UTC (rev 1034)
+++ trunk/netpanzer/src/NetPanzer/Interfaces/GameManager.cpp	2008-08-30 17:34:18 UTC (rev 1035)
@@ -43,12 +43,10 @@
 #include &quot;Interfaces/PlayerInterface.hpp&quot;
 #include &quot;Interfaces/PowerUpInterface.hpp&quot;
 #include &quot;Interfaces/ProjectileInterface.hpp&quot;
-#include &quot;Interfaces/Server.hpp&quot;
 #include &quot;Interfaces/TileInterface.hpp&quot;
 #include &quot;Interfaces/UnitInterface.hpp&quot;
 #include &quot;Interfaces/UnitProfileInterface.hpp&quot;
 #include &quot;Interfaces/WorldViewInterface.hpp&quot;
-#include &quot;Interfaces/unix/NetworkServerUnix.hpp&quot;
 #include &quot;Interfaces/unix/NetworkClientUnix.hpp&quot;
 
 #include &quot;Classes/ScreenSurface.hpp&quot;
@@ -62,6 +60,7 @@
 #include &quot;Classes/Network/ServerConnectDaemon.hpp&quot;
 #include &quot;Classes/Network/ServerMessageRouter.hpp&quot;
 #include &quot;Classes/Network/NetworkState.hpp&quot;
+#include &quot;Classes/Network/NetworkServer.hpp&quot;
 #include &quot;Classes/Network/SystemNetMessage.hpp&quot;
 #include &quot;Classes/Network/ConnectNetMessage.hpp&quot;
 #include &quot;Classes/Units/Vehicle.hpp&quot;

Modified: trunk/netpanzer/src/NetPanzer/Interfaces/ObjectiveInterface.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Interfaces/ObjectiveInterface.cpp	2008-08-30 14:51:07 UTC (rev 1034)
+++ trunk/netpanzer/src/NetPanzer/Interfaces/ObjectiveInterface.cpp	2008-08-30 17:34:18 UTC (rev 1035)
@@ -38,8 +38,6 @@
 #include &quot;Classes/Network/TerminalNetMesg.hpp&quot;
 #include &quot;Classes/Network/NetPacket.hpp&quot;
 
-#include &quot;Interfaces/Server.hpp&quot;
-
 std::vector&lt;Objective*&gt; ObjectiveInterface::objective_list;
 
 unsigned long ObjectiveInterface::objective_position_enum_list_size;

Modified: trunk/netpanzer/src/NetPanzer/Interfaces/PlayerGameManager.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Interfaces/PlayerGameManager.cpp	2008-08-30 14:51:07 UTC (rev 1034)
+++ trunk/netpanzer/src/NetPanzer/Interfaces/PlayerGameManager.cpp	2008-08-30 17:34:18 UTC (rev 1035)
@@ -38,12 +38,10 @@
 #include &quot;Interfaces/PlayerInterface.hpp&quot;
 #include &quot;Interfaces/PowerUpInterface.hpp&quot;
 #include &quot;Interfaces/ProjectileInterface.hpp&quot;
-#include &quot;Interfaces/Server.hpp&quot;
 #include &quot;Interfaces/TileInterface.hpp&quot;
 #include &quot;Interfaces/UnitInterface.hpp&quot;
 #include &quot;Interfaces/UnitProfileInterface.hpp&quot;
 #include &quot;Interfaces/WorldViewInterface.hpp&quot;
-#include &quot;Interfaces/unix/NetworkServerUnix.hpp&quot;
 #include &quot;Interfaces/unix/NetworkClientUnix.hpp&quot;
 
 #include &quot;Classes/ScreenSurface.hpp&quot;
@@ -56,6 +54,7 @@
 #include &quot;Classes/Network/ClientConnectDaemon.hpp&quot;
 #include &quot;Classes/Network/ServerConnectDaemon.hpp&quot;
 #include &quot;Classes/Network/ServerMessageRouter.hpp&quot;
+#include &quot;Classes/Network/NetworkServer.hpp&quot;
 #include &quot;Classes/Network/NetworkState.hpp&quot;
 #include &quot;Classes/Network/SystemNetMessage.hpp&quot;
 #include &quot;Classes/Network/ConnectNetMessage.hpp&quot;

Modified: trunk/netpanzer/src/NetPanzer/Interfaces/PlayerInterface.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Interfaces/PlayerInterface.cpp	2008-08-30 14:51:07 UTC (rev 1034)
+++ trunk/netpanzer/src/NetPanzer/Interfaces/PlayerInterface.cpp	2008-08-30 17:34:18 UTC (rev 1035)
@@ -19,7 +19,6 @@
 #include &lt;stdexcept&gt;
 
 #include &quot;Interfaces/PlayerInterface.hpp&quot;
-#include &quot;Interfaces/Server.hpp&quot;
 #include &quot;Interfaces/UnitInterface.hpp&quot;
 #include &quot;Interfaces/ObjectiveInterface.hpp&quot;
 #include &quot;Interfaces/ConsoleInterface.hpp&quot;

Modified: trunk/netpanzer/src/NetPanzer/Interfaces/PowerUpInterface.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Interfaces/PowerUpInterface.cpp	2008-08-30 14:51:07 UTC (rev 1034)
+++ trunk/netpanzer/src/NetPanzer/Interfaces/PowerUpInterface.cpp	2008-08-30 17:34:18 UTC (rev 1035)
@@ -32,7 +32,6 @@
 
 #include &quot;Util/Log.hpp&quot;
 #include &quot;Classes/Network/NetworkState.hpp&quot;
-#include &quot;Interfaces/Server.hpp&quot;
 #include &quot;Classes/Network/NetworkServer.hpp&quot;
 #include &quot;Classes/Network/PowerUpNetMessage.hpp&quot;
 

Deleted: trunk/netpanzer/src/NetPanzer/Interfaces/Server.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Interfaces/Server.cpp	2008-08-30 14:51:07 UTC (rev 1034)
+++ trunk/netpanzer/src/NetPanzer/Interfaces/Server.cpp	2008-08-30 17:34:18 UTC (rev 1035)
@@ -1,21 +0,0 @@
-/*
-Copyright (C) 1998 Pyrosoft Inc. (www.pyrosoftgames.com), Matthew Bogue
- 
-This program is free software; you can redistribute it and/or modify
-it under the terms of the GNU General Public License as published by
-the Free Software Foundation; either version 2 of the License, or
-(at your option) any later version.
- 
-This program is distributed in the hope that it will be useful,
-but WITHOUT ANY WARRANTY; without even the implied warranty of
-MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-GNU General Public License for more details.
- 
-You should have received a copy of the GNU General Public License
-along with this program; if not, write to the Free Software
-Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
-*/
-#include &lt;config.h&gt;
-#include &quot;Interfaces/Server.hpp&quot;
-
-NetworkServer* SERVER = 0;

Deleted: trunk/netpanzer/src/NetPanzer/Interfaces/Server.hpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Interfaces/Server.hpp	2008-08-30 14:51:07 UTC (rev 1034)
+++ trunk/netpanzer/src/NetPanzer/Interfaces/Server.hpp	2008-08-30 17:34:18 UTC (rev 1035)
@@ -1,24 +0,0 @@
-/*
-Copyright (C) 1998 Pyrosoft Inc. (www.pyrosoftgames.com), Matthew Bogue
- 
-This program is free software; you can redistribute it and/or modify
-it under the terms of the GNU General Public License as published by
-the Free Software Foundation; either version 2 of the License, or
-(at your option) any later version.
- 
-This program is distributed in the hope that it will be useful,
-but WITHOUT ANY WARRANTY; without even the implied warranty of
-MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-GNU General Public License for more details.
- 
-You should have received a copy of the GNU General Public License
-along with this program; if not, write to the Free Software
-Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
-*/
-#ifndef _SERVER_HPP
-#define _SERVER_HPP
-
-class NetworkServer;
-extern NetworkServer *SERVER;
-
-#endif

Modified: trunk/netpanzer/src/NetPanzer/Interfaces/UnitInterface.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Interfaces/UnitInterface.cpp	2008-08-30 14:51:07 UTC (rev 1034)
+++ trunk/netpanzer/src/NetPanzer/Interfaces/UnitInterface.cpp	2008-08-30 17:34:18 UTC (rev 1035)
@@ -29,7 +29,6 @@
 
 #include &quot;Types/iXY.hpp&quot;
 #include &quot;Util/Timer.hpp&quot;
-#include &quot;Interfaces/Server.hpp&quot;
 #include &quot;Classes/Network/NetworkServer.hpp&quot;
 #include &quot;Classes/Network/NetworkState.hpp&quot;
 #include &quot;Classes/Network/NetMessageEncoder.hpp&quot;

Deleted: trunk/netpanzer/src/NetPanzer/Interfaces/unix/NetworkServerUnix.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Interfaces/unix/NetworkServerUnix.cpp	2008-08-30 14:51:07 UTC (rev 1034)
+++ trunk/netpanzer/src/NetPanzer/Interfaces/unix/NetworkServerUnix.cpp	2008-08-30 17:34:18 UTC (rev 1035)
@@ -1,152 +0,0 @@
-/*
-Copyright (C) 1998 Pyrosoft Inc. (www.pyrosoftgames.com), Matthew Bogue
- 
-This program is free software; you can redistribute it and/or modify
-it under the terms of the GNU General Public License as published by
-the Free Software Foundation; either version 2 of the License, or
-(at your option) any later version.
- 
-This program is distributed in the hope that it will be useful,
-but WITHOUT ANY WARRANTY; without even the implied warranty of
-MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-GNU General Public License for more details.
- 
-You should have received a copy of the GNU General Public License
-along with this program; if not, write to the Free Software
-Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
-*/
-#include &lt;config.h&gt;
-
-#include &lt;assert.h&gt;
-#include &quot;Util/Log.hpp&quot;
-#include &quot;Core/NetworkGlobals.hpp&quot;
-#include &quot;Interfaces/GameConfig.hpp&quot;
-#include &quot;Classes/Network/NetworkState.hpp&quot;
-#include &quot;Util/Exception.hpp&quot;
-#include &quot;NetworkServerUnix.hpp&quot;
-
-#include &quot;Classes/Network/NetPacketDebugger.hpp&quot;
-
-//#define NETWORKDEBUG
-
-NetworkServerUnix::NetworkServerUnix()
-        : NetworkServer(), serversocket(0)
-{}
-
-NetworkServerUnix::~NetworkServerUnix()
-{
-    if ( serversocket )
-        delete serversocket;
-}
-
-std::string
-NetworkServerUnix::getIP(NetClientID id) const
-{
-    return serversocket-&gt;getClientIP(id);
-}
-
-void
-NetworkServerUnix::shutdownClientTransport(NetClientID client_id)
-{
-    if (serversocket)
-        serversocket-&gt;disconectClient(client_id);
-}
-
-void
-NetworkServerUnix::openSession()
-{}
-
-void
-NetworkServerUnix::hostSession()
-{
-    if ( serversocket ) {
-        delete serversocket;
-        serversocket = 0;
-    }
-    serversocket = new ServerSocket(gameconfig-&gt;bindaddress,
-            gameconfig-&gt;serverport);
-}
-
-void
-NetworkServerUnix::closeSession()
-{
-    if ( serversocket )
-        delete serversocket;
-    serversocket = 0;
-}
-
-void
-NetworkServerUnix::sendMessage(NetClientID network_id, NetMessage* message,
-        size_t size)
-{
-    if(serversocket == 0)
-        return;
-    message-&gt;setSize(size);
-
-    try {
-        serversocket-&gt;sendMessage(network_id, message, size);
-    } catch(std::exception&amp; e) {
-        LOG ( (&quot;Network send error when sending to client %d: %s&quot;,
-               network_id, e.what()) );
-        dropClient(network_id);
-        return;
-    }
-
-    NetworkState::incPacketsSent(size);
-
-#ifdef NETWORKDEBUG
-    NetPacketDebugger::logMessage(&quot;S&quot;, message);
-#endif
-}
-
-void
-NetworkServerUnix::sendMessage(NetMessage *message, size_t size)
-{
-    for(ClientList::iterator i = client_list.begin(); i != client_list.end();
-            ++i) {
-        if((*i)-&gt;wannadie)
-            continue;
-
-        try {
-            sendMessage((*i)-&gt;client_id.getNetworkID(), message, size);
-        } catch(std::exception&amp; e) {
-            LOG( (&quot;Error while sending network packet.&quot;) );
-            return;
-        }
-    }
-}
-
-bool
-NetworkServerUnix::getPacket(NetPacket* packet)
-{
-    if (loop_back_recv_queue.isReady() ) {
-        loop_back_recv_queue.dequeue(packet);
-
-#ifdef NETWORKDEBUG
-        NetPacketDebugger::logPacket(&quot;R&quot;, packet);
-#endif
-        return true;
-    } else if (receive_queue.isReady()) {
-        receive_queue.dequeue(packet);
-        NetworkState::incPacketsReceived(packet-&gt;getSize());
-
-        if (packet-&gt;getNetMessage()-&gt;message_class 
-                == _net_message_class_client_server) {
-            processNetPacket(packet);
-        }
-
-#ifdef NETWORKDEBUG
-        NetPacketDebugger::logPacket(&quot;R&quot;, packet);
-#endif
-        return true;
-    }
-
-    return false;
-}
-
-void
-NetworkServerUnix::checkIncoming()
-{
-    cleanupClients();
-}
-

Deleted: trunk/netpanzer/src/NetPanzer/Interfaces/unix/NetworkServerUnix.hpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Interfaces/unix/NetworkServerUnix.hpp	2008-08-30 14:51:07 UTC (rev 1034)
+++ trunk/netpanzer/src/NetPanzer/Interfaces/unix/NetworkServerUnix.hpp	2008-08-30 17:34:18 UTC (rev 1035)
@@ -1,54 +0,0 @@
-/*
-Copyright (C) 1998 Pyrosoft Inc. (www.pyrosoftgames.com), Matthew Bogue
- 
-This program is free software; you can redistribute it and/or modify
-it under the terms of the GNU General Public License as published by
-the Free Software Foundation; either version 2 of the License, or
-(at your option) any later version.
- 
-This program is distributed in the hope that it will be useful,
-but WITHOUT ANY WARRANTY; without even the implied warranty of
-MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-GNU General Public License for more details.
- 
-You should have received a copy of the GNU General Public License
-along with this program; if not, write to the Free Software
-Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
-*/
-#ifndef _NETWORK_SERVER_UNIX_HPP
-#define _NETWORK_SERVER_UNIX_HPP
-
-#include &quot;Classes/Network/NetworkServer.hpp&quot;
-#include &quot;Network/ServerSocket.hpp&quot;
-
-/** This class implements a bsd/unix socket implementation of the
- * NetworkServer interface.
- */
-class NetworkServerUnix : public NetworkServer
-{
-public:
-    NetworkServerUnix();
-    virtual ~NetworkServerUnix();
-
-    virtual void openSession();
-    virtual void hostSession();
-    virtual void closeSession();
-
-    virtual void sendMessage(NetMessage *message, size_t size);
-    virtual void sendMessage(NetClientID network_id,
-            NetMessage *message, size_t size);
-    void sendRemaining() { if ( serversocket ) serversocket-&gt;sendRemaining(); };
-
-    virtual bool getPacket(NetPacket* message);
-
-    virtual void shutdownClientTransport(NetClientID network_id);
-
-    virtual void checkIncoming();
-
-    std::string getIP(NetClientID network_id) const;
-
-private:
-    ServerSocket* serversocket;
-};
-
-#endif

Modified: trunk/netpanzer/src/NetPanzer/Views/MainMenu/Multi/GetSessionView.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Views/MainMenu/Multi/GetSessionView.cpp	2008-08-30 14:51:07 UTC (rev 1034)
+++ trunk/netpanzer/src/NetPanzer/Views/MainMenu/Multi/GetSessionView.cpp	2008-08-30 17:34:18 UTC (rev 1035)
@@ -28,7 +28,6 @@
 #include &quot;ServerListView.hpp&quot;
 
 #include &quot;Classes/Network/NetworkServer.hpp&quot;
-#include &quot;Interfaces/Server.hpp&quot;
 #include &quot;Interfaces/Client.hpp&quot;
 
 static int previousSessionType = _game_session_join;

Modified: trunk/netpanzer/src/NetPanzer/Views/MainMenu/Multi/HostJoinTemplateView.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Views/MainMenu/Multi/HostJoinTemplateView.cpp	2008-08-30 14:51:07 UTC (rev 1034)
+++ trunk/netpanzer/src/NetPanzer/Views/MainMenu/Multi/HostJoinTemplateView.cpp	2008-08-30 17:34:18 UTC (rev 1035)
@@ -36,7 +36,6 @@
 
 
 #include &quot;Interfaces/Client.hpp&quot;
-#include &quot;Interfaces/Server.hpp&quot;
 #include &quot;Classes/Network/NetworkClient.hpp&quot;
 #include &quot;Classes/Network/NetworkServer.hpp&quot;
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000075.html">[Netpanzer-cvs] r1034 - trunk/netpanzer/nbproject
</A></li>
	<LI>Next message: <A HREF="000077.html">[Netpanzer-cvs] r1036 - in trunk/netpanzer: nbproject	src/NetPanzer/Bot src/NetPanzer/Classes	src/NetPanzer/Classes/Network src/NetPanzer/Interfaces	src/NetPanzer/Interfaces/unix src/NetPanzer/Views/Game	src/NetPanzer/Views/MainMenu/Multi
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#76">[ date ]</a>
              <a href="thread.html#76">[ thread ]</a>
              <a href="subject.html#76">[ subject ]</a>
              <a href="author.html#76">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/netpanzer-cvs">More information about the Netpanzer-cvs
mailing list</a><br>
</body></html>
