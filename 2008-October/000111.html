<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Netpanzer-cvs] r1076 - in trunk/netpanzer: . nbproject scripts	src/Lib/2D src/NetPanzer src/NetPanzer/Core src/NetPanzer/Scripts
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/netpanzer-cvs/2008-October/index.html" >
   <LINK REL="made" HREF="mailto:netpanzer-cvs%40lists.berlios.de?Subject=Re%3A%20%5BNetpanzer-cvs%5D%20r1076%20-%20in%20trunk/netpanzer%3A%20.%20nbproject%20scripts%0A%09src/Lib/2D%20src/NetPanzer%20src/NetPanzer/Core%20src/NetPanzer/Scripts&In-Reply-To=%3C200810081747.m98Hlgmo007871%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000110.html">
   <LINK REL="Next"  HREF="000112.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Netpanzer-cvs] r1076 - in trunk/netpanzer: . nbproject scripts	src/Lib/2D src/NetPanzer src/NetPanzer/Core src/NetPanzer/Scripts</H1>
    <B>kromxp at mail.berlios.de</B> 
    <A HREF="mailto:netpanzer-cvs%40lists.berlios.de?Subject=Re%3A%20%5BNetpanzer-cvs%5D%20r1076%20-%20in%20trunk/netpanzer%3A%20.%20nbproject%20scripts%0A%09src/Lib/2D%20src/NetPanzer%20src/NetPanzer/Core%20src/NetPanzer/Scripts&In-Reply-To=%3C200810081747.m98Hlgmo007871%40sheep.berlios.de%3E"
       TITLE="[Netpanzer-cvs] r1076 - in trunk/netpanzer: . nbproject scripts	src/Lib/2D src/NetPanzer src/NetPanzer/Core src/NetPanzer/Scripts">kromxp at mail.berlios.de
       </A><BR>
    <I>Wed Oct  8 19:47:42 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000110.html">[Netpanzer-cvs] r1075 - trunk/netpanzer/maps
</A></li>
        <LI>Next message: <A HREF="000112.html">[Netpanzer-cvs] r1077 - in trunk/netpanzer: . scripts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#111">[ date ]</a>
              <a href="thread.html#111">[ thread ]</a>
              <a href="subject.html#111">[ subject ]</a>
              <a href="author.html#111">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: kromxp
Date: 2008-10-08 19:47:19 +0200 (Wed, 08 Oct 2008)
New Revision: 1076

Added:
   trunk/netpanzer/scripts/
   trunk/netpanzer/scripts/initcolors.lua
   trunk/netpanzer/scripts/initialize.lua
   trunk/netpanzer/src/NetPanzer/Scripts/
   trunk/netpanzer/src/NetPanzer/Scripts/ScriptHelper.cpp
   trunk/netpanzer/src/NetPanzer/Scripts/ScriptHelper.hpp
   trunk/netpanzer/src/NetPanzer/Scripts/ScriptManager.cpp
   trunk/netpanzer/src/NetPanzer/Scripts/ScriptManager.hpp
Modified:
   trunk/netpanzer/nbproject/Makefile-mac-debug.mk
   trunk/netpanzer/nbproject/Makefile-mac-release.mk
   trunk/netpanzer/nbproject/configurations.xml
   trunk/netpanzer/src/Lib/2D/Color.cpp
   trunk/netpanzer/src/Lib/2D/Color.hpp
   trunk/netpanzer/src/Lib/2D/Palette.cpp
   trunk/netpanzer/src/Lib/2D/Palette.hpp
   trunk/netpanzer/src/NetPanzer/Core/main.cpp
   trunk/netpanzer/src/NetPanzer/Jamfile
Log:
- Added ScriptManager and ScriptHelper, this two classes are the initial support for scripting in netpanzer
- The definition of the colors (brown, black, blue, white, etc...) is done in a lua script now.
In the script files, with the Color object can change the colors definition of the game, shouldn't try to set a new color not in the list or the script will fail with error. There is a ColorUtil class with a method makeColor, this method takes 3 parameters (must be 3) and calls Palette::getNearestColor.

The full lua libraries are loaded, but this only in testing period, they could be removed to avoid some dangerous scripts, to be defined.

Modified: trunk/netpanzer/nbproject/Makefile-mac-debug.mk
===================================================================
--- trunk/netpanzer/nbproject/Makefile-mac-debug.mk	2008-10-06 16:15:32 UTC (rev 1075)
+++ trunk/netpanzer/nbproject/Makefile-mac-debug.mk	2008-10-08 17:47:19 UTC (rev 1076)
@@ -161,6 +161,7 @@
 	${OBJECTDIR}/src/NetPanzer/Particles/FireParticleSystem2D.o \
 	${OBJECTDIR}/src/NetPanzer/Weapons/BulletWeapon.o \
 	${OBJECTDIR}/src/Lib/lua/lzio.o \
+	${OBJECTDIR}/src/NetPanzer/Scripts/ScriptManager.o \
 	${OBJECTDIR}/src/NetPanzer/Views/Components/ScrollBar.o \
 	${OBJECTDIR}/src/NetPanzer/Classes/Network/NetPacketDebugger.o \
 	${OBJECTDIR}/src/Lib/lua/print.o \
@@ -202,11 +203,11 @@
 	${OBJECTDIR}/src/NetPanzer/Units/UnitBucketArray.o \
 	${OBJECTDIR}/src/Lib/Util/UtilInterface.o \
 	${OBJECTDIR}/src/NetPanzer/Classes/SelectionList.o \
-	${OBJECTDIR}/src/NetPanzer/Interfaces/MiniMapInterface.o \
 	${OBJECTDIR}/src/Lib/physfs/zlib123/trees.o \
 	${OBJECTDIR}/src/NetPanzer/Weapons/Weapon.o \
 	${OBJECTDIR}/src/NetPanzer/Particles/SnowParticleSystem2D.o \
 	${OBJECTDIR}/src/Lib/lua/lua.o \
+	${OBJECTDIR}/src/NetPanzer/Scripts/ScriptHelper.o \
 	${OBJECTDIR}/src/NetPanzer/Particles/SparkParticle2D.o \
 	${OBJECTDIR}/src/Lib/physfs/zlib123/zutil.o \
 	${OBJECTDIR}/src/NetPanzer/Bot/Bot.o \
@@ -252,6 +253,7 @@
 	${OBJECTDIR}/src/NetPanzer/Views/Game/ResignView.o \
 	${OBJECTDIR}/src/Lib/Util/Log.o \
 	${OBJECTDIR}/src/Lib/optionmm/command_line.o \
+	${OBJECTDIR}/src/NetPanzer/Views/Components/MiniMap.o \
 	${OBJECTDIR}/src/NetPanzer/Units/Vehicle.o \
 	${OBJECTDIR}/src/NetPanzer/Views/MainMenu/MenuTemplateView.o \
 	${OBJECTDIR}/src/NetPanzer/Views/Game/VehicleSelectionView.o \
@@ -855,6 +857,10 @@
 	${MKDIR} -p ${OBJECTDIR}/src/Lib/lua
 	$(COMPILE.c) -g -Wall -DPHYSFS_SUPPORTS_ZIP=1 -DZ_PREFIX=1 -I. -Isrc/Lib -Isrc/NetPanzer -Isrc/Lib/physfs -Isrc/Lib/physfs/zlib123 -I/Library/Frameworks/SDL.framework/Versions/A/Headers -I/Library/Frameworks/SDL_mixer.framework/Versions/A/Headers -o ${OBJECTDIR}/src/Lib/lua/lzio.o src/Lib/lua/lzio.c
 
+${OBJECTDIR}/src/NetPanzer/Scripts/ScriptManager.o: src/NetPanzer/Scripts/ScriptManager.cpp 
+	${MKDIR} -p ${OBJECTDIR}/src/NetPanzer/Scripts
+	$(COMPILE.cc) -g -Wall -DPHYSFS_SUPPORTS_ZIP=1 -DZ_PREFIX=1 -I. -Isrc/Lib -Isrc/NetPanzer -Isrc/Lib/physfs -Isrc/Lib/physfs/zlib123 -I/Library/Frameworks/SDL.framework/Versions/A/Headers -I/Library/Frameworks/SDL_mixer.framework/Versions/A/Headers -o ${OBJECTDIR}/src/NetPanzer/Scripts/ScriptManager.o src/NetPanzer/Scripts/ScriptManager.cpp
+
 ${OBJECTDIR}/src/NetPanzer/Views/Components/ScrollBar.o: src/NetPanzer/Views/Components/ScrollBar.cpp 
 	${MKDIR} -p ${OBJECTDIR}/src/NetPanzer/Views/Components
 	$(COMPILE.cc) -g -Wall -DPHYSFS_SUPPORTS_ZIP=1 -DZ_PREFIX=1 -I. -Isrc/Lib -Isrc/NetPanzer -Isrc/Lib/physfs -Isrc/Lib/physfs/zlib123 -I/Library/Frameworks/SDL.framework/Versions/A/Headers -I/Library/Frameworks/SDL_mixer.framework/Versions/A/Headers -o ${OBJECTDIR}/src/NetPanzer/Views/Components/ScrollBar.o src/NetPanzer/Views/Components/ScrollBar.cpp
@@ -1019,10 +1025,6 @@
 	${MKDIR} -p ${OBJECTDIR}/src/NetPanzer/Classes
 	$(COMPILE.cc) -g -Wall -DPHYSFS_SUPPORTS_ZIP=1 -DZ_PREFIX=1 -I. -Isrc/Lib -Isrc/NetPanzer -Isrc/Lib/physfs -Isrc/Lib/physfs/zlib123 -I/Library/Frameworks/SDL.framework/Versions/A/Headers -I/Library/Frameworks/SDL_mixer.framework/Versions/A/Headers -o ${OBJECTDIR}/src/NetPanzer/Classes/SelectionList.o src/NetPanzer/Classes/SelectionList.cpp
 
-${OBJECTDIR}/src/NetPanzer/Interfaces/MiniMapInterface.o: src/NetPanzer/Interfaces/MiniMapInterface.cpp 
-	${MKDIR} -p ${OBJECTDIR}/src/NetPanzer/Interfaces
-	$(COMPILE.cc) -g -Wall -DPHYSFS_SUPPORTS_ZIP=1 -DZ_PREFIX=1 -I. -Isrc/Lib -Isrc/NetPanzer -Isrc/Lib/physfs -Isrc/Lib/physfs/zlib123 -I/Library/Frameworks/SDL.framework/Versions/A/Headers -I/Library/Frameworks/SDL_mixer.framework/Versions/A/Headers -o ${OBJECTDIR}/src/NetPanzer/Interfaces/MiniMapInterface.o src/NetPanzer/Interfaces/MiniMapInterface.cpp
-
 ${OBJECTDIR}/src/Lib/physfs/zlib123/trees.o: src/Lib/physfs/zlib123/trees.c 
 	${MKDIR} -p ${OBJECTDIR}/src/Lib/physfs/zlib123
 	$(COMPILE.c) -g -Wall -DPHYSFS_SUPPORTS_ZIP=1 -DZ_PREFIX=1 -I. -Isrc/Lib -Isrc/NetPanzer -Isrc/Lib/physfs -Isrc/Lib/physfs/zlib123 -I/Library/Frameworks/SDL.framework/Versions/A/Headers -I/Library/Frameworks/SDL_mixer.framework/Versions/A/Headers -o ${OBJECTDIR}/src/Lib/physfs/zlib123/trees.o src/Lib/physfs/zlib123/trees.c
@@ -1039,6 +1041,10 @@
 	${MKDIR} -p ${OBJECTDIR}/src/Lib/lua
 	$(COMPILE.cc) -g -Wall -DPHYSFS_SUPPORTS_ZIP=1 -DZ_PREFIX=1 -I. -Isrc/Lib -Isrc/NetPanzer -Isrc/Lib/physfs -Isrc/Lib/physfs/zlib123 -I/Library/Frameworks/SDL.framework/Versions/A/Headers -I/Library/Frameworks/SDL_mixer.framework/Versions/A/Headers -o ${OBJECTDIR}/src/Lib/lua/lua.o src/Lib/lua/lua.cpp
 
+${OBJECTDIR}/src/NetPanzer/Scripts/ScriptHelper.o: src/NetPanzer/Scripts/ScriptHelper.cpp 
+	${MKDIR} -p ${OBJECTDIR}/src/NetPanzer/Scripts
+	$(COMPILE.cc) -g -Wall -DPHYSFS_SUPPORTS_ZIP=1 -DZ_PREFIX=1 -I. -Isrc/Lib -Isrc/NetPanzer -Isrc/Lib/physfs -Isrc/Lib/physfs/zlib123 -I/Library/Frameworks/SDL.framework/Versions/A/Headers -I/Library/Frameworks/SDL_mixer.framework/Versions/A/Headers -o ${OBJECTDIR}/src/NetPanzer/Scripts/ScriptHelper.o src/NetPanzer/Scripts/ScriptHelper.cpp
+
 ${OBJECTDIR}/src/NetPanzer/Particles/SparkParticle2D.o: src/NetPanzer/Particles/SparkParticle2D.cpp 
 	${MKDIR} -p ${OBJECTDIR}/src/NetPanzer/Particles
 	$(COMPILE.cc) -g -Wall -DPHYSFS_SUPPORTS_ZIP=1 -DZ_PREFIX=1 -I. -Isrc/Lib -Isrc/NetPanzer -Isrc/Lib/physfs -Isrc/Lib/physfs/zlib123 -I/Library/Frameworks/SDL.framework/Versions/A/Headers -I/Library/Frameworks/SDL_mixer.framework/Versions/A/Headers -o ${OBJECTDIR}/src/NetPanzer/Particles/SparkParticle2D.o src/NetPanzer/Particles/SparkParticle2D.cpp
@@ -1219,6 +1225,10 @@
 	${MKDIR} -p ${OBJECTDIR}/src/Lib/optionmm
 	$(COMPILE.cc) -g -Wall -DPHYSFS_SUPPORTS_ZIP=1 -DZ_PREFIX=1 -I. -Isrc/Lib -Isrc/NetPanzer -Isrc/Lib/physfs -Isrc/Lib/physfs/zlib123 -I/Library/Frameworks/SDL.framework/Versions/A/Headers -I/Library/Frameworks/SDL_mixer.framework/Versions/A/Headers -o ${OBJECTDIR}/src/Lib/optionmm/command_line.o src/Lib/optionmm/command_line.cpp
 
+${OBJECTDIR}/src/NetPanzer/Views/Components/MiniMap.o: src/NetPanzer/Views/Components/MiniMap.cpp 
+	${MKDIR} -p ${OBJECTDIR}/src/NetPanzer/Views/Components
+	$(COMPILE.cc) -g -Wall -DPHYSFS_SUPPORTS_ZIP=1 -DZ_PREFIX=1 -I. -Isrc/Lib -Isrc/NetPanzer -Isrc/Lib/physfs -Isrc/Lib/physfs/zlib123 -I/Library/Frameworks/SDL.framework/Versions/A/Headers -I/Library/Frameworks/SDL_mixer.framework/Versions/A/Headers -o ${OBJECTDIR}/src/NetPanzer/Views/Components/MiniMap.o src/NetPanzer/Views/Components/MiniMap.cpp
+
 ${OBJECTDIR}/src/NetPanzer/Units/Vehicle.o: src/NetPanzer/Units/Vehicle.cpp 
 	${MKDIR} -p ${OBJECTDIR}/src/NetPanzer/Units
 	$(COMPILE.cc) -g -Wall -DPHYSFS_SUPPORTS_ZIP=1 -DZ_PREFIX=1 -I. -Isrc/Lib -Isrc/NetPanzer -Isrc/Lib/physfs -Isrc/Lib/physfs/zlib123 -I/Library/Frameworks/SDL.framework/Versions/A/Headers -I/Library/Frameworks/SDL_mixer.framework/Versions/A/Headers -o ${OBJECTDIR}/src/NetPanzer/Units/Vehicle.o src/NetPanzer/Units/Vehicle.cpp

Modified: trunk/netpanzer/nbproject/Makefile-mac-release.mk
===================================================================
--- trunk/netpanzer/nbproject/Makefile-mac-release.mk	2008-10-06 16:15:32 UTC (rev 1075)
+++ trunk/netpanzer/nbproject/Makefile-mac-release.mk	2008-10-08 17:47:19 UTC (rev 1076)
@@ -161,6 +161,7 @@
 	${OBJECTDIR}/src/NetPanzer/Particles/FireParticleSystem2D.o \
 	${OBJECTDIR}/src/NetPanzer/Weapons/BulletWeapon.o \
 	${OBJECTDIR}/src/Lib/lua/lzio.o \
+	${OBJECTDIR}/src/NetPanzer/Scripts/ScriptManager.o \
 	${OBJECTDIR}/src/NetPanzer/Views/Components/ScrollBar.o \
 	${OBJECTDIR}/src/NetPanzer/Classes/Network/NetPacketDebugger.o \
 	${OBJECTDIR}/src/Lib/lua/print.o \
@@ -202,11 +203,11 @@
 	${OBJECTDIR}/src/NetPanzer/Units/UnitBucketArray.o \
 	${OBJECTDIR}/src/Lib/Util/UtilInterface.o \
 	${OBJECTDIR}/src/NetPanzer/Classes/SelectionList.o \
-	${OBJECTDIR}/src/NetPanzer/Interfaces/MiniMapInterface.o \
 	${OBJECTDIR}/src/Lib/physfs/zlib123/trees.o \
 	${OBJECTDIR}/src/NetPanzer/Weapons/Weapon.o \
 	${OBJECTDIR}/src/NetPanzer/Particles/SnowParticleSystem2D.o \
 	${OBJECTDIR}/src/Lib/lua/lua.o \
+	${OBJECTDIR}/src/NetPanzer/Scripts/ScriptHelper.o \
 	${OBJECTDIR}/src/NetPanzer/Particles/SparkParticle2D.o \
 	${OBJECTDIR}/src/Lib/physfs/zlib123/zutil.o \
 	${OBJECTDIR}/src/NetPanzer/Bot/Bot.o \
@@ -252,6 +253,7 @@
 	${OBJECTDIR}/src/NetPanzer/Views/Game/ResignView.o \
 	${OBJECTDIR}/src/Lib/Util/Log.o \
 	${OBJECTDIR}/src/Lib/optionmm/command_line.o \
+	${OBJECTDIR}/src/NetPanzer/Views/Components/MiniMap.o \
 	${OBJECTDIR}/src/NetPanzer/Units/Vehicle.o \
 	${OBJECTDIR}/src/NetPanzer/Views/MainMenu/MenuTemplateView.o \
 	${OBJECTDIR}/src/NetPanzer/Views/Game/VehicleSelectionView.o \
@@ -855,6 +857,10 @@
 	${MKDIR} -p ${OBJECTDIR}/src/Lib/lua
 	$(COMPILE.c) -O2 -Wall -DPHYSFS_SUPPORTS_ZIP=1 -DZ_PREFIX=1 -I. -Isrc/Lib -Isrc/NetPanzer -Isrc/Lib/physfs -Isrc/Lib/physfs/zlib123 -I/Library/Frameworks/SDL.framework/Versions/A/Headers -I/Library/Frameworks/SDL_mixer.framework/Versions/A/Headers -o ${OBJECTDIR}/src/Lib/lua/lzio.o src/Lib/lua/lzio.c
 
+${OBJECTDIR}/src/NetPanzer/Scripts/ScriptManager.o: src/NetPanzer/Scripts/ScriptManager.cpp 
+	${MKDIR} -p ${OBJECTDIR}/src/NetPanzer/Scripts
+	$(COMPILE.cc) -O2 -Wall -DPHYSFS_SUPPORTS_ZIP=1 -DZ_PREFIX=1 -I. -Isrc/Lib -Isrc/NetPanzer -Isrc/Lib/physfs -Isrc/Lib/physfs/zlib123 -I/Library/Frameworks/SDL.framework/Versions/A/Headers -I/Library/Frameworks/SDL_mixer.framework/Versions/A/Headers -o ${OBJECTDIR}/src/NetPanzer/Scripts/ScriptManager.o src/NetPanzer/Scripts/ScriptManager.cpp
+
 ${OBJECTDIR}/src/NetPanzer/Views/Components/ScrollBar.o: src/NetPanzer/Views/Components/ScrollBar.cpp 
 	${MKDIR} -p ${OBJECTDIR}/src/NetPanzer/Views/Components
 	$(COMPILE.cc) -O2 -Wall -DPHYSFS_SUPPORTS_ZIP=1 -DZ_PREFIX=1 -I. -Isrc/Lib -Isrc/NetPanzer -Isrc/Lib/physfs -Isrc/Lib/physfs/zlib123 -I/Library/Frameworks/SDL.framework/Versions/A/Headers -I/Library/Frameworks/SDL_mixer.framework/Versions/A/Headers -o ${OBJECTDIR}/src/NetPanzer/Views/Components/ScrollBar.o src/NetPanzer/Views/Components/ScrollBar.cpp
@@ -1019,10 +1025,6 @@
 	${MKDIR} -p ${OBJECTDIR}/src/NetPanzer/Classes
 	$(COMPILE.cc) -O2 -Wall -DPHYSFS_SUPPORTS_ZIP=1 -DZ_PREFIX=1 -I. -Isrc/Lib -Isrc/NetPanzer -Isrc/Lib/physfs -Isrc/Lib/physfs/zlib123 -I/Library/Frameworks/SDL.framework/Versions/A/Headers -I/Library/Frameworks/SDL_mixer.framework/Versions/A/Headers -o ${OBJECTDIR}/src/NetPanzer/Classes/SelectionList.o src/NetPanzer/Classes/SelectionList.cpp
 
-${OBJECTDIR}/src/NetPanzer/Interfaces/MiniMapInterface.o: src/NetPanzer/Interfaces/MiniMapInterface.cpp 
-	${MKDIR} -p ${OBJECTDIR}/src/NetPanzer/Interfaces
-	$(COMPILE.cc) -O2 -Wall -DPHYSFS_SUPPORTS_ZIP=1 -DZ_PREFIX=1 -I. -Isrc/Lib -Isrc/NetPanzer -Isrc/Lib/physfs -Isrc/Lib/physfs/zlib123 -I/Library/Frameworks/SDL.framework/Versions/A/Headers -I/Library/Frameworks/SDL_mixer.framework/Versions/A/Headers -o ${OBJECTDIR}/src/NetPanzer/Interfaces/MiniMapInterface.o src/NetPanzer/Interfaces/MiniMapInterface.cpp
-
 ${OBJECTDIR}/src/Lib/physfs/zlib123/trees.o: src/Lib/physfs/zlib123/trees.c 
 	${MKDIR} -p ${OBJECTDIR}/src/Lib/physfs/zlib123
 	$(COMPILE.c) -O2 -Wall -DPHYSFS_SUPPORTS_ZIP=1 -DZ_PREFIX=1 -I. -Isrc/Lib -Isrc/NetPanzer -Isrc/Lib/physfs -Isrc/Lib/physfs/zlib123 -I/Library/Frameworks/SDL.framework/Versions/A/Headers -I/Library/Frameworks/SDL_mixer.framework/Versions/A/Headers -o ${OBJECTDIR}/src/Lib/physfs/zlib123/trees.o src/Lib/physfs/zlib123/trees.c
@@ -1039,6 +1041,10 @@
 	${MKDIR} -p ${OBJECTDIR}/src/Lib/lua
 	$(COMPILE.cc) -O2 -Wall -DPHYSFS_SUPPORTS_ZIP=1 -DZ_PREFIX=1 -I. -Isrc/Lib -Isrc/NetPanzer -Isrc/Lib/physfs -Isrc/Lib/physfs/zlib123 -I/Library/Frameworks/SDL.framework/Versions/A/Headers -I/Library/Frameworks/SDL_mixer.framework/Versions/A/Headers -o ${OBJECTDIR}/src/Lib/lua/lua.o src/Lib/lua/lua.cpp
 
+${OBJECTDIR}/src/NetPanzer/Scripts/ScriptHelper.o: src/NetPanzer/Scripts/ScriptHelper.cpp 
+	${MKDIR} -p ${OBJECTDIR}/src/NetPanzer/Scripts
+	$(COMPILE.cc) -O2 -Wall -DPHYSFS_SUPPORTS_ZIP=1 -DZ_PREFIX=1 -I. -Isrc/Lib -Isrc/NetPanzer -Isrc/Lib/physfs -Isrc/Lib/physfs/zlib123 -I/Library/Frameworks/SDL.framework/Versions/A/Headers -I/Library/Frameworks/SDL_mixer.framework/Versions/A/Headers -o ${OBJECTDIR}/src/NetPanzer/Scripts/ScriptHelper.o src/NetPanzer/Scripts/ScriptHelper.cpp
+
 ${OBJECTDIR}/src/NetPanzer/Particles/SparkParticle2D.o: src/NetPanzer/Particles/SparkParticle2D.cpp 
 	${MKDIR} -p ${OBJECTDIR}/src/NetPanzer/Particles
 	$(COMPILE.cc) -O2 -Wall -DPHYSFS_SUPPORTS_ZIP=1 -DZ_PREFIX=1 -I. -Isrc/Lib -Isrc/NetPanzer -Isrc/Lib/physfs -Isrc/Lib/physfs/zlib123 -I/Library/Frameworks/SDL.framework/Versions/A/Headers -I/Library/Frameworks/SDL_mixer.framework/Versions/A/Headers -o ${OBJECTDIR}/src/NetPanzer/Particles/SparkParticle2D.o src/NetPanzer/Particles/SparkParticle2D.cpp
@@ -1219,6 +1225,10 @@
 	${MKDIR} -p ${OBJECTDIR}/src/Lib/optionmm
 	$(COMPILE.cc) -O2 -Wall -DPHYSFS_SUPPORTS_ZIP=1 -DZ_PREFIX=1 -I. -Isrc/Lib -Isrc/NetPanzer -Isrc/Lib/physfs -Isrc/Lib/physfs/zlib123 -I/Library/Frameworks/SDL.framework/Versions/A/Headers -I/Library/Frameworks/SDL_mixer.framework/Versions/A/Headers -o ${OBJECTDIR}/src/Lib/optionmm/command_line.o src/Lib/optionmm/command_line.cpp
 
+${OBJECTDIR}/src/NetPanzer/Views/Components/MiniMap.o: src/NetPanzer/Views/Components/MiniMap.cpp 
+	${MKDIR} -p ${OBJECTDIR}/src/NetPanzer/Views/Components
+	$(COMPILE.cc) -O2 -Wall -DPHYSFS_SUPPORTS_ZIP=1 -DZ_PREFIX=1 -I. -Isrc/Lib -Isrc/NetPanzer -Isrc/Lib/physfs -Isrc/Lib/physfs/zlib123 -I/Library/Frameworks/SDL.framework/Versions/A/Headers -I/Library/Frameworks/SDL_mixer.framework/Versions/A/Headers -o ${OBJECTDIR}/src/NetPanzer/Views/Components/MiniMap.o src/NetPanzer/Views/Components/MiniMap.cpp
+
 ${OBJECTDIR}/src/NetPanzer/Units/Vehicle.o: src/NetPanzer/Units/Vehicle.cpp 
 	${MKDIR} -p ${OBJECTDIR}/src/NetPanzer/Units
 	$(COMPILE.cc) -O2 -Wall -DPHYSFS_SUPPORTS_ZIP=1 -DZ_PREFIX=1 -I. -Isrc/Lib -Isrc/NetPanzer -Isrc/Lib/physfs -Isrc/Lib/physfs/zlib123 -I/Library/Frameworks/SDL.framework/Versions/A/Headers -I/Library/Frameworks/SDL_mixer.framework/Versions/A/Headers -o ${OBJECTDIR}/src/NetPanzer/Units/Vehicle.o src/NetPanzer/Units/Vehicle.cpp

Modified: trunk/netpanzer/nbproject/configurations.xml
===================================================================
--- trunk/netpanzer/nbproject/configurations.xml	2008-10-06 16:15:32 UTC (rev 1075)
+++ trunk/netpanzer/nbproject/configurations.xml	2008-10-08 17:47:19 UTC (rev 1076)
@@ -456,6 +456,12 @@
           &lt;itemPath&gt;src/NetPanzer/Resources/ResourceManager.cpp&lt;/itemPath&gt;
           &lt;itemPath&gt;src/NetPanzer/Resources/ResourceManager.hpp&lt;/itemPath&gt;
         &lt;/logicalFolder&gt;
+        &lt;logicalFolder name=&quot;Scripts&quot; displayName=&quot;Scripts&quot; projectFiles=&quot;true&quot;&gt;
+          &lt;itemPath&gt;src/NetPanzer/Scripts/ScriptHelper.cpp&lt;/itemPath&gt;
+          &lt;itemPath&gt;src/NetPanzer/Scripts/ScriptHelper.hpp&lt;/itemPath&gt;
+          &lt;itemPath&gt;src/NetPanzer/Scripts/ScriptManager.cpp&lt;/itemPath&gt;
+          &lt;itemPath&gt;src/NetPanzer/Scripts/ScriptManager.hpp&lt;/itemPath&gt;
+        &lt;/logicalFolder&gt;
         &lt;logicalFolder name=&quot;Structs&quot; displayName=&quot;Structs&quot; projectFiles=&quot;true&quot;&gt;
           &lt;itemPath&gt;src/NetPanzer/Structs/TileSetStruct.hpp&lt;/itemPath&gt;
         &lt;/logicalFolder&gt;
@@ -1891,6 +1897,18 @@
       &lt;item path=&quot;src/NetPanzer/Resources/ResourceManager.hpp&quot;&gt;
         &lt;itemTool&gt;3&lt;/itemTool&gt;
       &lt;/item&gt;
+      &lt;item path=&quot;src/NetPanzer/Scripts/ScriptHelper.cpp&quot;&gt;
+        &lt;itemTool&gt;1&lt;/itemTool&gt;
+      &lt;/item&gt;
+      &lt;item path=&quot;src/NetPanzer/Scripts/ScriptHelper.hpp&quot;&gt;
+        &lt;itemTool&gt;3&lt;/itemTool&gt;
+      &lt;/item&gt;
+      &lt;item path=&quot;src/NetPanzer/Scripts/ScriptManager.cpp&quot;&gt;
+        &lt;itemTool&gt;1&lt;/itemTool&gt;
+      &lt;/item&gt;
+      &lt;item path=&quot;src/NetPanzer/Scripts/ScriptManager.hpp&quot;&gt;
+        &lt;itemTool&gt;3&lt;/itemTool&gt;
+      &lt;/item&gt;
       &lt;item path=&quot;src/NetPanzer/Structs/TileSetStruct.hpp&quot;&gt;
         &lt;itemTool&gt;3&lt;/itemTool&gt;
       &lt;/item&gt;
@@ -3611,6 +3629,18 @@
       &lt;item path=&quot;src/NetPanzer/Resources/ResourceManager.hpp&quot;&gt;
         &lt;itemTool&gt;3&lt;/itemTool&gt;
       &lt;/item&gt;
+      &lt;item path=&quot;src/NetPanzer/Scripts/ScriptHelper.cpp&quot;&gt;
+        &lt;itemTool&gt;1&lt;/itemTool&gt;
+      &lt;/item&gt;
+      &lt;item path=&quot;src/NetPanzer/Scripts/ScriptHelper.hpp&quot;&gt;
+        &lt;itemTool&gt;3&lt;/itemTool&gt;
+      &lt;/item&gt;
+      &lt;item path=&quot;src/NetPanzer/Scripts/ScriptManager.cpp&quot;&gt;
+        &lt;itemTool&gt;1&lt;/itemTool&gt;
+      &lt;/item&gt;
+      &lt;item path=&quot;src/NetPanzer/Scripts/ScriptManager.hpp&quot;&gt;
+        &lt;itemTool&gt;3&lt;/itemTool&gt;
+      &lt;/item&gt;
       &lt;item path=&quot;src/NetPanzer/Structs/TileSetStruct.hpp&quot;&gt;
         &lt;itemTool&gt;3&lt;/itemTool&gt;
       &lt;/item&gt;
@@ -5331,6 +5361,18 @@
       &lt;item path=&quot;src/NetPanzer/Resources/ResourceManager.hpp&quot;&gt;
         &lt;itemTool&gt;3&lt;/itemTool&gt;
       &lt;/item&gt;
+      &lt;item path=&quot;src/NetPanzer/Scripts/ScriptHelper.cpp&quot;&gt;
+        &lt;itemTool&gt;1&lt;/itemTool&gt;
+      &lt;/item&gt;
+      &lt;item path=&quot;src/NetPanzer/Scripts/ScriptHelper.hpp&quot;&gt;
+        &lt;itemTool&gt;3&lt;/itemTool&gt;
+      &lt;/item&gt;
+      &lt;item path=&quot;src/NetPanzer/Scripts/ScriptManager.cpp&quot;&gt;
+        &lt;itemTool&gt;1&lt;/itemTool&gt;
+      &lt;/item&gt;
+      &lt;item path=&quot;src/NetPanzer/Scripts/ScriptManager.hpp&quot;&gt;
+        &lt;itemTool&gt;3&lt;/itemTool&gt;
+      &lt;/item&gt;
       &lt;item path=&quot;src/NetPanzer/Structs/TileSetStruct.hpp&quot;&gt;
         &lt;itemTool&gt;3&lt;/itemTool&gt;
       &lt;/item&gt;
@@ -7051,6 +7093,18 @@
       &lt;item path=&quot;src/NetPanzer/Resources/ResourceManager.hpp&quot;&gt;
         &lt;itemTool&gt;3&lt;/itemTool&gt;
       &lt;/item&gt;
+      &lt;item path=&quot;src/NetPanzer/Scripts/ScriptHelper.cpp&quot;&gt;
+        &lt;itemTool&gt;1&lt;/itemTool&gt;
+      &lt;/item&gt;
+      &lt;item path=&quot;src/NetPanzer/Scripts/ScriptHelper.hpp&quot;&gt;
+        &lt;itemTool&gt;3&lt;/itemTool&gt;
+      &lt;/item&gt;
+      &lt;item path=&quot;src/NetPanzer/Scripts/ScriptManager.cpp&quot;&gt;
+        &lt;itemTool&gt;1&lt;/itemTool&gt;
+      &lt;/item&gt;
+      &lt;item path=&quot;src/NetPanzer/Scripts/ScriptManager.hpp&quot;&gt;
+        &lt;itemTool&gt;3&lt;/itemTool&gt;
+      &lt;/item&gt;
       &lt;item path=&quot;src/NetPanzer/Structs/TileSetStruct.hpp&quot;&gt;
         &lt;itemTool&gt;3&lt;/itemTool&gt;
       &lt;/item&gt;

Added: trunk/netpanzer/scripts/initcolors.lua
===================================================================
--- trunk/netpanzer/scripts/initcolors.lua	2008-10-06 16:15:32 UTC (rev 1075)
+++ trunk/netpanzer/scripts/initcolors.lua	2008-10-08 17:47:19 UTC (rev 1076)
@@ -0,0 +1,77 @@
+print(&quot;Setting colors&quot;);
+    Color.unitAqua        = ColorUtil.makeColor(  0, 204, 255);
+print(&quot;unitAqua is &quot; .. Color.unitAqua);
+    Color.unitYellow      = ColorUtil.makeColor(255, 255,   0);
+    Color.unitRed         = ColorUtil.makeColor(255,   0,   0);
+    Color.unitBlue        = ColorUtil.makeColor(  3,   3, 255);
+    Color.unitDarkBlue    = ColorUtil.makeColor(  0,   0, 128);
+    Color.unitLightGreen  = ColorUtil.makeColor(163, 214, 159);
+    Color.unitGreen       = ColorUtil.makeColor( 31, 166,  36);
+    Color.unitBlueGray    = ColorUtil.makeColor( 43,  85, 131);
+    Color.unitDarkRed     = ColorUtil.makeColor(150,   0,   0);
+    Color.unitBlack       = ColorUtil.makeColor(  6,   2,   2);
+    Color.unitDarkGreen   = ColorUtil.makeColor( 26,  88,  36);
+    Color.unitWhite       = ColorUtil.makeColor(250, 253, 248);
+    Color.unitLightOrange = ColorUtil.makeColor(246, 210,  99);
+    Color.unitOrange      = ColorUtil.makeColor(205, 144,   9);
+    Color.unitGray        = ColorUtil.makeColor(186, 186, 186);
+    Color.unitDarkGray    = ColorUtil.makeColor( 99, 100, 102);
+
+    -- Grays
+    Color.black   = ColorUtil.makeColor(  0,   0,   0, true);
+    Color.gray32  = ColorUtil.makeColor( 32,  32,  32);
+    Color.gray64  = ColorUtil.makeColor( 64,  64,  64);
+    Color.gray96  = ColorUtil.makeColor( 96,  96,  96);
+    Color.gray128 = ColorUtil.makeColor(128, 128, 128);
+    Color.gray160 = ColorUtil.makeColor(160, 160, 160);
+    Color.gray192 = ColorUtil.makeColor(192, 192, 192);
+    Color.gray224 = ColorUtil.makeColor(224, 224, 224);
+    Color.white   = ColorUtil.makeColor(255, 255, 255);
+print(&quot;white is &quot; .. Color.white);
+    -- Dark Colors !FIXME!
+    Color.darkGray    = Color.gray64;
+    Color.darkRed     = ColorUtil.makeColor(128,   0,   0); -- fixed
+    Color.darkGreen   = ColorUtil.makeColor(  0, 128,   0); -- fixed
+    Color.darkBlue    = ColorUtil.makeColor(  0,   0, 128); -- fixed
+    Color.darkYellow  = ColorUtil.makeColor(255, 168,  18); -- fixed
+    Color.darkOrange  = ColorUtil.makeColor(255, 140,   0); -- fixed
+    Color.darkMagenta = ColorUtil.makeColor(148,   0, 211); -- fixed
+    Color.darkCyan    = ColorUtil.makeColor(  0, 206, 209); -- fixed
+
+    -- Normal Colors
+    Color.gray    = Color.gray128;
+    Color.red     = ColorUtil.makeColor(255,   0,   0); -- fixed
+    Color.green   = ColorUtil.makeColor(  0, 255,   0); -- fixed
+    Color.blue    = ColorUtil.makeColor(  0,   0, 255); -- fixed
+    Color.yellow  = ColorUtil.makeColor(255, 255,   0); -- fixed
+    Color.orange  = ColorUtil.makeColor(255, 128,   0); -- fixed
+    Color.magenta = ColorUtil.makeColor(255,   0, 255); -- fixed
+    Color.cyan    = ColorUtil.makeColor(  0, 255, 255); -- fixed
+    --Color.brown   = ColorUtil.makeColor(128,  42,  42); -- fixed
+    Color.brown   = ColorUtil.makeColor(200,  80,  80); -- new brown is lighter
+    
+    --tan                   210 180 140   0.8235 0.7059 0.5490
+    Color.tan            = ColorUtil.makeColor(210, 180, 140); -- fixed
+    --chartreuse            127 255   0   0.4980 1.0000 0.0000
+    Color.chartreuse     = ColorUtil.makeColor(127, 255,   0); -- fixed
+    --cobalt_green           61 145  64   0.2400 0.5700 0.2500
+    Color.cobaltGreen    = ColorUtil.makeColor( 61, 145,  64); -- fixed
+    --emerald_green           0 201  87   0.0000 0.7900 0.3400
+    Color.emeraldGreen   = ColorUtil.makeColor(  0, 201,  87); -- fixed
+    --forest_green           34 139  34   0.1333 0.5451 0.1333
+    Color.forestGreen    = ColorUtil.makeColor( 34, 139,  34); -- fixed
+    --olive_green_dark       85 107  47   0.3333 0.4196 0.1843
+    Color.darkOliveGreen = ColorUtil.makeColor( 85, 107,  47); -- fixed
+    --terre_verte            56  94  15   0.2200 0.3700 0.0600
+    Color.terreVerte     = ColorUtil.makeColor( 56,  94,  15); -- fixed
+
+    -- Normal Colors !FIXME!
+    Color.lightGray    = Color.gray192;
+    Color.lightRed     = ColorUtil.makeColor(255, 160, 122); -- fixed
+    Color.lightGreen   = ColorUtil.makeColor( 50, 205,  50); -- fixed
+    Color.lightBlue    = ColorUtil.makeColor(135, 206, 250); -- fixed
+    Color.lightYellow  = ColorUtil.makeColor(255, 255, 224); -- fixed
+    Color.lightOrange  = ColorUtil.makeColor(237, 145,  33); -- fixed
+    Color.lightMagenta = ColorUtil.makeColor(  0, 255, 255);
+    Color.lightCyan    = ColorUtil.makeColor(224, 255, 255); -- fixed
+

Added: trunk/netpanzer/scripts/initialize.lua
===================================================================
--- trunk/netpanzer/scripts/initialize.lua	2008-10-06 16:15:32 UTC (rev 1075)
+++ trunk/netpanzer/scripts/initialize.lua	2008-10-08 17:47:19 UTC (rev 1076)
@@ -0,0 +1,3 @@
+
+print(&quot;Lua is working from within a file!!!!!&quot;);
+

Modified: trunk/netpanzer/src/Lib/2D/Color.cpp
===================================================================
--- trunk/netpanzer/src/Lib/2D/Color.cpp	2008-10-06 16:15:32 UTC (rev 1075)
+++ trunk/netpanzer/src/Lib/2D/Color.cpp	2008-10-08 17:47:19 UTC (rev 1076)
@@ -20,70 +20,93 @@
 #include &lt;config.h&gt;
 #include &quot;Color.hpp&quot;
 
-Uint8 Color::unitAqua;
-Uint8 Color::unitYellow;
-Uint8 Color::unitRed;
-Uint8 Color::unitBlue;
-Uint8 Color::unitDarkBlue;
-Uint8 Color::unitLightGreen;
-Uint8 Color::unitGreen;
-Uint8 Color::unitBlueGray;
-Uint8 Color::unitDarkRed;
-Uint8 Color::unitBlack;
-Uint8 Color::unitDarkGreen;
-Uint8 Color::unitWhite;
-Uint8 Color::unitLightOrange;
-Uint8 Color::unitOrange;
-Uint8 Color::unitGray;
-Uint8 Color::unitDarkGray;
+// Here is some preprocessor abuse
 
-Uint8 Color::black;
-Uint8 Color::blue;
-Uint8 Color::brown;
-Uint8 Color::cyan;
-Uint8 Color::gray;
-Uint8 Color::green;
-Uint8 Color::magenta;
-Uint8 Color::orange;
-Uint8 Color::pink;
-Uint8 Color::red;
-Uint8 Color::white;
-Uint8 Color::yellow;
+#define GEN_COLORS(GENERATOR) \
+    GENERATOR(unitAqua) \
+    GENERATOR(unitYellow) \
+    GENERATOR(unitRed) \
+    GENERATOR(unitBlue) \
+    GENERATOR(unitDarkBlue) \
+    GENERATOR(unitLightGreen) \
+    GENERATOR(unitGreen) \
+    GENERATOR(unitBlueGray) \
+    GENERATOR(unitDarkRed) \
+    GENERATOR(unitBlack) \
+    GENERATOR(unitDarkGreen) \
+    GENERATOR(unitWhite) \
+    GENERATOR(unitLightOrange) \
+    GENERATOR(unitOrange) \
+    GENERATOR(unitGray) \
+    GENERATOR(unitDarkGray) \
+    GENERATOR(black) \
+    GENERATOR(blue) \
+    GENERATOR(brown) \
+    GENERATOR(cyan) \
+    GENERATOR(gray) \
+    GENERATOR(green) \
+    GENERATOR(magenta) \
+    GENERATOR(orange) \
+    GENERATOR(pink) \
+    GENERATOR(red) \
+    GENERATOR(white) \
+    GENERATOR(yellow) \
+    GENERATOR(tan) \
+    GENERATOR(chartreuse) \
+    GENERATOR(cobaltGreen) \
+    GENERATOR(emeraldGreen) \
+    GENERATOR(forestGreen) \
+    GENERATOR(darkOliveGreen) \
+    GENERATOR(terreVerte) \
+    GENERATOR(darkBlue) \
+    GENERATOR(darkBrown) \
+    GENERATOR(darkCyan) \
+    GENERATOR(darkGray) \
+    GENERATOR(darkGreen) \
+    GENERATOR(darkMagenta) \
+    GENERATOR(darkOrange) \
+    GENERATOR(darkPink) \
+    GENERATOR(darkRed) \
+    GENERATOR(darkYellow) \
+    GENERATOR(lightBlue) \
+    GENERATOR(lightBrown) \
+    GENERATOR(lightCyan) \
+    GENERATOR(lightGray) \
+    GENERATOR(lightGreen) \
+    GENERATOR(lightMagenta) \
+    GENERATOR(lightOrange) \
+    GENERATOR(lightPink) \
+    GENERATOR(lightRed) \
+    GENERATOR(lightYellow) \
+    GENERATOR(gray32) \
+    GENERATOR(gray64) \
+    GENERATOR(gray96) \
+    GENERATOR(gray128) \
+    GENERATOR(gray160) \
+    GENERATOR(gray192) \
+    GENERATOR(gray224)
 
-Uint8 Color::tan;
-Uint8 Color::chartreuse;
-Uint8 Color::cobaltGreen;
-Uint8 Color::emeraldGreen;
-Uint8 Color::forestGreen;
-Uint8 Color::darkOliveGreen;
-Uint8 Color::terreVerte;
+// Have to merge like this, cant use ##
+#define MERGE_CLASS(a) a::
+#define GEN_VAR(CNAME) Uint8 MERGE_CLASS(Color)CNAME;
 
-Uint8 Color::darkBlue;
-Uint8 Color::darkBrown;
-Uint8 Color::darkCyan;
-Uint8 Color::darkGray;
-Uint8 Color::darkGreen;
-Uint8 Color::darkMagenta;
-Uint8 Color::darkOrange;
-Uint8 Color::darkPink;
-Uint8 Color::darkRed;
-Uint8 Color::darkYellow;
+#define GEN_GETSTRUCT(CNAME) { #CNAME, GETSVTYPE_BYTE, &amp;MERGE_CLASS(Color)CNAME },
+#define GEN_SETSTRUCT(CNAME) { #CNAME, SETSVTYPE_BYTE, &amp;MERGE_CLASS(Color)CNAME },
 
-Uint8 Color::lightBlue;
-Uint8 Color::lightBrown;
-Uint8 Color::lightCyan;
-Uint8 Color::lightGray;
-Uint8 Color::lightGreen;
-Uint8 Color::lightMagenta;
-Uint8 Color::lightOrange;
-Uint8 Color::lightPink;
-Uint8 Color::lightRed;
-Uint8 Color::lightYellow;
+// This generate the Uint8 Color::colorname for all the colors
+// Must not have ';' at end
+GEN_COLORS(GEN_VAR)
 
-Uint8 Color::gray32;
-Uint8 Color::gray64;
-Uint8 Color::gray96;
-Uint8 Color::gray128;
-Uint8 Color::gray160;
-Uint8 Color::gray192;
-Uint8 Color::gray224;
+// This generates the tables needed for script binding
+const ScriptVarBindRecord Color::colorGetters[] =
+{
+    GEN_COLORS(GEN_GETSTRUCT)
+    {0,0}
+};
+        
+const ScriptVarBindRecord Color::colorSetters[] =
+{
+    GEN_COLORS(GEN_SETSTRUCT)
+    {0,0}
+};
+        

Modified: trunk/netpanzer/src/Lib/2D/Color.hpp
===================================================================
--- trunk/netpanzer/src/Lib/2D/Color.hpp	2008-10-06 16:15:32 UTC (rev 1075)
+++ trunk/netpanzer/src/Lib/2D/Color.hpp	2008-10-08 17:47:19 UTC (rev 1076)
@@ -19,11 +19,14 @@
 #define __Color_hpp__
 
 #include &quot;SDL.h&quot;
+#include &quot;Scripts/ScriptManager.hpp&quot;
 
 //---------------------------------------------------------------------------
 class Color
 {
 public:
+    static const ScriptVarBindRecord colorGetters[];
+    static const ScriptVarBindRecord colorSetters[];
     // Color for netPanzer players.
     static Uint8 unitAqua;
     static Uint8 unitYellow;

Modified: trunk/netpanzer/src/Lib/2D/Palette.cpp
===================================================================
--- trunk/netpanzer/src/Lib/2D/Palette.cpp	2008-10-06 16:15:32 UTC (rev 1075)
+++ trunk/netpanzer/src/Lib/2D/Palette.cpp	2008-10-08 17:47:19 UTC (rev 1076)
@@ -1,3 +1,9 @@
+
+#include &quot;Util/Log.hpp&quot;
+
+
+#include &quot;Scripts/ScriptManager.hpp&quot;
+
 /*
 Copyright (C) 1998 Pyrosoft Inc. (www.pyrosoftgames.com), Matthew Bogue
  
@@ -62,85 +68,39 @@
 {
 } // end Palette::Palette
 
-// setColors
-//---------------------------------------------------------------------------
-void Palette::setColors()
+int
+Palette::makeColor(lua_State *L)
 {
-    Color::unitAqua        = findNearestColor(  0, 204, 255);
-    Color::unitYellow      = findNearestColor(255, 255,   0);
-    Color::unitRed         = findNearestColor(255,   0,   0);
-    Color::unitBlue        = findNearestColor(  3,   3, 255);
-    Color::unitDarkBlue    = findNearestColor(  0,   0, 128);
-    Color::unitLightGreen  = findNearestColor(163, 214, 159);
-    Color::unitGreen       = findNearestColor( 31, 166,  36);
-    Color::unitBlueGray    = findNearestColor( 43,  85, 131);
-    Color::unitDarkRed     = findNearestColor(150,   0,   0);
-    Color::unitBlack       = findNearestColor(  6,   2,   2);
-    Color::unitDarkGreen   = findNearestColor( 26,  88,  36);
-    Color::unitWhite       = findNearestColor(250, 253, 248);
-    Color::unitLightOrange = findNearestColor(246, 210,  99);
-    Color::unitOrange      = findNearestColor(205, 144,   9);
-    Color::unitGray        = findNearestColor(186, 186, 186);
-    Color::unitDarkGray    = findNearestColor( 99, 100, 102);
-
-    // Grays
-    Color::black   = findNearestColor(  0,   0,   0, true);
-    Color::gray32  = findNearestColor( 32,  32,  32);
-    Color::gray64  = findNearestColor( 64,  64,  64);
-    Color::gray96  = findNearestColor( 96,  96,  96);
-    Color::gray128 = findNearestColor(128, 128, 128);
-    Color::gray160 = findNearestColor(160, 160, 160);
-    Color::gray192 = findNearestColor(192, 192, 192);
-    Color::gray224 = findNearestColor(224, 224, 224);
-    Color::white   = findNearestColor(255, 255, 255);
-
-    // Dark Colors !FIXME!
-    Color::darkGray    = Color::gray64;
-    Color::darkRed     = findNearestColor(128,   0,   0); // fixed
-    Color::darkGreen   = findNearestColor(  0, 128,   0); // fixed
-    Color::darkBlue    = findNearestColor(  0,   0, 128); // fixed
-    Color::darkYellow  = findNearestColor(255, 168,  18); // fixed
-    Color::darkOrange  = findNearestColor(255, 140,   0); // fixed
-    Color::darkMagenta = findNearestColor(148,   0, 211); // fixed
-    Color::darkCyan    = findNearestColor(  0, 206, 209); // fixed
-
-    // Normal Colors
-    Color::gray    = Color::gray128;
-    Color::red     = findNearestColor(255,   0,   0); // fixed
-    Color::green   = findNearestColor(  0, 255,   0); // fixed
-    Color::blue    = findNearestColor(  0,   0, 255); // fixed
-    Color::yellow  = findNearestColor(255, 255,   0); // fixed
-    Color::orange  = findNearestColor(255, 128,   0); // fixed
-    Color::magenta = findNearestColor(255,   0, 255); // fixed
-    Color::cyan    = findNearestColor(  0, 255, 255); // fixed
-    //Color::brown   = findNearestColor(128,  42,  42); // fixed
-    Color::brown   = findNearestColor(200,  80,  80); // new brown is lighter
+    int r = luaL_checkint(L,1); // r
+    int g = luaL_checkint(L,2); // g
+    int b = luaL_checkint(L,3); // b
     
-    //tan                   210 180 140   0.8235 0.7059 0.5490
-    Color::tan            = findNearestColor(210, 180, 140); // fixed
-    //chartreuse            127 255   0   0.4980 1.0000 0.0000
-    Color::chartreuse     = findNearestColor(127, 255,   0); // fixed
-    //cobalt_green           61 145  64   0.2400 0.5700 0.2500
-    Color::cobaltGreen    = findNearestColor( 61, 145,  64); // fixed
-    //emerald_green           0 201  87   0.0000 0.7900 0.3400
-    Color::emeraldGreen   = findNearestColor(  0, 201,  87); // fixed
-    //forest_green           34 139  34   0.1333 0.5451 0.1333
-    Color::forestGreen    = findNearestColor( 34, 139,  34); // fixed
-    //olive_green_dark       85 107  47   0.3333 0.4196 0.1843
-    Color::darkOliveGreen = findNearestColor( 85, 107,  47); // fixed
-    //terre_verte            56  94  15   0.2200 0.3700 0.0600
-    Color::terreVerte     = findNearestColor( 56,  94,  15); // fixed
+    int color = findNearestColor(r,g,b,true);
+    
+    lua_pushinteger(L, color);
+    return 1;
+}
 
-    // Normal Colors !FIXME!
-    Color::lightGray    = Color::gray192;
-    Color::lightRed     = findNearestColor(255, 160, 122); // fixed
-    Color::lightGreen   = findNearestColor( 50, 205,  50); // fixed
-    Color::lightBlue    = findNearestColor(135, 206, 250); // fixed
-    Color::lightYellow  = findNearestColor(255, 255, 224); // fixed
-    Color::lightOrange  = findNearestColor(237, 145,  33); // fixed
-    Color::lightMagenta = findNearestColor(  0, 255, 255);
-    Color::lightCyan    = findNearestColor(224, 255, 255); // fixed
+static const luaL_reg colorUtilLib[] =
+{
+    {&quot;makeColor&quot;,   Palette::makeColor},
+    {0,0}
+};
 
+void
+Palette::registerScript()
+{
+    ScriptManager::registerLib( &quot;ColorUtil&quot;, colorUtilLib);
+    ScriptManager::bindStaticVariables( &quot;Color&quot;, &quot;ColorMetaTable&quot;,
+                                       Color::colorGetters,
+                                       Color::colorSetters);
+}
+
+// setColors
+//---------------------------------------------------------------------------
+void Palette::setColors()
+{
+    ScriptManager::runFile(&quot;loadcolors&quot;,&quot;scripts/initcolors.lua&quot;);
 } // end Palette::setColors
 
 // setColorTables

Modified: trunk/netpanzer/src/Lib/2D/Palette.hpp
===================================================================
--- trunk/netpanzer/src/Lib/2D/Palette.hpp	2008-10-06 16:15:32 UTC (rev 1075)
+++ trunk/netpanzer/src/Lib/2D/Palette.hpp	2008-10-08 17:47:19 UTC (rev 1076)
@@ -23,6 +23,7 @@
 
 #include &quot;Color.hpp&quot;
 #include &quot;ColorTable.hpp&quot;
+#include &quot;Scripts/ScriptManager.hpp&quot;
 
 const size_t PALETTE_LENGTH = 256;
 
@@ -104,6 +105,8 @@
     }
     static void setColors();
     static void setColorTables();
+    static int makeColor(lua_State *L);
+    static void registerScript();
 
     static void setBrightnessAbsolute(float brightness);
 };

Modified: trunk/netpanzer/src/NetPanzer/Core/main.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Core/main.cpp	2008-10-06 16:15:32 UTC (rev 1075)
+++ trunk/netpanzer/src/NetPanzer/Core/main.cpp	2008-10-08 17:47:19 UTC (rev 1076)
@@ -17,6 +17,8 @@
 */
 #include &lt;config.h&gt;
 
+#include &quot;Scripts/ScriptManager.hpp&quot;
+
 #include &quot;lua/lua.hpp&quot;
 
 #ifdef WIN32
@@ -47,6 +49,8 @@
 #include &quot;Interfaces/BotGameManager.hpp&quot;
 #include &quot;Interfaces/PlayerGameManager.hpp&quot;
 #include &quot;Core/NetworkGlobals.hpp&quot;
+#include &quot;Scripts/ScriptManager.hpp&quot;
+#include &quot;2D/Palette.hpp&quot;
 
 //---------------------------------------------------------------------------
 
@@ -293,22 +297,15 @@
 //-----------------------------------------------------------------
 int netpanzer_main(int argc, char** argv)
 {
-    lua_State *L = lua_open();
-    if ( L ) {
-        luaL_openlibs(L);
-        char func[] = &quot;a=5;\nprint('Lua is working, and \&quot;a\&quot; is '..a);\n&quot;;
-        luaL_loadbuffer(L,func,strlen(func),&quot;test&quot;);
-        int error=lua_pcall(L,0,0,0);
-        if (error) {
-            printf(&quot;error is: %s&quot;,lua_tostring(L,-1));
-            lua_pop(L,1);
-        }
-    } else {
-        printf(&quot;Lua failed to start\n&quot;);
-    }
+    ScriptManager::initialize();
     
+    ScriptManager::runStr(&quot;LuaInitialize&quot;,&quot;print('Lua is working just fine');&quot;);
+        
     BaseGameManager *manager = initialise(argc, argv);
 
+    Palette::registerScript(); // here for the moment;
+    ScriptManager::runFile(&quot;unused&quot;,&quot;scripts/initialize.lua&quot;);
+    
     // we'll catch every exception here, to be sure the user gets at least
     // a usefull error message and SDL has a chance to shutdown...
     try {
@@ -339,7 +336,9 @@
     catch(const float dummy) {
     }
 #endif
-    lua_close(L);
+    
+    ScriptManager::close();
+    
     return 0;
 }
 

Modified: trunk/netpanzer/src/NetPanzer/Jamfile
===================================================================
--- trunk/netpanzer/src/NetPanzer/Jamfile	2008-10-06 16:15:32 UTC (rev 1075)
+++ trunk/netpanzer/src/NetPanzer/Jamfile	2008-10-08 17:47:19 UTC (rev 1076)
@@ -13,6 +13,7 @@
     Network
     Resources
     Structs
+    Scripts
     Interfaces
     Bot
     System

Added: trunk/netpanzer/src/NetPanzer/Scripts/ScriptHelper.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Scripts/ScriptHelper.cpp	2008-10-06 16:15:32 UTC (rev 1075)
+++ trunk/netpanzer/src/NetPanzer/Scripts/ScriptHelper.cpp	2008-10-08 17:47:19 UTC (rev 1076)
@@ -0,0 +1,115 @@
+/*
+Copyright (C) 2008 by Aaron Perez &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/netpanzer-cvs">aaronps at gmail.com</A>&gt;
+
+This program is free software; you can redistribute it and/or modify
+it under the terms of the GNU General Public License as published by
+the Free Software Foundation; either version 2 of the License, or
+(at your option) any later version.
+
+This program is distributed in the hope that it will be useful,
+but WITHOUT ANY WARRANTY; without even the implied warranty of
+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+GNU General Public License for more details.
+
+You should have received a copy of the GNU General Public License
+along with this program; if not, write to the Free Software
+Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+
+ * Created on October 8, 2008, 10:53 PM
+ */
+
+#include &quot;ScriptHelper.hpp&quot;
+#include &quot;Util/Log.hpp&quot;
+
+int
+ScriptHelper::get_byte (lua_State *L, void *v)
+{
+    lua_pushnumber(L, *(unsigned char*)v);
+    return 1;
+}
+
+int
+ScriptHelper::set_byte (lua_State *L, void *v)
+{
+    *(unsigned char*)v = luaL_checkint(L, 3);
+    return 0;
+}
+
+int
+ScriptHelper::get_int (lua_State *L, void *v)
+{
+    lua_pushnumber(L, *(int*)v);
+    return 1;
+}
+
+int
+ScriptHelper::set_int (lua_State *L, void *v)
+{
+    *(int*)v = luaL_checkint(L, 3);
+    return 0;
+}
+
+int
+ScriptHelper::get_number (lua_State *L, void *v)
+{
+    lua_pushnumber(L, *(lua_Number*)v);
+    return 1;
+}
+
+int
+ScriptHelper::set_number (lua_State *L, void *v)
+{
+    *(lua_Number*)v = luaL_checknumber(L, 3);
+    return 0;
+}
+
+int
+ScriptHelper::get_string (lua_State *L, void *v)
+{
+    lua_pushstring(L, (char*)v );
+    return 1;
+}
+    
+int
+ScriptHelper::staticVarCall(lua_State *L)
+{
+    /* for get: stack has userdata, index, lightuserdata */
+    /* for set: stack has userdata, index, value, lightuserdata */
+    ScriptVarBindRecord * m = (ScriptVarBindRecord *)lua_touserdata(L, -1);  /* member info */
+    lua_pop(L, 1);                               /* drop lightuserdata */
+    luaL_checktype(L, 1, LUA_TUSERDATA);
+    return m-&gt;func(L, (void *)(m-&gt;data));
+}
+
+int
+ScriptHelper::index_handler (lua_State *L)
+{
+    /* stack has userdata, index */
+    lua_pushvalue(L, 2);                     /* dup index */
+    lua_rawget(L, lua_upvalueindex(1));      /* lookup member by name */
+    if (!lua_islightuserdata(L, -1))
+    {
+        lua_pop(L, 1);                         /* drop value */
+        lua_pushvalue(L, 2);                   /* dup index */
+        lua_gettable(L, lua_upvalueindex(2));  /* else try methods */
+        if (lua_isnil(L, -1))                  /* invalid member */
+        {
+            luaL_error(L, &quot;cannot get member '%s'&quot;, lua_tostring(L, 2));
+        }
+        return 1;
+    }
+    return staticVarCall(L);                      /* call get function */
+}
+
+int
+ScriptHelper::newindex_handler (lua_State *L)
+{
+    /* stack has userdata, index, value */
+    lua_pushvalue(L, 2);                     /* dup index */
+    lua_rawget(L, lua_upvalueindex(1));      /* lookup member by name */
+    if (!lua_islightuserdata(L, -1))         /* invalid member */
+    {
+        luaL_error(L, &quot;cannot set member '%s'&quot;, lua_tostring(L, 2));
+    }
+    return staticVarCall(L);                      /* call set function */
+}

Added: trunk/netpanzer/src/NetPanzer/Scripts/ScriptHelper.hpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Scripts/ScriptHelper.hpp	2008-10-06 16:15:32 UTC (rev 1075)
+++ trunk/netpanzer/src/NetPanzer/Scripts/ScriptHelper.hpp	2008-10-08 17:47:19 UTC (rev 1076)
@@ -0,0 +1,68 @@
+/*
+Copyright (C) 2008 by Aaron Perez &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/netpanzer-cvs">aaronps at gmail.com</A>&gt;
+
+This program is free software; you can redistribute it and/or modify
+it under the terms of the GNU General Public License as published by
+the Free Software Foundation; either version 2 of the License, or
+(at your option) any later version.
+
+This program is distributed in the hope that it will be useful,
+but WITHOUT ANY WARRANTY; without even the implied warranty of
+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+GNU General Public License for more details.
+
+You should have received a copy of the GNU General Public License
+along with this program; if not, write to the Free Software
+Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+
+ * Created on October 8, 2008, 10:48 PM
+ */
+
+#ifndef _SCRIPTHELPER_HPP
+#define	_SCRIPTHELPER_HPP
+
+#include &quot;lua/lua.hpp&quot;
+
+#define GETSVTYPE_BYTE ScriptHelper::get_byte
+#define SETSVTYPE_BYTE ScriptHelper::set_byte
+#define GETSVTYPE_INT ScriptHelper::get_int
+#define SETSVTYPE_INT ScriptHelper::set_int
+#define GETSVTYPE_NUMBER ScriptHelper::get_number
+#define SETSVTYPE_NUMBER ScriptHelper::set_number
+#define GETSVTYPE_STRING ScriptHelper::get_string
+//#define SETSVTYPE_STRING ScriptHelper::set_string
+
+typedef int (*ScriptBindFunction) (lua_State *L, void *v);
+
+/* member info for get and set handlers */
+typedef const struct s_ScriptVarBindRecord
+{
+    const char *name;        /* var name */
+    ScriptBindFunction func; /* get or set function for type of data */
+    void * data;             /* pointer to your data */
+}  ScriptVarBindRecord;
+
+class ScriptHelper
+{
+public:
+    static int get_byte (lua_State *L, void *v);
+    static int set_byte (lua_State *L, void *v);
+
+    static int get_int (lua_State *L, void *v);
+    static int set_int (lua_State *L, void *v);
+
+    static int get_number (lua_State *L, void *v);
+    static int set_number (lua_State *L, void *v);
+
+    static int get_string (lua_State *L, void *v);
+    
+private:
+    friend class ScriptManager;
+    
+    static int staticVarCall(lua_State *L);
+    static int index_handler (lua_State *L);
+    static int newindex_handler (lua_State *L);
+};
+
+#endif	/* _SCRIPTHELPER_HPP */
+

Added: trunk/netpanzer/src/NetPanzer/Scripts/ScriptManager.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Scripts/ScriptManager.cpp	2008-10-06 16:15:32 UTC (rev 1075)
+++ trunk/netpanzer/src/NetPanzer/Scripts/ScriptManager.cpp	2008-10-08 17:47:19 UTC (rev 1076)
@@ -0,0 +1,119 @@
+/*
+Copyright (C) 2008 by Aaron Perez &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/netpanzer-cvs">aaronps at gmail.com</A>&gt;
+
+This program is free software; you can redistribute it and/or modify
+it under the terms of the GNU General Public License as published by
+the Free Software Foundation; either version 2 of the License, or
+(at your option) any later version.
+
+This program is distributed in the hope that it will be useful,
+but WITHOUT ANY WARRANTY; without even the implied warranty of
+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+GNU General Public License for more details.
+
+You should have received a copy of the GNU General Public License
+along with this program; if not, write to the Free Software
+Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+
+ * Created on October 9, 2008, 12:33 AM
+ */
+
+#include &lt;cstring&gt;
+#include &quot;ScriptManager.hpp&quot;
+#include &quot;Util/FileSystem.hpp&quot;
+
+lua_State * ScriptManager::luavm = 0;
+
+void
+ScriptManager::initialize()
+{
+    if ( ! luavm )
+    {
+        luavm = luaL_newstate();
+        if ( luavm )
+        {
+            luaL_openlibs(luavm);
+        }
+    }
+}
+    
+void
+ScriptManager::close()
+{
+    if ( luavm )
+    {
+        lua_close(luavm);
+    }
+    luavm = 0;
+}
+    
+void
+ScriptManager::registerLib(const char * libname, const luaL_reg * functions)
+{
+    luaL_openlib(luavm, libname, functions, 0);   
+}
+    
+void
+ScriptManager::bindStaticVariables(const char * objectName,
+                                   const char * metaName,
+                                   ScriptVarBindRecord * getters,
+                                   ScriptVarBindRecord * setters)
+{
+    luaL_newmetatable(luavm, metaName);
+    int metatable = lua_gettop(luavm);
+
+    lua_pushliteral(luavm, &quot;__index&quot;);
+    lua_pushvalue(luavm, metatable);  /* upvalue index 1 */
+    bindStaticVars(getters);     /* fill metatable with getters */
+    lua_pushcclosure(luavm, ScriptHelper::index_handler, 1);
+    lua_rawset(luavm, metatable);     /* metatable.__index = index_handler */
+
+    lua_pushliteral(luavm, &quot;__newindex&quot;);
+    lua_newtable(luavm);              /* table for members you can set */
+    bindStaticVars(setters);     /* fill with setters */
+    lua_pushcclosure(luavm, ScriptHelper::newindex_handler, 1);
+    lua_rawset(luavm, metatable);     /* metatable.__newindex = newindex_handler */
+
+    lua_pop(luavm, 1);                /* drop metatable */
+
+    // we don't save the address of new data
+    void * t = lua_newuserdata(luavm,sizeof(void*));
+    luaL_getmetatable(luavm, metaName);
+    lua_setmetatable(luavm,-2);
+    lua_setglobal(luavm,objectName);
+}
+    
+void
+ScriptManager::runStr(const char * runname, const char * str)
+{
+    luaL_loadbuffer(luavm,str,strlen(str), runname);
+    int error=lua_pcall(luavm,0,0,0);
+    if (error)
+    {
+        printf(&quot;error is: %s\n&quot;,lua_tostring(luavm,-1));
+        lua_pop(luavm,1);
+    }
+}
+
+void
+ScriptManager::runFile(const char * runname, const char * filename)
+{
+    luaL_loadfile(luavm, filesystem::getRealName(filename).c_str());
+    int error=lua_pcall(luavm,0,0,0);
+    if (error)
+    {
+        printf(&quot;error is: %s\n&quot;,lua_tostring(luavm,-1));
+        lua_pop(luavm,1);
+    }
+}
+    
+void
+ScriptManager::bindStaticVars (ScriptVarBindRecord * recordlist)
+{
+    for (; recordlist-&gt;name; recordlist++)
+    {
+        lua_pushstring(luavm, recordlist-&gt;name);
+        lua_pushlightuserdata(luavm, (void*)recordlist);
+        lua_settable(luavm, -3);
+    }
+}

Added: trunk/netpanzer/src/NetPanzer/Scripts/ScriptManager.hpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Scripts/ScriptManager.hpp	2008-10-06 16:15:32 UTC (rev 1075)
+++ trunk/netpanzer/src/NetPanzer/Scripts/ScriptManager.hpp	2008-10-08 17:47:19 UTC (rev 1076)
@@ -0,0 +1,51 @@
+/*
+Copyright (C) 2008 by Aaron Perez &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/netpanzer-cvs">aaronps at gmail.com</A>&gt;
+
+This program is free software; you can redistribute it and/or modify
+it under the terms of the GNU General Public License as published by
+the Free Software Foundation; either version 2 of the License, or
+(at your option) any later version.
+
+This program is distributed in the hope that it will be useful,
+but WITHOUT ANY WARRANTY; without even the implied warranty of
+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+GNU General Public License for more details.
+
+You should have received a copy of the GNU General Public License
+along with this program; if not, write to the Free Software
+Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+
+ * Created on October 9, 2008, 12:33 AM
+ */
+
+#ifndef _SCRIPTMANAGER_HPP
+#define	_SCRIPTMANAGER_HPP
+
+#include &quot;ScriptHelper.hpp&quot;
+
+class ScriptManager
+{
+public:
+    static void initialize();
+    static void close();
+    
+    static void registerLib(const char * libname, const luaL_reg * functions);
+    
+    static void bindStaticVariables(const char * objectName,
+                                    const char * metaName,
+                                    ScriptVarBindRecord * getters,
+                                    ScriptVarBindRecord * setters);
+    
+    static void runStr(const char * runname, const char * str);
+    
+    // NOTE: runFile has to run after FileSystem has been initialized.
+    static void runFile(const char * runname, const char * filename);
+    
+private:
+    static void bindStaticVars (ScriptVarBindRecord * recordlist);
+        
+    static lua_State *luavm;
+};
+
+#endif	/* _SCRIPTMANAGER_HPP */
+


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000110.html">[Netpanzer-cvs] r1075 - trunk/netpanzer/maps
</A></li>
	<LI>Next message: <A HREF="000112.html">[Netpanzer-cvs] r1077 - in trunk/netpanzer: . scripts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#111">[ date ]</a>
              <a href="thread.html#111">[ thread ]</a>
              <a href="subject.html#111">[ subject ]</a>
              <a href="author.html#111">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/netpanzer-cvs">More information about the Netpanzer-cvs
mailing list</a><br>
</body></html>
