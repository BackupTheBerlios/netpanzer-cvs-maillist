<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Netpanzer-cvs] r1234 - in trunk/netpanzer:	pics/backgrounds/menus/menu pics/cursors pics/flags scripts	src/Lib/Network src/NetPanzer/Classes/AI	src/NetPanzer/Interfaces src/NetPanzer/Scripts	src/NetPanzer/Views src/NetPanzer/Views/Game	src/NetPanzer/Views/MainMenu src/NetPanzer/Views/MainMenu/Multi	src/NetPanzer/Views/MainMenu/Options
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/netpanzer-cvs/2011-September/index.html" >
   <LINK REL="made" HREF="mailto:netpanzer-cvs%40lists.berlios.de?Subject=Re%3A%20%5BNetpanzer-cvs%5D%20r1234%20-%20in%20trunk/netpanzer%3A%0A%09pics/backgrounds/menus/menu%20pics/cursors%20pics/flags%20scripts%0A%09src/Lib/Network%20src/NetPanzer/Classes/AI%0A%09src/NetPanzer/Interfaces%20src/NetPanzer/Scripts%0A%09src/NetPanzer/Views%20src/NetPanzer/Views/Game%0A%09src/NetPanzer/Views/MainMenu%20src/NetPanzer/Views/MainMenu/Multi%0A%09src/NetPanzer/Views/MainMenu/Options&In-Reply-To=%3C20110915101010.42C5D48135A%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000259.html">
   <LINK REL="Next"  HREF="000261.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Netpanzer-cvs] r1234 - in trunk/netpanzer:	pics/backgrounds/menus/menu pics/cursors pics/flags scripts	src/Lib/Network src/NetPanzer/Classes/AI	src/NetPanzer/Interfaces src/NetPanzer/Scripts	src/NetPanzer/Views src/NetPanzer/Views/Game	src/NetPanzer/Views/MainMenu src/NetPanzer/Views/MainMenu/Multi	src/NetPanzer/Views/MainMenu/Options</H1>
    <B>kromxp at mail.berlios.de</B> 
    <A HREF="mailto:netpanzer-cvs%40lists.berlios.de?Subject=Re%3A%20%5BNetpanzer-cvs%5D%20r1234%20-%20in%20trunk/netpanzer%3A%0A%09pics/backgrounds/menus/menu%20pics/cursors%20pics/flags%20scripts%0A%09src/Lib/Network%20src/NetPanzer/Classes/AI%0A%09src/NetPanzer/Interfaces%20src/NetPanzer/Scripts%0A%09src/NetPanzer/Views%20src/NetPanzer/Views/Game%0A%09src/NetPanzer/Views/MainMenu%20src/NetPanzer/Views/MainMenu/Multi%0A%09src/NetPanzer/Views/MainMenu/Options&In-Reply-To=%3C20110915101010.42C5D48135A%40sheep.berlios.de%3E"
       TITLE="[Netpanzer-cvs] r1234 - in trunk/netpanzer:	pics/backgrounds/menus/menu pics/cursors pics/flags scripts	src/Lib/Network src/NetPanzer/Classes/AI	src/NetPanzer/Interfaces src/NetPanzer/Scripts	src/NetPanzer/Views src/NetPanzer/Views/Game	src/NetPanzer/Views/MainMenu src/NetPanzer/Views/MainMenu/Multi	src/NetPanzer/Views/MainMenu/Options">kromxp at mail.berlios.de
       </A><BR>
    <I>Thu Sep 15 12:10:10 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="000259.html">[Netpanzer-cvs] r1233 - in trunk/netpanzer: scripts src/Lib/Util	src/NetPanzer/Classes src/NetPanzer/Classes/Network	src/NetPanzer/Interfaces src/NetPanzer/Scripts
</A></li>
        <LI>Next message: <A HREF="000261.html">[Netpanzer-cvs] r1235 - in trunk/netpanzer: . pics/flags	src/Lib/physfs src/Lib/physfs/archivers	src/Lib/physfs/platform src/NetPanzer/Classes/Network	src/NetPanzer/Interfaces src/NetPanzer/Particles	src/NetPanzer/PowerUps src/NetPanzer/Views/Game	src/NetPanzer/Views/MainMenu/Multi support/icon
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#260">[ date ]</a>
              <a href="thread.html#260">[ thread ]</a>
              <a href="subject.html#260">[ subject ]</a>
              <a href="author.html#260">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: kromxp
Date: 2011-09-15 12:10:09 +0200 (Thu, 15 Sep 2011)
New Revision: 1234

Added:
   trunk/netpanzer/pics/cursors/grey-target.bmp
Removed:
   trunk/netpanzer/pics/backgrounds/menus/menu/connectionMB.bmp
   trunk/netpanzer/pics/backgrounds/menus/menu/hostjoinMB.bmp
   trunk/netpanzer/pics/backgrounds/menus/menu/optionsMB.bmp
   trunk/netpanzer/pics/backgrounds/menus/menu/sessionMB.bmp
   trunk/netpanzer/pics/flags/image1.bmp
   trunk/netpanzer/pics/flags/jap.bmp
Modified:
   trunk/netpanzer/pics/backgrounds/menus/menu/defaultMB.bmp
   trunk/netpanzer/pics/backgrounds/menus/menu/loadingMB.bmp
   trunk/netpanzer/pics/flags/albania.bmp
   trunk/netpanzer/pics/flags/angola.bmp
   trunk/netpanzer/pics/flags/argentinia.bmp
   trunk/netpanzer/pics/flags/armenia.bmp
   trunk/netpanzer/pics/flags/australia.bmp
   trunk/netpanzer/pics/flags/austria.bmp
   trunk/netpanzer/pics/flags/belgium.bmp
   trunk/netpanzer/pics/flags/bosnia-herzigovina.bmp
   trunk/netpanzer/pics/flags/brazil.bmp
   trunk/netpanzer/pics/flags/bulgaria.bmp
   trunk/netpanzer/pics/flags/canada.bmp
   trunk/netpanzer/pics/flags/chile.bmp
   trunk/netpanzer/pics/flags/china.bmp
   trunk/netpanzer/pics/flags/colombia.bmp
   trunk/netpanzer/pics/flags/czech-republic.bmp
   trunk/netpanzer/pics/flags/denmark.bmp
   trunk/netpanzer/pics/flags/finland.bmp
   trunk/netpanzer/pics/flags/france.bmp
   trunk/netpanzer/pics/flags/germany.bmp
   trunk/netpanzer/pics/flags/greece.bmp
   trunk/netpanzer/pics/flags/hungary.bmp
   trunk/netpanzer/pics/flags/iran.bmp
   trunk/netpanzer/pics/flags/jordan.bmp
   trunk/netpanzer/pics/flags/korea-north.bmp
   trunk/netpanzer/pics/flags/korea-south.bmp
   trunk/netpanzer/pics/flags/libya.bmp
   trunk/netpanzer/pics/flags/mexico.bmp
   trunk/netpanzer/pics/flags/netherlands.bmp
   trunk/netpanzer/pics/flags/new-zealand.bmp
   trunk/netpanzer/pics/flags/poland.bmp
   trunk/netpanzer/pics/flags/russia.bmp
   trunk/netpanzer/pics/flags/saudi-arabia.bmp
   trunk/netpanzer/pics/flags/slovakia.bmp
   trunk/netpanzer/pics/flags/spain.bmp
   trunk/netpanzer/pics/flags/sweden.bmp
   trunk/netpanzer/pics/flags/switzerland.bmp
   trunk/netpanzer/pics/flags/taiwan.bmp
   trunk/netpanzer/pics/flags/turkey.bmp
   trunk/netpanzer/pics/flags/ukraine.bmp
   trunk/netpanzer/pics/flags/uruguay.bmp
   trunk/netpanzer/pics/flags/usa.bmp
   trunk/netpanzer/pics/flags/venezuela.bmp
   trunk/netpanzer/scripts/servercommands.lua
   trunk/netpanzer/src/Lib/Network/SocketBase.cpp
   trunk/netpanzer/src/NetPanzer/Classes/AI/Astar.cpp
   trunk/netpanzer/src/NetPanzer/Interfaces/GameConfig.cpp
   trunk/netpanzer/src/NetPanzer/Interfaces/GameConfig.hpp
   trunk/netpanzer/src/NetPanzer/Interfaces/GameManager.cpp
   trunk/netpanzer/src/NetPanzer/Interfaces/PlayerGameManager.cpp
   trunk/netpanzer/src/NetPanzer/Scripts/NetPanzerModule.cpp
   trunk/netpanzer/src/NetPanzer/Views/Game/GameView.cpp
   trunk/netpanzer/src/NetPanzer/Views/Game/HelpScrollView.cpp
   trunk/netpanzer/src/NetPanzer/Views/Game/HelpScrollView.hpp
   trunk/netpanzer/src/NetPanzer/Views/Game/LoadingView.cpp
   trunk/netpanzer/src/NetPanzer/Views/GameViewGlobals.cpp
   trunk/netpanzer/src/NetPanzer/Views/MainMenu/MainMenuView.cpp
   trunk/netpanzer/src/NetPanzer/Views/MainMenu/MenuTemplateView.cpp
   trunk/netpanzer/src/NetPanzer/Views/MainMenu/Multi/FlagSelectionView.cpp
   trunk/netpanzer/src/NetPanzer/Views/MainMenu/Multi/GetSessionView.cpp
   trunk/netpanzer/src/NetPanzer/Views/MainMenu/Multi/HostJoinTemplateView.cpp
   trunk/netpanzer/src/NetPanzer/Views/MainMenu/Multi/HostOptionsView.cpp
   trunk/netpanzer/src/NetPanzer/Views/MainMenu/Multi/IPAddressView.cpp
   trunk/netpanzer/src/NetPanzer/Views/MainMenu/Multi/MapSelectionView.cpp
   trunk/netpanzer/src/NetPanzer/Views/MainMenu/Multi/PlayerNameView.cpp
   trunk/netpanzer/src/NetPanzer/Views/MainMenu/Multi/ServerListView.cpp
   trunk/netpanzer/src/NetPanzer/Views/MainMenu/Options/VisualsView.cpp
   trunk/netpanzer/src/NetPanzer/Views/MainMenu/OptionsTemplateView.cpp
Log:
- Merged wile64 change of resolution to 800x600
- Merged wile64 change of help messages
- Merged wile64 early exit patch for path finding.
- Merged wile64 flags, new grey mouse and new backgrounds, also deleted unused backgrounds.


Deleted: trunk/netpanzer/pics/backgrounds/menus/menu/connectionMB.bmp
===================================================================
(Binary files differ)

Modified: trunk/netpanzer/pics/backgrounds/menus/menu/defaultMB.bmp
===================================================================
(Binary files differ)

Deleted: trunk/netpanzer/pics/backgrounds/menus/menu/hostjoinMB.bmp
===================================================================
(Binary files differ)

Modified: trunk/netpanzer/pics/backgrounds/menus/menu/loadingMB.bmp
===================================================================
(Binary files differ)

Deleted: trunk/netpanzer/pics/backgrounds/menus/menu/optionsMB.bmp
===================================================================
(Binary files differ)

Deleted: trunk/netpanzer/pics/backgrounds/menus/menu/sessionMB.bmp
===================================================================
(Binary files differ)

Added: trunk/netpanzer/pics/cursors/grey-target.bmp
===================================================================
(Binary files differ)


Property changes on: trunk/netpanzer/pics/cursors/grey-target.bmp
___________________________________________________________________
Added: svn:mime-type
   + application/octet-stream

Modified: trunk/netpanzer/pics/flags/albania.bmp
===================================================================
(Binary files differ)

Modified: trunk/netpanzer/pics/flags/angola.bmp
===================================================================
(Binary files differ)

Modified: trunk/netpanzer/pics/flags/argentinia.bmp
===================================================================
(Binary files differ)

Modified: trunk/netpanzer/pics/flags/armenia.bmp
===================================================================
(Binary files differ)

Modified: trunk/netpanzer/pics/flags/australia.bmp
===================================================================
(Binary files differ)

Modified: trunk/netpanzer/pics/flags/austria.bmp
===================================================================
(Binary files differ)

Modified: trunk/netpanzer/pics/flags/belgium.bmp
===================================================================
(Binary files differ)

Modified: trunk/netpanzer/pics/flags/bosnia-herzigovina.bmp
===================================================================
(Binary files differ)

Modified: trunk/netpanzer/pics/flags/brazil.bmp
===================================================================
(Binary files differ)

Modified: trunk/netpanzer/pics/flags/bulgaria.bmp
===================================================================
(Binary files differ)

Modified: trunk/netpanzer/pics/flags/canada.bmp
===================================================================
(Binary files differ)

Modified: trunk/netpanzer/pics/flags/chile.bmp
===================================================================
(Binary files differ)

Modified: trunk/netpanzer/pics/flags/china.bmp
===================================================================
(Binary files differ)

Modified: trunk/netpanzer/pics/flags/colombia.bmp
===================================================================
(Binary files differ)

Modified: trunk/netpanzer/pics/flags/czech-republic.bmp
===================================================================
(Binary files differ)

Modified: trunk/netpanzer/pics/flags/denmark.bmp
===================================================================
(Binary files differ)

Modified: trunk/netpanzer/pics/flags/finland.bmp
===================================================================
(Binary files differ)

Modified: trunk/netpanzer/pics/flags/france.bmp
===================================================================
(Binary files differ)

Modified: trunk/netpanzer/pics/flags/germany.bmp
===================================================================
(Binary files differ)

Modified: trunk/netpanzer/pics/flags/greece.bmp
===================================================================
(Binary files differ)

Modified: trunk/netpanzer/pics/flags/hungary.bmp
===================================================================
(Binary files differ)

Deleted: trunk/netpanzer/pics/flags/image1.bmp
===================================================================
(Binary files differ)

Modified: trunk/netpanzer/pics/flags/iran.bmp
===================================================================
(Binary files differ)

Deleted: trunk/netpanzer/pics/flags/jap.bmp
===================================================================
(Binary files differ)

Modified: trunk/netpanzer/pics/flags/jordan.bmp
===================================================================
(Binary files differ)

Modified: trunk/netpanzer/pics/flags/korea-north.bmp
===================================================================
(Binary files differ)

Modified: trunk/netpanzer/pics/flags/korea-south.bmp
===================================================================
(Binary files differ)

Modified: trunk/netpanzer/pics/flags/libya.bmp
===================================================================
(Binary files differ)

Modified: trunk/netpanzer/pics/flags/mexico.bmp
===================================================================
(Binary files differ)

Modified: trunk/netpanzer/pics/flags/netherlands.bmp
===================================================================
(Binary files differ)

Modified: trunk/netpanzer/pics/flags/new-zealand.bmp
===================================================================
(Binary files differ)

Modified: trunk/netpanzer/pics/flags/poland.bmp
===================================================================
(Binary files differ)

Modified: trunk/netpanzer/pics/flags/russia.bmp
===================================================================
(Binary files differ)

Modified: trunk/netpanzer/pics/flags/saudi-arabia.bmp
===================================================================
(Binary files differ)

Modified: trunk/netpanzer/pics/flags/slovakia.bmp
===================================================================
(Binary files differ)

Modified: trunk/netpanzer/pics/flags/spain.bmp
===================================================================
(Binary files differ)

Modified: trunk/netpanzer/pics/flags/sweden.bmp
===================================================================
(Binary files differ)

Modified: trunk/netpanzer/pics/flags/switzerland.bmp
===================================================================
(Binary files differ)

Modified: trunk/netpanzer/pics/flags/taiwan.bmp
===================================================================
(Binary files differ)

Modified: trunk/netpanzer/pics/flags/turkey.bmp
===================================================================
(Binary files differ)

Modified: trunk/netpanzer/pics/flags/ukraine.bmp
===================================================================
(Binary files differ)

Modified: trunk/netpanzer/pics/flags/uruguay.bmp
===================================================================
(Binary files differ)

Modified: trunk/netpanzer/pics/flags/usa.bmp
===================================================================
(Binary files differ)

Modified: trunk/netpanzer/pics/flags/venezuela.bmp
===================================================================
(Binary files differ)

Modified: trunk/netpanzer/scripts/servercommands.lua
===================================================================
--- trunk/netpanzer/scripts/servercommands.lua	2011-09-13 17:31:41 UTC (rev 1233)
+++ trunk/netpanzer/scripts/servercommands.lua	2011-09-15 10:10:09 UTC (rev 1234)
@@ -73,24 +73,13 @@
         netpanzer.serversayto(player, out);
     end,
 
-    testrules = function(param)
-        test_game_rules();
-    end,
-
     autokick_help = &quot;sets the idle time for kicking a player automatically&quot;,
     autokick = function(param, player)
         if ( param == &quot;&quot; ) then
-            netpanzer.serversayto( player, &quot;autokick time is &quot; .. netpanzer.config.game.autokicktime);
+            netpanzer.serversayto( player, &quot;autokick time is &quot; .. config.game.autokicktime);
         else
-            netpanzer.config.game.autokicktime = param;
-            netpanzer.serversayto( player, &quot;autokick time was set to &quot; .. netpanzer.config.game.autokicktime);
+            config.game.autokicktime = param;
+            netpanzer.serversayto( player, &quot;autokick time was set to &quot; .. config.game.autokicktime);
         end
     end
 };
-
--- modes: 0=objective, 1=frag limit, 2=time limit
-function test_game_rules()
-    if gameconfig.gametype == 2 then
-        ConsoleInterface:post( Color.cyan, false, 0, &quot;Game is time limit&quot;);
-    end
-end

Modified: trunk/netpanzer/src/Lib/Network/SocketBase.cpp
===================================================================
--- trunk/netpanzer/src/Lib/Network/SocketBase.cpp	2011-09-13 17:31:41 UTC (rev 1233)
+++ trunk/netpanzer/src/Lib/Network/SocketBase.cpp	2011-09-15 10:10:09 UTC (rev 1234)
@@ -126,7 +126,7 @@
         msg &lt;&lt; &quot;Couldn't bind socket to address '&quot;
             &lt;&lt; toaddr.getIP() &lt;&lt; &quot;' port &quot; &lt;&lt; toaddr.getPort()
             &lt;&lt; &quot;: &quot; &lt;&lt; NETSTRERROR(lastError);
-        throw NetworkException(msg.str());           
+        throw NetworkException(msg.str());
     }
 }
 

Modified: trunk/netpanzer/src/NetPanzer/Classes/AI/Astar.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Classes/AI/Astar.cpp	2011-09-13 17:31:41 UTC (rev 1233)
+++ trunk/netpanzer/src/NetPanzer/Classes/AI/Astar.cpp	2011-09-15 10:10:09 UTC (rev 1234)
@@ -283,6 +283,7 @@
 
         if ( (best_node-&gt;map_loc == goal_node.map_loc) ) {
             done = true;
+            break; // early exit
         } else {
             for ( succ_loop = 0; succ_loop &lt; 8; succ_loop++ ) {
                 unsigned char movement_value;
@@ -306,6 +307,7 @@
                             if ( node == 0 ) {
                                 done = true;
                                 goal_reachable = false;
+                                break; // early exit
                             } else {
                                 *node = temp_node;
                                 node-&gt;parent = best_node;

Modified: trunk/netpanzer/src/NetPanzer/Interfaces/GameConfig.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Interfaces/GameConfig.cpp	2011-09-13 17:31:41 UTC (rev 1233)
+++ trunk/netpanzer/src/NetPanzer/Interfaces/GameConfig.cpp	2011-09-15 10:10:09 UTC (rev 1234)
@@ -179,7 +179,6 @@
       effectsvolume(&quot;effectsvolume&quot;, 100, 0, 100),
       
       unitcolor(&quot;unitcolor&quot;, 0, 0, _color_last-1),
-      playerflag(&quot;playerflag&quot;, 0, 0, 100),
       attacknotificationtime(&quot;attacknotificationtime&quot;, 5, 0, 100),
       vehicleselectioncolor(&quot;vehicleselectioncolor&quot;, _color_blue, 0, _color_last-1),
       unitselectionmode(&quot;unitselectionmode&quot;, _unit_selection_box_draw_mode_rect_edges, 0, _unit_selection_box_draw_mode_last-1),
@@ -256,7 +255,6 @@
     soundsettings.push_back(&amp;effectsvolume);
 
     interfacesettings.push_back(&amp;unitcolor);
-    interfacesettings.push_back(&amp;playerflag);
     interfacesettings.push_back(&amp;attacknotificationtime);
     interfacesettings.push_back(&amp;vehicleselectioncolor);
     interfacesettings.push_back(&amp;unitselectionmode);

Modified: trunk/netpanzer/src/NetPanzer/Interfaces/GameConfig.hpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Interfaces/GameConfig.hpp	2011-09-13 17:31:41 UTC (rev 1233)
+++ trunk/netpanzer/src/NetPanzer/Interfaces/GameConfig.hpp	2011-09-15 10:10:09 UTC (rev 1234)
@@ -173,7 +173,6 @@
    
     // interface settings
     ConfigInt   unitcolor;
-    ConfigInt   playerflag;
     ConfigInt   attacknotificationtime;
     ConfigInt   vehicleselectioncolor;
     ConfigInt   unitselectionmode;

Modified: trunk/netpanzer/src/NetPanzer/Interfaces/GameManager.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Interfaces/GameManager.cpp	2011-09-13 17:31:41 UTC (rev 1233)
+++ trunk/netpanzer/src/NetPanzer/Interfaces/GameManager.cpp	2011-09-15 10:10:09 UTC (rev 1234)
@@ -165,14 +165,14 @@
         flags |= SDL_RESIZABLE;
     }
 
-    if ( GameConfig::video_width &lt; 640 )
+    if ( GameConfig::video_width &lt; 800 )
     {
-        GameConfig::video_width = 640;
+        GameConfig::video_width = 800;
     }
 
-    if ( GameConfig::video_height &lt; 480 )
+    if ( GameConfig::video_height &lt; 600 )
     {
-        GameConfig::video_height = 480;
+        GameConfig::video_height = 600;
     }
 
     mode_res.x = GameConfig::video_width;

Modified: trunk/netpanzer/src/NetPanzer/Interfaces/PlayerGameManager.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Interfaces/PlayerGameManager.cpp	2011-09-13 17:31:41 UTC (rev 1233)
+++ trunk/netpanzer/src/NetPanzer/Interfaces/PlayerGameManager.cpp	2011-09-15 10:10:09 UTC (rev 1234)
@@ -212,7 +212,7 @@
     Desktop::setVisibilityAllWindows(false);
     Desktop::setVisibility(&quot;MainView&quot;, true);
 
-    Desktop::checkResolution(iXY(640,480), iXY(screen-&gt;getWidth(),screen-&gt;getHeight()));
+    Desktop::checkResolution(iXY(800,600), iXY(screen-&gt;getWidth(),screen-&gt;getHeight()));
     Desktop::checkViewPositions(iXY(screen-&gt;getWidth(),screen-&gt;getHeight()));
 
 
@@ -376,8 +376,6 @@
     player_state = PlayerInterface::allocateLoopBackPlayer();
     const char* playername = gameconfig-&gt;playername.c_str();
     player_state-&gt;setName(playername);
-    // XXX FLAG
-    //player_state-&gt;setFlag((unsigned char) gameconfig-&gt;playerflag);
     
     //GameManager::spawnPlayer( PlayerInterface::getLocalPlayerIndex() );
     

Modified: trunk/netpanzer/src/NetPanzer/Scripts/NetPanzerModule.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Scripts/NetPanzerModule.cpp	2011-09-13 17:31:41 UTC (rev 1233)
+++ trunk/netpanzer/src/NetPanzer/Scripts/NetPanzerModule.cpp	2011-09-15 10:10:09 UTC (rev 1234)
@@ -83,9 +83,9 @@
 int npmodule_load (lua_State *L)
 {
   luaL_register(L, &quot;netpanzer&quot;, npmodule);
-  lua_pushliteral(L, &quot;config&quot;); // +1
-  lua_getglobal(L, &quot;config&quot;); // +1
-  lua_settable(L, -3); // -2
+//  lua_pushliteral(L, &quot;config&quot;); // +1
+//  lua_getglobal(L, &quot;config&quot;); // +1
+//  lua_settable(L, -3); // -2
 
 
   return 1;

Modified: trunk/netpanzer/src/NetPanzer/Views/Game/GameView.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Views/Game/GameView.cpp	2011-09-13 17:31:41 UTC (rev 1233)
+++ trunk/netpanzer/src/NetPanzer/Views/Game/GameView.cpp	2011-09-15 10:10:09 UTC (rev 1234)
@@ -64,7 +64,7 @@
     setDisplayStatusBar(false);
     setVisible(false);
 
-    resize(640,480);
+    resize(800,600);
     moveTo(iXY(0, 0));
 
     add(new InfoBar(0,0));

Modified: trunk/netpanzer/src/NetPanzer/Views/Game/HelpScrollView.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Views/Game/HelpScrollView.cpp	2011-09-13 17:31:41 UTC (rev 1233)
+++ trunk/netpanzer/src/NetPanzer/Views/Game/HelpScrollView.cpp	2011-09-15 10:10:09 UTC (rev 1234)
@@ -81,12 +81,16 @@
     insert(&quot;&quot;);
     insert(&quot;  Enter                            Send message to all&quot;);
     insert(&quot;  Ctrl + 'A'                       Send message to allies&quot;);
+    insert(&quot;  Ctrl + 'C'                       Send count down message&quot;);
     insert(&quot;&quot;);
     insert(&quot;&quot;);
     insert(&quot;View Related&quot;);
     insert(&quot;&quot;);
     insert(&quot;  F1                               Help View&quot;);
+    insert(&quot;  'D'                              Damage View&quot;);
+    insert(&quot;  'F'                              Flag View&quot;);
     insert(&quot;  'M'                              Mini Map View&quot;);
+    insert(&quot;  'N'                              Name View&quot;);
     insert(&quot;  TAB                              Rank View&quot;);
     insert(&quot;  RMH + mouse movement             Moves any view on the screen&quot;);
     insert(&quot;  RMH + [1 - 5]                    Sets the background drawing mode&quot;);
@@ -102,7 +106,7 @@
     insert(&quot;System Related&quot;);
     insert(&quot;&quot;);
     insert(&quot;  ALT + Enter                      Toggle Fullscreen/Windowed mode&quot;);
-    //insert(&quot;  F9                               BMP screen shot&quot;);
+    insert(&quot;  F9                               BMP screen shot&quot;);
     //insert(&quot;  Alt + '-'                        Decrease brightness&quot;);
     //insert(&quot;  Alt + '='                        Increase brightness&quot;);
 

Modified: trunk/netpanzer/src/NetPanzer/Views/Game/HelpScrollView.hpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Views/Game/HelpScrollView.hpp	2011-09-13 17:31:41 UTC (rev 1233)
+++ trunk/netpanzer/src/NetPanzer/Views/Game/HelpScrollView.hpp	2011-09-15 10:10:09 UTC (rev 1234)
@@ -37,6 +37,8 @@
     int  maxYOffset;
     void drawHelpText(Surface &amp;dest, const int &amp;x, const int &amp;y);
 
+    void drawBorder(Surface &amp;windowArea)
+    {}
     ScrollBar *scrollBar;
     std::vector&lt;std::string&gt; text;
 

Modified: trunk/netpanzer/src/NetPanzer/Views/Game/LoadingView.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Views/Game/LoadingView.cpp	2011-09-13 17:31:41 UTC (rev 1233)
+++ trunk/netpanzer/src/NetPanzer/Views/Game/LoadingView.cpp	2011-09-15 10:10:09 UTC (rev 1234)
@@ -44,10 +44,10 @@
     setVisible(false);
     setBordered(false);
 
-    resize(640, 480);
-    
-    addButtonCenterText(iXY(628 - 60, 302 - 15), 60, &quot;Abort&quot;, &quot;Cancel the joining of this game.&quot;, bAbort);
-    
+    resize(800, 600);
+
+    addButtonCenterText(iXY(340, 15), 100, &quot;Abort&quot;, &quot;Cancel the joining of this game.&quot;, bAbort);
+
 }
 
 
@@ -64,9 +64,9 @@
     
     screen-&gt;fill(Color::black);
     backgroundSurface.blt(clientArea, 0, 0);
-    surface.blt(clientArea, 179, 153);
-    
-    View::doDraw(viewArea, clientArea);    
+    surface.blt(clientArea, 172, 45);
+
+    View::doDraw(viewArea, clientArea);
 }
 
 void
@@ -92,7 +92,7 @@
 LoadingView::doActivate()
 {
     backgroundSurface.loadBMP(&quot;pics/backgrounds/menus/menu/loadingMB.bmp&quot;);
-    surface.create(628 - 179, 302 - 153, 1);
+    surface.create(455, 175, 1);
     dirty=true;
 }
 

Modified: trunk/netpanzer/src/NetPanzer/Views/GameViewGlobals.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Views/GameViewGlobals.cpp	2011-09-13 17:31:41 UTC (rev 1233)
+++ trunk/netpanzer/src/NetPanzer/Views/GameViewGlobals.cpp	2011-09-15 10:10:09 UTC (rev 1234)
@@ -21,20 +21,20 @@
 #include &quot;Views/GameViewGlobals.hpp&quot;
 #include &quot;Interfaces/GameConfig.hpp&quot;
 
-iXY exitPos(6, 454);
+iXY exitPos(635, 10);
 iXY readyPos(480, 32);
-iXY backPos(347, 454);
-iXY nextPos(493, 454);
+iXY backPos(480, 575);
+iXY nextPos(635, 575);
 iXY mainPos(16, 7);
-iXY multiPos(169, 7);
-iXY optionsPos(325, 7);
-iXY helpPos(480, 7);
+iXY multiPos(16, 27);
+iXY optionsPos(16, 47);
+iXY helpPos(16, 67);
 iXY creditsPos(0, 0);
 
-const iXY sub1(16, 32);
-const iXY sub2(169, 32);
-const iXY sub3(325, 32);
-const iXY sub4(480, 32);
+const iXY sub1(169, 7);
+const iXY sub2(169, 27);
+const iXY sub3(169, 47);
+const iXY sub4(169, 67);
 
 #if 0 // XXX
 iXY soundPos = sub1;
@@ -53,7 +53,7 @@
 iXY returnToGamePos = mainPos;
 iXY resignPos = multiPos;
 
-iRect bodyTextRect(27, 72, 620, 430);
+iRect bodyTextRect(145, 110, 760, 510);
 
 bool gDrawGameHelp          = false;
 

Modified: trunk/netpanzer/src/NetPanzer/Views/MainMenu/MainMenuView.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Views/MainMenu/MainMenuView.cpp	2011-09-13 17:31:41 UTC (rev 1233)
+++ trunk/netpanzer/src/NetPanzer/Views/MainMenu/MainMenuView.cpp	2011-09-15 10:10:09 UTC (rev 1234)
@@ -56,7 +56,8 @@
         &quot;Current Team\n\n&quot;
         &quot;   krom: the warrior\n&quot;
         &quot;   C-D: the insurgent\n&quot;
-        &quot;   fu: the anarchist\n&quot;
+        &quot;   fu: the ninja\n&quot;
+        &quot;   Wile64: the hunter\n&quot;
         &quot;\n\n\n&quot;
         &quot;Authors\n\n&quot;
         &quot;Original Game (Pyrosoft)\n&quot;

Modified: trunk/netpanzer/src/NetPanzer/Views/MainMenu/MenuTemplateView.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Views/MainMenu/MenuTemplateView.cpp	2011-09-13 17:31:41 UTC (rev 1233)
+++ trunk/netpanzer/src/NetPanzer/Views/MainMenu/MenuTemplateView.cpp	2011-09-15 10:10:09 UTC (rev 1234)
@@ -33,6 +33,10 @@
 #include &quot;Util/Exception.hpp&quot;
 #include &quot;Views/GameViewGlobals.hpp&quot;
 
+#ifndef PACKAGE_VERSION
+	#define PACKAGE_VERSION &quot;testing&quot;
+#endif
+
 Surface       MenuTemplateView::backgroundSurface;
 PackedSurface MenuTemplateView::titlePackedSurface;
 
@@ -141,7 +145,7 @@
     setAlwaysOnBottom(true);
 
     moveTo(iXY(0, 0));
-    resize(iXY(640, 480));
+    resize(iXY(800, 600));
 
     initButtons();
 
@@ -226,9 +230,13 @@
         }
 
         //titlePackedSurface.blt(clientArea, bodyTextRect.min.x, 390);
-        titlePackedSurface.bltBlend(clientArea, bodyTextRect.min.x, 390, Palette::colorTable6040);
+        titlePackedSurface.bltBlend(clientArea, bodyTextRect.min.x, bodyTextRect.max.y, Palette::colorTable6040);
     }
 
+    static char text[] =
+        &quot;NetPanzer &quot; PACKAGE_VERSION;
+        clientArea.bltString(10, 590, text, Color::yellow);
+
     View::doDraw(viewArea, clientArea);
 } // end doDraw
 

Modified: trunk/netpanzer/src/NetPanzer/Views/MainMenu/Multi/FlagSelectionView.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Views/MainMenu/Multi/FlagSelectionView.cpp	2011-09-13 17:31:41 UTC (rev 1233)
+++ trunk/netpanzer/src/NetPanzer/Views/MainMenu/Multi/FlagSelectionView.cpp	2011-09-15 10:10:09 UTC (rev 1234)
@@ -25,6 +25,7 @@
 #include &quot;Util/Exception.hpp&quot;
 #include &quot;Interfaces/GameConfig.hpp&quot;
 #include &quot;Views/Components/Button.hpp&quot;
+#include &quot;Views/Components/Label.hpp&quot;
 #include &quot;Views/Components/MouseEvent.hpp&quot;
 #include &quot;2D/Color.hpp&quot;
 
@@ -79,16 +80,17 @@
     setVisible(false);
 
     // The thirty is to give more room to the map selectior view.
-    moveTo(bodyTextRect.min.x + bodyTextRect.getSizeX() / 2 + 10 + 30,
-           bodyTextRect.min.y + 50);
+    moveTo(bodyTextRect.min.x + bodyTextRect.getSizeX() / 2 + 30,
+           bodyTextRect.min.y + 5);
 
-    resizeClientArea(bodyTextRect.getSizeX() / 2 - 10 - 30, 108);
+    resizeClientArea(bodyTextRect.getSizeX() / 2 - 30, 180);
 
-    text_current = &quot;Current:&quot;;
-    loc_text_current.x = BORDER_SPACE;
-    loc_text_current.y = BORDER_SPACE + (FLAG_HEIGHT - Surface::getFontHeight()) / 2;
+    int tx = BORDER_SPACE;
+    int ty = BORDER_SPACE + (FLAG_HEIGHT - Surface::getFontHeight()) / 2;
 
-    loc_player_flag.x = loc_text_current.x + Surface::getTextLength(text_current) + BORDER_SPACE;
+    add( new Label(tx, ty, &quot;Current:&quot;, windowTextColor, windowTextColorShadow, true) );
+
+    loc_player_flag.x = tx + Surface::getTextLength(&quot;Current:&quot;) + BORDER_SPACE;
     loc_player_flag.y = BORDER_SPACE;
 
     init();
@@ -125,12 +127,6 @@
         }
     }
 
-    if(gameconfig-&gt;playerflag.isDefaultValue())
-    {
-        // new player, no flag...
-        gameconfig-&gt;playerflag=rand()%max_flags;
-    }
-    
     setSelectedFlag(0);
     
 } // end FlagSelectionView::init
@@ -143,12 +139,6 @@
     //viewArea.bltLookup(r, Palette::darkGray256.getColorArray());
     //clientArea.drawRect(clientArea.getRect(), Color::white);
     
-    clientArea.bltStringShadowed(loc_text_current.x,
-                                 loc_text_current.y,
-                                 text_current,
-                                 windowTextColor,
-                                 windowTextColorShadow);
-    
     menu_flags.blt(clientArea, loc_player_flag.x, loc_player_flag.y);
 
     View::doDraw(viewArea, clientArea);

Modified: trunk/netpanzer/src/NetPanzer/Views/MainMenu/Multi/GetSessionView.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Views/MainMenu/Multi/GetSessionView.cpp	2011-09-13 17:31:41 UTC (rev 1233)
+++ trunk/netpanzer/src/NetPanzer/Views/MainMenu/Multi/GetSessionView.cpp	2011-09-15 10:10:09 UTC (rev 1234)
@@ -191,8 +191,6 @@
 //---------------------------------------------------------------------------
 void GetSessionView::loadBackgroundSurface()
 {
-    doLoadBackgroundSurface(&quot;pics/backgrounds/menus/menu/sessionMB.bmp&quot;);
-
 } // end GetSessionView::loadBackgroundSurface
 
 // loadTitleSurface

Modified: trunk/netpanzer/src/NetPanzer/Views/MainMenu/Multi/HostJoinTemplateView.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Views/MainMenu/Multi/HostJoinTemplateView.cpp	2011-09-13 17:31:41 UTC (rev 1233)
+++ trunk/netpanzer/src/NetPanzer/Views/MainMenu/Multi/HostJoinTemplateView.cpp	2011-09-15 10:10:09 UTC (rev 1234)
@@ -80,10 +80,6 @@
         strcmp(IPAddressView::szServer.getString(), &quot;&quot;) == 0)
         return;
 
-    // Set the player flag.
-    // XXX FLAG
-    //gameconfig-&gt;playerflag = FlagSelectionView::getSelectedFlag();
-
     // Close all menu views.
     Desktop::setVisibilityAllWindows(false);
 
@@ -144,5 +140,4 @@
 //---------------------------------------------------------------------------
 void HostJoinTemplateView::loadBackgroundSurface()
 {
-    doLoadBackgroundSurface(&quot;pics/backgrounds/menus/menu/defaultMB.bmp&quot;);
 } // end HostJoinTemplateView::loadBackgroundSurface

Modified: trunk/netpanzer/src/NetPanzer/Views/MainMenu/Multi/HostOptionsView.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Views/MainMenu/Multi/HostOptionsView.cpp	2011-09-13 17:31:41 UTC (rev 1233)
+++ trunk/netpanzer/src/NetPanzer/Views/MainMenu/Multi/HostOptionsView.cpp	2011-09-15 10:10:09 UTC (rev 1234)
@@ -265,7 +265,7 @@
     setAllowMove(false);
     setVisible(false);
 
-    moveTo(bodyTextRect.min.x, bodyTextRect.min.y + 190);
+    moveTo(bodyTextRect.min.x, bodyTextRect.min.y + 205);
     resizeClientArea(bodyTextRect.getSizeX(), 168);
 
     addMeterButtons(iXY(BORDER_SPACE, BORDER_SPACE));

Modified: trunk/netpanzer/src/NetPanzer/Views/MainMenu/Multi/IPAddressView.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Views/MainMenu/Multi/IPAddressView.cpp	2011-09-13 17:31:41 UTC (rev 1233)
+++ trunk/netpanzer/src/NetPanzer/Views/MainMenu/Multi/IPAddressView.cpp	2011-09-15 10:10:09 UTC (rev 1234)
@@ -48,14 +48,13 @@
 void IPAddressView::Init()
 {
     szServer.init(&quot;&quot;, 256,29);
-    addInputField(iXY(8, 8), &amp;szServer, &quot;&quot;, true);
+    addInputField(iXY(8, 6), &amp;szServer, &quot;&quot;, true);
 } // end IPAddressView::init
 
 // doDraw
 //---------------------------------------------------------------------------
 void IPAddressView::doDraw(Surface &amp;viewArea, Surface &amp;clientArea)
 {
-    clientArea.fill(Color::black);
     View::doDraw(viewArea, clientArea);
 } // end IPAddressView::doDraw
 

Modified: trunk/netpanzer/src/NetPanzer/Views/MainMenu/Multi/MapSelectionView.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Views/MainMenu/Multi/MapSelectionView.cpp	2011-09-13 17:31:41 UTC (rev 1233)
+++ trunk/netpanzer/src/NetPanzer/Views/MainMenu/Multi/MapSelectionView.cpp	2011-09-15 10:10:09 UTC (rev 1234)
@@ -272,8 +272,8 @@
     dest.bltStringShadowed(x, y, strBuf, windowTextColor, windowTextColorShadow);
     y += yOffset;
 
-    int sizeX = (mapList[curMap]-&gt;cells.y * 32) / 480;
-    int sizeY = (mapList[curMap]-&gt;cells.x * 32) / 640;
+    int sizeX = (mapList[curMap]-&gt;cells.y * 32) / 800;
+    int sizeY = (mapList[curMap]-&gt;cells.x * 32) / 600;
     sprintf(strBuf, &quot;Size:       %d x %d&quot;, sizeX, sizeY);
     dest.bltStringShadowed(x, y, strBuf, windowTextColor, windowTextColorShadow);
     y += yOffset;

Modified: trunk/netpanzer/src/NetPanzer/Views/MainMenu/Multi/PlayerNameView.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Views/MainMenu/Multi/PlayerNameView.cpp	2011-09-13 17:31:41 UTC (rev 1233)
+++ trunk/netpanzer/src/NetPanzer/Views/MainMenu/Multi/PlayerNameView.cpp	2011-09-15 10:10:09 UTC (rev 1234)
@@ -55,7 +55,7 @@
 {
     playerName.init(gameconfig-&gt;playername.c_str(), INPUT_FIELD_CHARACTERS);
     cInputField* input 
-        = addInputField(iXY(BORDER_SPACE, BORDER_SPACE), &amp;playerName, &quot;&quot;, true);
+        = addInputField(iXY(BORDER_SPACE, BORDER_SPACE+2), &amp;playerName, &quot;&quot;, true);
     input-&gt;setTextAction(textChanged);
     input-&gt;setExcludedCharacters(&quot;\\&quot;);
 } // end PlayerNameView::init

Modified: trunk/netpanzer/src/NetPanzer/Views/MainMenu/Multi/ServerListView.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Views/MainMenu/Multi/ServerListView.cpp	2011-09-13 17:31:41 UTC (rev 1233)
+++ trunk/netpanzer/src/NetPanzer/Views/MainMenu/Multi/ServerListView.cpp	2011-09-15 10:10:09 UTC (rev 1234)
@@ -39,7 +39,7 @@
     setTitle(&quot;Servers&quot;);
     setSubTitle(&quot;&quot;);
 
-    moveTo(bodyTextRect.min + iXY(0, 170));
+    moveTo(bodyTextRect.min + iXY(0, 205));
     resizeClientArea(bodyTextRect.max - bodyTextRect.min - iXY(0,170));
 
     setAllowResize(false);

Modified: trunk/netpanzer/src/NetPanzer/Views/MainMenu/Options/VisualsView.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Views/MainMenu/Options/VisualsView.cpp	2011-09-13 17:31:41 UTC (rev 1233)
+++ trunk/netpanzer/src/NetPanzer/Views/MainMenu/Options/VisualsView.cpp	2011-09-15 10:10:09 UTC (rev 1234)
@@ -46,16 +46,13 @@
     
     int xTextStart       = bodyTextRect.min.x;
     int x                = xTextStart + 10;
-    int y                = bodyTextRect.min.y;
+    int y                = bodyTextRect.min.y+10;
     int yOffset          =  20;
     
     // Settings
     //----------------------------------------------------------------------
     int minWidth = 19 * 8;
     
-    x = xTextStart + 10;
-    y = 100;
-    
     char res_str[20];
     choiceResolution = new Choice();
     choiceResolution-&gt;setName(&quot;Resolution&quot;);

Modified: trunk/netpanzer/src/NetPanzer/Views/MainMenu/OptionsTemplateView.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Views/MainMenu/OptionsTemplateView.cpp	2011-09-13 17:31:41 UTC (rev 1233)
+++ trunk/netpanzer/src/NetPanzer/Views/MainMenu/OptionsTemplateView.cpp	2011-09-15 10:10:09 UTC (rev 1234)
@@ -105,16 +105,13 @@
 {
     MenuTemplateView::doDraw(viewArea, clientArea);
 
-    clientArea.bltStringCenter(&quot;Select your option category above&quot;, Color::white);
-
+    clientArea.bltString(bodyTextRect.min.x, bodyTextRect.min.y, &quot;Select your option category above&quot;, Color::white);
 } // end OptionsTemplateView::doDraw
 
 // loadBackgroundSurface
 //---------------------------------------------------------------------------
 void OptionsTemplateView::loadBackgroundSurface()
 {
-    doLoadBackgroundSurface(&quot;pics/backgrounds/menus/menu/optionsMB.bmp&quot;);
-
 } // end OptionsTemplateView::loadBackgroundSurface
 
 // loadTitleSurface


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000259.html">[Netpanzer-cvs] r1233 - in trunk/netpanzer: scripts src/Lib/Util	src/NetPanzer/Classes src/NetPanzer/Classes/Network	src/NetPanzer/Interfaces src/NetPanzer/Scripts
</A></li>
	<LI>Next message: <A HREF="000261.html">[Netpanzer-cvs] r1235 - in trunk/netpanzer: . pics/flags	src/Lib/physfs src/Lib/physfs/archivers	src/Lib/physfs/platform src/NetPanzer/Classes/Network	src/NetPanzer/Interfaces src/NetPanzer/Particles	src/NetPanzer/PowerUps src/NetPanzer/Views/Game	src/NetPanzer/Views/MainMenu/Multi support/icon
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#260">[ date ]</a>
              <a href="thread.html#260">[ thread ]</a>
              <a href="subject.html#260">[ subject ]</a>
              <a href="author.html#260">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/netpanzer-cvs">More information about the Netpanzer-cvs
mailing list</a><br>
</body></html>
