<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Netpanzer-cvs] r1122 - in trunk/netpanzer: . cache docs fonts maps	pics powerups scripts sound src src/Lib src/Lib/2D	src/Lib/ArrayUtil src/Lib/INIParser src/Lib/Network	src/Lib/Types src/Lib/Util src/Lib/lua src/Lib/optionmm	src/Lib/physfs src/NetPanzer src/NetPanzer/Interfaces	src/NetPanzer/Particles src/NetPanzer/Views units wads
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/netpanzer-cvs/2009-June/index.html" >
   <LINK REL="made" HREF="mailto:netpanzer-cvs%40lists.berlios.de?Subject=Re%3A%20%5BNetpanzer-cvs%5D%20r1122%20-%20in%20trunk/netpanzer%3A%20.%20cache%20docs%20fonts%20maps%0A%09pics%20powerups%20scripts%20sound%20src%20src/Lib%20src/Lib/2D%0A%09src/Lib/ArrayUtil%20src/Lib/INIParser%20src/Lib/Network%0A%09src/Lib/Types%20src/Lib/Util%20src/Lib/lua%20src/Lib/optionmm%0A%09src/Lib/physfs%20src/NetPanzer%20src/NetPanzer/Interfaces%0A%09src/NetPanzer/Particles%20src/NetPanzer/Views%20units%20wads&In-Reply-To=%3C200906201311.n5KDBIfY020209%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="000152.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Netpanzer-cvs] r1122 - in trunk/netpanzer: . cache docs fonts maps	pics powerups scripts sound src src/Lib src/Lib/2D	src/Lib/ArrayUtil src/Lib/INIParser src/Lib/Network	src/Lib/Types src/Lib/Util src/Lib/lua src/Lib/optionmm	src/Lib/physfs src/NetPanzer src/NetPanzer/Interfaces	src/NetPanzer/Particles src/NetPanzer/Views units wads</H1>
    <B>kromxp at mail.berlios.de</B> 
    <A HREF="mailto:netpanzer-cvs%40lists.berlios.de?Subject=Re%3A%20%5BNetpanzer-cvs%5D%20r1122%20-%20in%20trunk/netpanzer%3A%20.%20cache%20docs%20fonts%20maps%0A%09pics%20powerups%20scripts%20sound%20src%20src/Lib%20src/Lib/2D%0A%09src/Lib/ArrayUtil%20src/Lib/INIParser%20src/Lib/Network%0A%09src/Lib/Types%20src/Lib/Util%20src/Lib/lua%20src/Lib/optionmm%0A%09src/Lib/physfs%20src/NetPanzer%20src/NetPanzer/Interfaces%0A%09src/NetPanzer/Particles%20src/NetPanzer/Views%20units%20wads&In-Reply-To=%3C200906201311.n5KDBIfY020209%40sheep.berlios.de%3E"
       TITLE="[Netpanzer-cvs] r1122 - in trunk/netpanzer: . cache docs fonts maps	pics powerups scripts sound src src/Lib src/Lib/2D	src/Lib/ArrayUtil src/Lib/INIParser src/Lib/Network	src/Lib/Types src/Lib/Util src/Lib/lua src/Lib/optionmm	src/Lib/physfs src/NetPanzer src/NetPanzer/Interfaces	src/NetPanzer/Particles src/NetPanzer/Views units wads">kromxp at mail.berlios.de
       </A><BR>
    <I>Sat Jun 20 15:11:18 CEST 2009</I>
    <P><UL>
        
        <LI>Next message: <A HREF="000152.html">[Netpanzer-cvs] r1123 - trunk/netpanzer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#151">[ date ]</a>
              <a href="thread.html#151">[ thread ]</a>
              <a href="subject.html#151">[ subject ]</a>
              <a href="author.html#151">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: kromxp
Date: 2009-06-20 15:10:22 +0200 (Sat, 20 Jun 2009)
New Revision: 1122

Removed:
   trunk/netpanzer/Jamconfig.in
   trunk/netpanzer/Jamfile
   trunk/netpanzer/Jamrules
   trunk/netpanzer/autogen.sh
   trunk/netpanzer/cache/Jamfile
   trunk/netpanzer/config-windows.h
   trunk/netpanzer/configure.ac
   trunk/netpanzer/docs/Jamfile
   trunk/netpanzer/fonts/Jamfile
   trunk/netpanzer/maps/Jamfile
   trunk/netpanzer/mk/
   trunk/netpanzer/pics/Jamfile
   trunk/netpanzer/powerups/Jamfile
   trunk/netpanzer/scripts/Jamfile
   trunk/netpanzer/sound/Jamfile
   trunk/netpanzer/src/Jamfile
   trunk/netpanzer/src/Lib/2D/Jamfile
   trunk/netpanzer/src/Lib/ArrayUtil/Jamfile
   trunk/netpanzer/src/Lib/INIParser/Jamfile
   trunk/netpanzer/src/Lib/Jamfile
   trunk/netpanzer/src/Lib/Network/Jamfile
   trunk/netpanzer/src/Lib/Types/Jamfile
   trunk/netpanzer/src/Lib/Util/Jamfile
   trunk/netpanzer/src/Lib/lua/Jamfile
   trunk/netpanzer/src/Lib/optionmm/Jamfile
   trunk/netpanzer/src/Lib/physfs/Jamfile
   trunk/netpanzer/src/NetPanzer/Jamfile
   trunk/netpanzer/src/NetPanzer/Particles/Jamfile
   trunk/netpanzer/src/NetPanzer/Views/Jamfile
   trunk/netpanzer/units/Jamfile
   trunk/netpanzer/wads/Jamfile
Modified:
   trunk/netpanzer/SConstruct
   trunk/netpanzer/src/NetPanzer/Interfaces/PlayerGameManager.cpp
   trunk/netpanzer/src/NetPanzer/Interfaces/PlayerGameManager.hpp
Log:
- Deleted all the autoconf and jam files, now can only use SCons to compile
- 'F3' key shows the list of 'Views' is for debugging purposes
- Modified SCons script to allow better cross compilation


Deleted: trunk/netpanzer/Jamconfig.in
===================================================================
--- trunk/netpanzer/Jamconfig.in	2009-05-11 23:45:19 UTC (rev 1121)
+++ trunk/netpanzer/Jamconfig.in	2009-06-20 13:10:22 UTC (rev 1122)
@@ -1,95 +0,0 @@
-SHELL = &quot;@SHELL@&quot; ;
-
-PATH_SEPARATOR = &quot;@PATH_SEPARATOR@&quot; ;
-PACKAGE_NAME = &quot;@PACKAGE_NAME@&quot; ;
-PACKAGE_TARNAME = &quot;@PACKAGE_TARNAME@&quot; ;
-PACKAGE_VERSION = &quot;@PACKAGE_VERSION@&quot; ;
-PACKAGE_STRING = &quot;@PACKAGE_STRING@&quot; ;
-PACKAGE_BUGREPORT = &quot;@PACKAGE_BUGREPORT@&quot; ;
-
-DEFS = &quot;@DEFS@&quot; ;
-ECHO_C = &quot;@ECHO_C@&quot; ;
-ECHO_N = &quot;@ECHO_N@&quot; ;
-ECHO_T = &quot;@ECHO_T@&quot; ;
-
-LIBS = &quot;@LIBS@&quot; ;
-
-build_alias = &quot;@build_alias@&quot; ;
-host_alias = &quot;@host_alias@&quot; ;
-target_alias = &quot;@target_alias@&quot; ;
-
-build = &quot;@build@&quot; ;
-build_cpu = &quot;@build_cpu@&quot; ;
-build_vendor = &quot;@build_vendor@&quot; ;
-build_os = &quot;@build_os@&quot; ;
-
-host = &quot;@host@&quot; ;
-host_cpu = &quot;@host_cpu@&quot; ;
-host_vendor = &quot;@host_vendor@&quot; ;
-host_os = &quot;@host_os@&quot; ;
-
-target = &quot;@target@&quot; ;
-target_cpu = &quot;@target_cpu@&quot; ;
-target_vendor = &quot;@target_vendor@&quot; ;
-target_os = &quot;@target_os@&quot; ;
-
-ac_ct_CC = &quot;@ac_ct_CC@&quot; ;
-ac_ct_CXX = &quot;@ac_ct_CXX@&quot; ;
-CC = &quot;@CC@&quot; ;
-CPP = &quot;@CPP@&quot; ;
-CXX = &quot;@CXX@&quot; ;
-CXXCPP = &quot;@CXXCPP@&quot; ;
-AR = &quot;@AR@ -r&quot; ;
-RANLIB = &quot;@RANLIB@&quot; ;
-LIBTOOL = &quot;@LIBTOOL@&quot; ;
-STRIP = &quot;@STRIP@&quot; ;
-INSTALL = &quot;@INSTALL@&quot; ;
-WINDRES = &quot;@WINDRES@&quot; ;
-
-CFLAGS = &quot;@CFLAGS@&quot; ;
-CPPFLAGS = &quot;@CPPFLAGS@&quot; ;
-CXXFLAGS = &quot;@CXXFLAGS@&quot; ;
-LDFLAGS = &quot;@LDFLAGS@&quot; ;
-
-LIBS = &quot;@LIBS@&quot; ;
-LIBOBJS = &quot;@LIBOBJS@&quot; ;
-
-EXEEXT = &quot;@EXEEXT@&quot; ;
-OBJEXT = &quot;@OBJEXT@&quot; ;
-ECHO = &quot;@ECHO@&quot; ;
-GREP = &quot;@GREP@&quot; ;
-EGREP = &quot;@EGREP@&quot; ;
-LN_S = &quot;@LN_S@&quot; ;
-VARIANT = &quot;@VARIANT@&quot; ;
-
-INSTALL_PROGRAM = &quot;@INSTALL_PROGRAM@&quot; ;
-INSTALL_SCRIPT = &quot;@INSTALL_SCRIPT@&quot; ;
-INSTALL_DATA = &quot;@INSTALL_DATA@&quot; ;
-
-DOXYGEN = &quot;@DOXYGEN@&quot; ;
-
-SDL_CONFIG = &quot;@SDL_CONFIG@&quot; ;
-SDL_CFLAGS = &quot;@SDL_CFLAGS@&quot; ;
-SDL_LIBS = &quot;@SDL_LIBS@&quot; ;
-
-SDLMIXER_AVAILABLE = &quot;@SDLMIXER_AVAILABLE@&quot; ;
-SDLMIXER_CFLAGS = &quot;@SDLMIXER_CFLAGS@&quot; ;
-SDLMIXER_LIBS = &quot;@SDLMIXER_LIBS@&quot; ;
-
-prefix ?= &quot;@prefix@&quot; ;
-exec_prefix ?= &quot;@exec_prefix@&quot; ;
-bindir ?= &quot;@bindir@&quot; ;
-sbindir ?= &quot;@sbindir@&quot; ;
-libexecdir ?= &quot;@libexecdir@&quot; ;
-datarootdir ?= &quot;@datarootdir@&quot; ;
-datadir ?= &quot;@datadir@&quot; ;
-sysconfdir ?= &quot;@sysconfdir@&quot; ;
-sharedstatedir ?= &quot;@sharedstatedir@&quot; ;
-localstatedir ?= &quot;@localstatedir@&quot; ;
-libdir ?= &quot;@libdir@&quot; ;
-includedir ?= &quot;@includedir@&quot; ;
-oldincludedir ?= &quot;@oldincludedir@&quot; ;
-infodir ?= &quot;@infodir@&quot; ;
-mandir ?= &quot;@mandir@&quot; ;
-
-JAMCONFIG_READ = yes ;

Deleted: trunk/netpanzer/Jamfile
===================================================================
--- trunk/netpanzer/Jamfile	2009-05-11 23:45:19 UTC (rev 1121)
+++ trunk/netpanzer/Jamfile	2009-06-20 13:10:22 UTC (rev 1122)
@@ -1,31 +0,0 @@
-SubDir TOP ;
-
-# Decend into subdirs
-if ! $(NO_SRC)
-{
-    SubInclude TOP src ;
-    SubInclude TOP docs ;
-}
-if ! $(NO_DATA)
-{
-    SubInclude TOP pics ;
-    SubInclude TOP maps ;
-    SubInclude TOP sound ;
-    SubInclude TOP powerups ;
-    SubInclude TOP units ;
-    SubInclude TOP wads ;
-#    SubInclude TOP fonts ;
-    SubInclude TOP cache ;
-    SubInclude TOP scripts ;
-}
-
-UseAutoconf ;
-
-if ! $(NO_SRC) {
-    InstallPixmap netpanzer.png netpanzer.xpm ;
-    InstallDesktop netpanzer.desktop ;
-    InstallDoc ChangeLog README TODO RELNOTES docs/tipofday.txt docs/serverhowto.html ;
-}
-
-Win32Resource netpanzer : support/icon/npicon.rc ;
-

Deleted: trunk/netpanzer/Jamrules
===================================================================
--- trunk/netpanzer/Jamrules	2009-05-11 23:45:19 UTC (rev 1121)
+++ trunk/netpanzer/Jamrules	2009-06-20 13:10:22 UTC (rev 1122)
@@ -1,39 +0,0 @@
-if ! $(top_builddir)
-{
-    top_builddir = $(TOP) ;
-}
-top_srcdir = $(TOP) ;
-
-JAMCONFIG ?= $(top_builddir)/Jamconfig ;
-include $(JAMCONFIG) ;
-if ! $(JAMCONFIG_READ)
-{
-  EXIT &quot;Couldn't find config. Please run 'configure' first.&quot; ;
-}
-
-if $(USE_STLPORT_DEBUG)
-{
-  CPPFLAGS += -I/usr/include/stlport ;
-  CPPFLAGS += -D_STLP_DEBUG=1 -D_STLP_DEBUG_UNINITIALIZED=1 ;
-  CPPFLAGS += -D_STLP_SHRED_BYTE=0xA3 ;
-  LIBS += -lstlport_gcc_debug ;
-}
-
-COMPILER_CFLAGS += -Wall -W ;
-COMPILER_CFLAGS_optimize += -O3 -g3 ;
-COMPILER_C++FLAGS_optimize += -O3 -g3 ;
-COMPILER_LFLAGS_optimize += -O3 -g3 ;
-COMPILER_CFLAGS_debug += -DDEBUG -g3 ;
-COMPILER_CXXFLAGS_debug += -DDEBUG -g3 ;
-COMPILER_LFLAGS_debug += -g3 ;
-COMPILER_CFLAGS_profile += -O2 -g3 -pg ;
-COMPILER_CXXFLAGS_profile += -O2 -g3 -pg ;
-COMPILER_LFLAGS_profile += -g3 -pg ;
-
-LINK = $(CXX) ;
-
-# Include build rules
-include $(TOP)/mk/jam/build.jam ;
-
-# Include Dirs
-IncludeDir $(top_builddir) ; # for config.h

Modified: trunk/netpanzer/SConstruct
===================================================================
--- trunk/netpanzer/SConstruct	2009-05-11 23:45:19 UTC (rev 1121)
+++ trunk/netpanzer/SConstruct	2009-06-20 13:10:22 UTC (rev 1122)
@@ -4,6 +4,9 @@
 import string
 import subprocess
 
+################################################################
+# Fix compiling with long lines in windows
+################################################################
 class ourSpawn:
     def ourspawn(self, sh, escape, cmd, args, env):
         newargs = string.join(args[1:], ' ')
@@ -26,7 +29,10 @@
         buf.ourenv = env
         env['SPAWN'] = buf.ourspawn
 
+################################################################
 # Modified copy from BosWars of globSources
+################################################################
+
 def globSources(localenv, sourcePrefix, sourceDirs, pattern):
     sources = []
     sourceDirs = Split(sourceDirs)
@@ -39,106 +45,158 @@
 
     return targetsources
 
+################################################################
+# Make static libraries
+################################################################
+
 def MakeStaticLib(localenv, libname, libdirs, pattern):
     sources = globSources(localenv, 'src/Lib', libdirs, pattern)
     localenv.StaticLibrary( localenv['FINALLIBSDIR'] + libname, sources)
 
+################################################################
+# Add options
+################################################################
+
 opts = Options()
 opts.AddOptions(
     ('mode','set compile mode to debug or release','release'),
     ('sdlconfig','sets the sdl-config full path', 'sdl-config'),
-    ('crosstarget', 'sets the cross compiler target: mingw, linux' , ''),
-    ('compilerprefix', 'sets the prefix of the compilers, example: i686-pc-linux-gnu-', '')
+    ('crosslinuxcompilerprefix', 'sets the prefix for the cross linux compiler, example: i686-pc-linux-gnu-', ''),
+    ('crossmingwcompilerprefix', 'sets the prefix for the cross mingw compiler, example: i686-mingw32-', ''),
+    ('crosslinuxsdlconfig','sets the sdl-config full path for linux cross compiler', 'sdl-config'),
+    ('crossmingwsdlconfig','sets the sdl-config full path for mingw cross compiler', 'sdl-config')
 )
 
 env = Environment(ENV = os.environ, options = opts)
 Help(opts.GenerateHelpText(env))
 
-if env['crosstarget'] == 'mingw':
-    if env['compilerprefix'] == '':
-        print 'You need to set a compiler prefix for cross compilation'
-        Exit(1)
+################################################################
+# Create Environments
+################################################################
 
-    if env['sdlconfig'] == 'sdl-config':
-        print 'You need to set the full path of sdl-config for cross compilation'
-        Exit(1)
+crossmingwenv = env.Clone();
+crosslinuxenv = env.Clone();
 
-    finalplatform = 'mingw'
-    env = DefaultEnvironment(ENV = {'PATH' : os.environ['PATH']},tools = ['mingw'], options=opts )
-    env.Replace( CXX = env['compilerprefix'] + env['CXX'] )
-    env.Replace( CC = env['compilerprefix'] + env['CC'] )
-    env.Replace( AR = env['compilerprefix'] + env['AR'] )
-    env.Replace( RANLIB = env['compilerprefix'] + env['RANLIB'] )
-    env.Append( CCFLAGS = [ '-Dsocklen_t=int' ] )
-    env.Append( LDFLAGS = [ '-mwindows' ] )
-    env.Append( LIBS = [ 'ws2_32', 'mingw32' ] )
-    env['PROGSUFFIX'] = '.exe'
-elif env['crosstarget'] == 'linux':
-    if env['compilerprefix'] == '':
-        print 'You need to set a compiler prefix for cross compilation'
+if 'crossmingw' in COMMAND_LINE_TARGETS:
+    if env['crossmingwcompilerprefix'] == '':
+        print 'You need to set a compiler prefix for mingw cross compilation'
         Exit(1)
 
-    if env['sdlconfig'] == 'sdl-config':
-        print 'You need to set the full path of sdl-config for cross compilation'
+    if env['crossmingwsdlconfig'] == 'sdl-config':
+        print 'You need to set the full path of sdl-config for mingw cross compilation'
         Exit(1)
 
-    finalplatform = 'linux'
-    env = DefaultEnvironment(ENV = {'PATH' : os.environ['PATH']},tools = ['gcc','g++','ar','gnulink'], options=opts )
-    env.Replace( CXX = env['compilerprefix'] + env['CXX'] )
-    env.Replace( CC = env['compilerprefix'] + env['CC'] )
-    env.Replace( AR = env['compilerprefix'] + env['AR'] )
-    env.Replace( RANLIB = env['compilerprefix'] + env['RANLIB'] )
-    env.Command('libstdc++.a', None, Action('ln -sf `%s -print-file-name=libstdc++.a` build/linux/' % env['CXX'] ) )
-    env.Append( LIBS = [ 'libstdc++.a' ] )
-    
-else:
-    finalplatform = env['PLATFORM']
+    #finalplatform = 'mingw'
+    crossmingwenv = Environment(ENV = {'PATH' : os.environ['PATH']}, tools = ['mingw'], options=opts )
+    print crossmingwenv
+    crossmingwenv.Replace( CXX = env['crossmingwcompilerprefix'] + env['CXX'] )
+    crossmingwenv.Replace( CC = env['crossmingwcompilerprefix'] + env['CC'] )
+    crossmingwenv.Replace( AR = env['crossmingwcompilerprefix'] + env['AR'] )
+    crossmingwenv.Replace( RANLIB = env['crossmingwcompilerprefix'] + env['RANLIB'] )
+    crossmingwenv.Append( CCFLAGS = [ '-Dsocklen_t=int' ] )
+    crossmingwenv.Append( LDFLAGS = [ '-mwindows' ] )
+    crossmingwenv.Append( LIBS = [ 'ws2_32', 'mingw32' ] )
+    crossmingwenv['PROGSUFFIX'] = '.exe'
 
-NPVERSION = 'svn'
-SVERSION = ''
-try:
-    SVERSION = os.popen('svnversion').read()[:-1]
-    SVERSION = SVERSION.split(':')[-1]
-except e:
-    pass
+if 'crosslinux' in COMMAND_LINE_TARGETS:
+    if env['crosslinuxcompilerprefix'] == '':
+        print 'You need to set a compiler prefix for linux cross compilation'
+        Exit(1)
 
-print &quot;SVERSION = &quot; + SVERSION
+    if env['crosslinuxsdlconfig'] == 'sdl-config':
+        print 'You need to set the full path of sdl-config for linux cross compilation'
+        Exit(1)
 
-env.Append( CCFLAGS = [ '-DPACKAGE_VERSION=\\&quot;' + NPVERSION + '\\&quot;' ] )
+    #finalplatform = 'linux'
+    crosslinuxenv= Environment(ENV = {'PATH' : os.environ['PATH']},tools = ['gcc','g++','ar','gnulink'], options=opts )
+    crosslinuxenv.Replace( CXX = env['crosslinuxcompilerprefix'] + env['CXX'] )
+    crosslinuxenv.Replace( CC = env['crosslinuxcompilerprefix'] + env['CC'] )
+    crosslinuxenv.Replace( AR = env['crosslinuxcompilerprefix'] + env['AR'] )
+    crosslinuxenv.Replace( RANLIB = env['crosslinuxcompilerprefix'] + env['RANLIB'] )
+    crosslinuxenv.Command('libstdc++.a', None, Action('ln -sf `%s -print-file-name=libstdc++.a` build/linux/' % crosslinuxenv['CXX'] ) )
+    crosslinuxenv.Append( LIBS = [ 'libstdc++.a' ] )
 
-print 'Building version ' + NPVERSION + ' for ' + sys.platform
 
 if not (env['mode'] in ['debug', 'release']):
     print &quot;Error: mode can only be 'debug' or 'release', found: &quot; + env['mode']
     Exit(1)
 
+env['FINALBUILDDIR'] = 'build/' + env['mode'] + '/'
+env['FINALLIBSDIR'] = env['FINALBUILDDIR'] + 'libs/'
+crossmingwenv['FINALBUILDDIR'] = 'build/crossmingw/' + env['mode'] + '/'
+crossmingwenv['FINALLIBSDIR'] = crossmingwenv['FINALBUILDDIR'] + 'libs/'
+crosslinuxenv['FINALBUILDDIR'] = 'build/crosslinux/' + env['mode'] + '/'
+crosslinuxenv['FINALLIBSDIR'] = crosslinuxenv['FINALBUILDDIR'] + 'libs/'
+
 # HANDLE 'mode' flags
 if env['mode'] == 'debug':
     env.Append(CCFLAGS = ['-g', '-O0'])
     env['FINALEXENAME'] = 'netpanzer-debug'
+    crossmingwenv.Append(CCFLAGS = ['-g', '-O0'])
+    crossmingwenv['FINALEXENAME'] = crossmingwenv['FINALBUILDDIR'] + 'netpanzer-debug'
+    crosslinuxenv.Append(CCFLAGS = ['-g', '-O0'])
+    crosslinuxenv['FINALEXENAME'] = crosslinuxenv['FINALBUILDDIR'] + 'netpanzer-debug'
 else:
     env.Append(CCFLAGS = ['-O2','-s'])
     env['FINALEXENAME'] = 'netpanzer'
+    crossmingwenv.Append(CCFLAGS = ['-O2','-s'])
+    crossmingwenv['FINALEXENAME'] = crossmingwenv['FINALBUILDDIR'] + 'netpanzer'
+    crosslinuxenv.Append(CCFLAGS = ['-O2','-s'])
+    crosslinuxenv['FINALEXENAME'] = crosslinuxenv['FINALBUILDDIR'] + 'netpanzer'
 
-env['FINALBUILDDIR'] = 'build/' + finalplatform + '/' + env['mode'] + '/'
-env['FINALLIBSDIR'] = env['FINALBUILDDIR'] + 'libs/'
 
 env.BuildDir(env['FINALBUILDDIR'],'.',duplicate=0)
+crossmingwenv.BuildDir(crossmingwenv['FINALBUILDDIR'],'.',duplicate=0)
+crosslinuxenv.BuildDir(crosslinuxenv['FINALBUILDDIR'],'.',duplicate=0)
 
 luaenv = env.Clone()
 physfsenv = env.Clone()
 networkenv = env.Clone()
 
-env.Append( CPPPATH = [ '.', 'src/Lib', 'src/NetPanzer' ] )
-env.Append( CPPPATH = [ 'src/Lib/physfs' ] )
+crossmingwluaenv = crossmingwenv.Clone()
+crossmingwphysfsenv = crossmingwenv.Clone()
+crossmingwnetworkenv = crossmingwenv.Clone()
 
+crosslinuxluaenv = crosslinuxenv.Clone()
+crosslinuxphysfsenv = crosslinuxenv.Clone()
+crosslinuxnetworkenv = crosslinuxenv.Clone()
 
-if finalplatform == 'darwin':
+################################################################
+# Set NetPanzer Version
+################################################################
+
+NPVERSION = 'svn'
+SVERSION = ''
+try:
+    SVERSION = os.popen('svnversion').read()[:-1]
+    SVERSION = SVERSION.split(':')[-1]
+except e:
+    pass
+
+print &quot;SVERSION = &quot; + SVERSION
+
+env.Append( CCFLAGS = [ '-DPACKAGE_VERSION=\\&quot;' + NPVERSION + '\\&quot;' ] )
+crossmingwenv.Append( CCFLAGS = [ '-DPACKAGE_VERSION=\\&quot;' + NPVERSION + '\\&quot;' ] )
+crosslinuxenv.Append( CCFLAGS = [ '-DPACKAGE_VERSION=\\&quot;' + NPVERSION + '\\&quot;' ] )
+
+thisplatform = sys.platform;
+print 'Building version ' + NPVERSION + ' in ' + sys.platform
+
+################################################################
+# Configure Environments
+################################################################
+
+env.Append( CPPPATH = [ '.', 'src/Lib', 'src/NetPanzer' , 'src/lib/physfs'] )
+crossmingwenv.Append( CPPPATH = [ '.', 'src/Lib', 'src/NetPanzer' , 'src/lib/physfs'] )
+crosslinuxenv.Append( CPPPATH = [ '.', 'src/Lib', 'src/NetPanzer' , 'src/lib/physfs'] )
+
+# for this platform
+if thisplatform == 'darwin':
     env.Append(CPPPATH = ['/Library/Frameworks/SDL.framework/Headers',
                           '/Library/Frameworks/SDL_mixer.framework/Headers' ] )
     env.AppendUnique(FRAMEWORKS=Split('SDL SDL_mixer Cocoa IOKit'))
     env.Append( NPSOURCES =  ['support/macosx/SDLMain.m'] )
-elif finalplatform == 'win32':
+elif thisplatform == 'win32':
     env.Append( CPPPATH = [ 'C:/mingw/include/SDL' ] )
     env.Append( LIBS = [ 'ws2_32', 'mingw32', 'SDLMain', 'SDL' ] )
     env.Append( CCFLAGS = [ '-Dsocklen_t=int' ] )
@@ -150,23 +208,54 @@
     env.ParseConfig(env['sdlconfig'] + ' --cflags --libs')
     env.Append( NPLIBS = [ 'SDL_mixer' ] )
 
+# for crossmingw platform
+crossmingwenv.ParseConfig(env['crossmingwsdlconfig'] + ' --cflags --libs')
+crossmingwenv.Append( NPLIBS = [ 'SDL_mixer' ] )
+
+# for crosslinux platform
+crosslinuxenv.ParseConfig(env['crosslinuxsdlconfig'] + ' --cflags --libs')
+crosslinuxenv.Append( NPLIBS = [ 'SDL_mixer' ] )
+
+################################################################
+# Makes libs
+################################################################
+
 # BUILDS NETWORK
 MakeStaticLib(networkenv, 'npnetwork', 'Network', '*.cpp')
+MakeStaticLib(crossmingwnetworkenv, 'npnetwork', 'Network', '*.cpp')
+MakeStaticLib(crosslinuxnetworkenv, 'npnetwork', 'Network', '*.cpp')
 
 # BUILDS LUA
 MakeStaticLib(luaenv, 'nplua', 'lua', '*.c')
+MakeStaticLib(crossmingwluaenv, 'nplua', 'lua', '*.c')
+MakeStaticLib(crosslinuxluaenv, 'nplua', 'lua', '*.c')
 
 # BUILDS PHYSFS
 physfsenv.Append( CFLAGS = '-DPHYSFS_SUPPORTS_ZIP=1 -DZ_PREFIX=1 -DPHYSFS_NO_CDROM_SUPPORT=1' )
 physfsenv.Append( CPPPATH = [ 'src/Lib/physfs', 'src/Lib/physfs/zlib123' ] )
 MakeStaticLib(physfsenv, 'npphysfs', 'physfs physfs/platform physfs/archivers physfs/zlib123', '*.c')
 
+crossmingwphysfsenv.Append( CFLAGS = '-DPHYSFS_SUPPORTS_ZIP=1 -DZ_PREFIX=1 -DPHYSFS_NO_CDROM_SUPPORT=1' )
+crossmingwphysfsenv.Append( CPPPATH = [ 'src/Lib/physfs', 'src/Lib/physfs/zlib123' ] )
+MakeStaticLib(crossmingwphysfsenv, 'npphysfs', 'physfs physfs/platform physfs/archivers physfs/zlib123', '*.c')
+
+crosslinuxphysfsenv.Append( CFLAGS = '-DPHYSFS_SUPPORTS_ZIP=1 -DZ_PREFIX=1 -DPHYSFS_NO_CDROM_SUPPORT=1' )
+crosslinuxphysfsenv.Append( CPPPATH = [ 'src/Lib/physfs', 'src/Lib/physfs/zlib123' ] )
+MakeStaticLib(crosslinuxphysfsenv, 'npphysfs', 'physfs physfs/platform physfs/archivers physfs/zlib123', '*.c')
+
 # BUILDS 2D
 MakeStaticLib(env, 'np2d', '2D', '*.cpp')
+MakeStaticLib(crossmingwenv, 'np2d', '2D', '*.cpp')
+MakeStaticLib(crosslinuxenv, 'np2d', '2D', '*.cpp')
 
 # BUILDS REST OF LIBRARIES
 MakeStaticLib(env, 'nplibs', 'ArrayUtil INIParser Types Util optionmm','*.cpp')
+MakeStaticLib(crossmingwenv, 'nplibs', 'ArrayUtil INIParser Types Util optionmm','*.cpp')
+MakeStaticLib(crosslinuxenv, 'nplibs', 'ArrayUtil INIParser Types Util optionmm','*.cpp')
 
+################################################################
+# NetPanzer source dirs
+################################################################
 
 npdirs = &quot;&quot;&quot;
     Bot
@@ -194,11 +283,37 @@
 &quot;&quot;&quot;
 
 env.Append( NPSOURCES = globSources(env, 'src/NetPanzer', npdirs, &quot;*.cpp&quot;) )
+crossmingwenv.Append( NPSOURCES = globSources(crossmingwenv, 'src/NetPanzer', npdirs, &quot;*.cpp&quot;) )
+crosslinuxenv.Append( NPSOURCES = globSources(crosslinuxenv, 'src/NetPanzer', npdirs, &quot;*.cpp&quot;) )
+
 env.Append( NPLIBS = ['nplua','np2d','npnetwork','nplibs','npphysfs'] )
+crossmingwenv.Append( NPLIBS = ['nplua','np2d','npnetwork','nplibs','npphysfs'] )
+crosslinuxenv.Append( NPLIBS = ['nplua','np2d','npnetwork','nplibs','npphysfs'] )
+
 if env.has_key('LIBS'):
     env.Append( NPLIBS = env['LIBS'] )
 
+if crossmingwenv.has_key('LIBS'):
+    crossmingwenv.Append( NPLIBS = crossmingwenv['LIBS'] )
+
+if crosslinuxenv.has_key('LIBS'):
+    crosslinuxenv.Append( NPLIBS = crosslinuxenv['LIBS'] )
+
 env.Append( NPLIBPATH = env['FINALLIBSDIR'] )
+crossmingwenv.Append( NPLIBPATH = crossmingwenv['FINALLIBSDIR'] )
+crosslinuxenv.Append( NPLIBPATH = crosslinuxenv['FINALLIBSDIR'] )
 
-env.Program( env['FINALEXENAME'], env['NPSOURCES'],
+netpanzer = env.Program( env['FINALEXENAME'], env['NPSOURCES'],
              LIBS=env['NPLIBS'], LIBPATH=env['NPLIBPATH'] )
+
+crossmingw = crossmingwenv.Program( crossmingwenv['FINALEXENAME'], crossmingwenv['NPSOURCES'],
+             LIBS=crossmingwenv['NPLIBS'], LIBPATH=crossmingwenv['NPLIBPATH'] )
+
+Alias('crossmingw', crossmingw);
+
+crosslinux = crosslinuxenv.Program( crosslinuxenv['FINALEXENAME'], crosslinuxenv['NPSOURCES'],
+             LIBS=crosslinuxenv['NPLIBS'], LIBPATH=crosslinuxenv['NPLIBPATH'] )
+
+Alias('crosslinux', crosslinux);
+
+Default(netpanzer)

Deleted: trunk/netpanzer/autogen.sh
===================================================================
--- trunk/netpanzer/autogen.sh	2009-05-11 23:45:19 UTC (rev 1121)
+++ trunk/netpanzer/autogen.sh	2009-06-20 13:10:22 UTC (rev 1122)
@@ -1,21 +0,0 @@
-#! /bin/sh
-
-# Correct working directory?
-if test ! -f configure.ac ; then
-  echo &quot;*** Please invoke this script from directory containing configure.ac.&quot;
-  exit 1
-fi
-
-MACRODIR=mk/autoconf
-aclocal -I $MACRODIR
-
-# generate a Jamconfig.in
-#autoconf --trace=AC_SUBST \
-#  | sed -e 's/configure.ac:[0-9]*:AC_SUBST:\([^:]*\).*/\1 = &quot;@\1@&quot; ;/g' \
-#  &gt; Jamconfig.in
-# seems autoconf --trace misses some things :-/
-#echo 'INSTALL = &quot;@INSTALL@&quot; ;' &gt;&gt; Jamconfig.in
-#echo 'JAMCONFIG_READ = yes ;' &gt;&gt; Jamconfig.in
-
-autoheader
-autoconf

Deleted: trunk/netpanzer/cache/Jamfile
===================================================================
--- trunk/netpanzer/cache/Jamfile	2009-05-11 23:45:19 UTC (rev 1121)
+++ trunk/netpanzer/cache/Jamfile	2009-06-20 13:10:22 UTC (rev 1122)
@@ -1,10 +0,0 @@
-SubDir TOP cache ;
-
-PATHS = colorfilters/netp
-        colorfilters/netpmenu
-;
-
-for p in $(PATHS) {
-    InstallData [ Wildcard $(p) : *.tbl ] : cache $(p) ;
-}
-

Deleted: trunk/netpanzer/config-windows.h
===================================================================
--- trunk/netpanzer/config-windows.h	2009-05-11 23:45:19 UTC (rev 1121)
+++ trunk/netpanzer/config-windows.h	2009-06-20 13:10:22 UTC (rev 1122)
@@ -1,11 +0,0 @@
-/* Disable gcc specific __attribute__ keyword on other compilers */
-#ifndef __GNUC__
-#define __attribute__(x)
-#endif
-
-#define PACKAGE_NAME &quot;netpanzer&quot;
-#define PACKAGE_STRING &quot;netpanzer svnwin&quot;
-#define PACKAGE_VERSION &quot;svnwin&quot;
-#define USE_WINSOCK
-#undef WORDS_BIGENDIAN
-#define socklen_t int

Deleted: trunk/netpanzer/configure.ac
===================================================================
--- trunk/netpanzer/configure.ac	2009-05-11 23:45:19 UTC (rev 1121)
+++ trunk/netpanzer/configure.ac	2009-06-20 13:10:22 UTC (rev 1122)
@@ -1,201 +0,0 @@
-#----------------------------------------------------------------------------
-# Autoconf input script. Start the ./autgen.sh script for producing a
-# configure script.
-#----------------------------------------------------------------------------
-AC_PREREQ([2.54])
-
-AC_INIT([netpanzer], [svn], [<A HREF="https://lists.berlios.de/mailman/listinfo/netpanzer-cvs">netpanzer-devel at lists.berlios.org</A>])
-AC_CONFIG_SRCDIR([mk/jam/build.jam])
-AC_CONFIG_AUX_DIR([mk/autoconf])
-
-AC_CANONICAL_BUILD
-AC_CANONICAL_HOST
-AC_CANONICAL_TARGET
-
-#----------------------------------------------------------------------------
-# Configuration header
-#----------------------------------------------------------------------------
-AC_CONFIG_HEADERS(config.h)
-AH_TOP([
-/* Disable gcc specific __attribute__ keyword on other compilers */
-#ifndef __GNUC__
-#define __attribute__(x)
-#endif
-])
-
-AC_C_BIGENDIAN()
-
-# stupid autoconf is adding default -g -O2 flags when we don't want this :-/
-test &quot;.$CXXFLAGS&quot; = &quot;.&quot; &amp;&amp; CXXFLAGS=&quot; &quot;
-
-#----------------------------------------------------------------------------
-# Check for build variant (debug, profile, optimize)
-#----------------------------------------------------------------------------
-VARIANT=optimize
-AC_ARG_ENABLE([optimize], [AC_HELP_STRING([--enable-optimize],
-    [build with optimizations enabled (default YES)])],
-    [test &quot;$enableval&quot; = &quot;yes&quot; &amp;&amp; VARIANT=optimize])
-                                                                                
-AC_ARG_ENABLE([debug], [AC_HELP_STRING([--enable-debug],
-    [build with debugging information (default NO)])],
-    [test &quot;$enableval&quot; = &quot;yes&quot; &amp;&amp; VARIANT=debug])
-                                                                                
-AC_ARG_ENABLE([profile], [AC_HELP_STRING([--enable-profile],
-    [build with profiling information (default NO)])],
-    [test &quot;$enableval&quot; = &quot;yes&quot; &amp;&amp; VARIANT=profile])
-AC_SUBST([VARIANT])
-
-#----------------------------------------------------------------------------
-# find applications
-#----------------------------------------------------------------------------
-AC_PROG_CXX
-
-AC_CHECK_TOOL(WINDRES, windres, no)
-
-AC_ARG_ENABLE([linuxbin],[AC_HELP_STRING([--enable-linuxbin],
-	[build binary for multiple distributions (default NO)])],
-	[
-		if test &quot;x$enableval&quot; = &quot;xyes&quot; ; then
-			rm -rf build/static-libs
-			mkdir build
-			mkdir build/static-libs
-			ln -s `$CXX -print-file-name=libstdc++.a` build/static-libs/libstdc++.a
-			LDFLAGS=&quot;$LDFLAGS -static-libgcc -L build/static-libs&quot;
-		fi
-	])
-
-AC_PROG_LIBTOOL
-AC_PROG_INSTALL
-
-# check if our c++ compiler is gcc3.2 or newer
-AC_MSG_CHECKING([whether g++ is new enough])
-AC_LANG_SAVE
-AC_LANG_CPLUSPLUS
-AC_TRY_COMPILE([], [
-#ifndef __GNUC__
-#error no gcc compiler found (__GNUC__ not defined)
-#endif
-#if __GNUC__ &lt; 3 || (__GNUC__ == 3 &amp;&amp; __GNUC_MINOR__ &lt; 2)
-#error gcc compiler too old. Need at least version 3.2.0
-#endif
-], [AC_MSG_RESULT([yes])], [AC_MSG_RESULT([no])
-   AC_MSG_ERROR([
-Error: You gcc version is too old. netpanzer needs at least gcc 3.2.0.
-])])
-AC_LANG_RESTORE
-AC_CHECK_PROGS(DOXYGEN, [doxygen])
-
-#----------------------------------------------------------------------------
-# Check for operating system
-#----------------------------------------------------------------------------
-AC_MSG_CHECKING([for target host])
-case $host_os in
-    mingw*|cygwin*)
-        AC_MSG_RESULT([WIN32])
-        AC_DEFINE([USE_WINSOCK], [], [Define if winsock should be used])
-        LIBS=&quot;$LIBS -lwsock32&quot;
-        ;;
-    *)
-        AC_MSG_RESULT([assume posix])
-        ;;
-esac
-#----------------------------------------------------------------------------
-# find libraries
-#----------------------------------------------------------------------------
-AX_TYPE_SOCKLEN_T
-
-AM_PATH_SDL([1.2.5], , AC_MSG_ERROR([Please install libsdl &gt;= 1.2.]))
-
-NP_FINDLIB([SDLMIXER], [SDL_mixer], [SDL_mixer &gt;= 1.2],
-	NP_LANG_PROGRAM([#include &lt;SDL_mixer.h&gt;
-#if MIX_MAJOR_VERSION &lt; 1
-# error SDLMix too old
-#else
-# if MIX_MAJOR_VERSION == 1
-#  if MIX_MINOR_VERSION &lt; 2
-#   error SDLMix too old
-#  endif
-# endif
-#endif], [Mix_OpenAudio(0, 0, 0, 0);]),
-	[], [-lSDL_mixer],
-	[],
-	[AC_MSG_ERROR([Please install SDLMixer &gt;=1.2.2])],
-	[$SDL_CFLAGS], [$SDL_LIBS])
-
-dnl SDL_image disabled for now, when use in future reenable it.
-dnl NP_FINDLIB([SDLIMAGE], [SDL_image], [SDL_image &gt;= 1.2],
-dnl	NP_LANG_PROGRAM([#include &lt;SDL_image.h&gt;], [IMG_Load(&quot;&quot;);]),
-dnl	[], [-lSDL_image],
-dnl	[],
-dnl	[AC_MSG_ERROR([Please install SDLImage &gt;= 1.2.1])],
-dnl	[$SDL_CFLAGS], [$SDL_LIBS])
-
-dnl disabled for now, reenable if you work further on the UI
-dnl NP_FINDLIB([SDLTTF], [SDL_ttf], [SDL_ttf &gt;= 2.0.0],
-dnl 	NP_LANG_PROGRAM([#include &lt;SDL_ttf.h&gt;], [if(!TTF_WasInit()) TTF_Init();]),
-dnl	[], [-lSDL_ttf],
-dnl	[],
-dnl	[AC_MSG_ERROR([Please install SDL_ttf &gt;= 2.0.0])],
-dnl	[$SDL_CFLAGS], [$SDL_LIBS])
-
-dnl NP_FINDLIB([PHYSFS], [physfs], [physfs &gt;= 0.1.9],
-dnl 	NP_LANG_PROGRAM([
-dnl #include &lt;stdio.h&gt;
-dnl #include &lt;physfs.h&gt;
-dnl #if PHYSFS_VER_MAJOR &lt; 1
-dnl #if PHYSFS_VER_MINOR &lt; 1
-dnl # error PHYSFS is too old
-dnl #else
-dnl # if PHYSFS_VER_MINOR == 1
-dnl #  if PHYSFS_VER_PATCH &lt; 9
-dnl #   error PHYSFS is too old
-dnl #  endif
-dnl # endif
-dnl #endif
-dnl #endif]),
-dnl 	[], [-lphysfs],
-dnl 	[],
-dnl 	[AC_MSG_ERROR([Please install physfs &gt;= 0.1.9])])
-
-AC_MSG_CHECKING([for physfs CDROM support])
-AC_TRY_COMPILE([#include &lt;sys/ucred.h&gt;],,cdsupport=&quot;SYS_UCRED_H&quot;,)
-if test -z &quot;$cdsupport&quot; ; then
-   AC_TRY_COMPILE([#include &lt;mntent.h&gt;],,cdsupport=&quot;MNTENT_H&quot;,)
-fi
-
-if test -n &quot;$cdsupport&quot; ; then
-    AC_MSG_RESULT([yes])
-    CFLAGS=&quot;$CFLAGS -DPHYSFS_HAVE_${cdsupport}=1&quot;
-    CPPFLAGS=&quot;$CPPFLAGS -DPHYSFS_HAVE_${cdsupport}=1&quot;
-else
-    AC_MSG_RESULT([no])
-    CFLAGS=&quot;$CFLAGS -DPHYSFS_NO_CDROM_SUPPORT=1&quot;
-    CPPFLAGS=&quot;$CPPFLAGS -DPHYSFS_NO_CDROM_SUPPORT=1&quot;
-fi
-
-AC_MSG_CHECKING([for physfs thread support])
-AC_TRY_COMPILE([#include &lt;pthread.h&gt;],,threadsupport=&quot;yes&quot;,)
-if test -n &quot;$threadsupport&quot; ; then
-    AC_MSG_RESULT([yes])
-else
-    AC_MSG_RESULT([no])
-    CFLAGS=&quot;$CFLAGS -DPHYSFS_NO_PTHREADS_SUPPORT=1&quot;
-    CPPFLAGS=&quot;$CPPFLAGS -DPHYSFS_NO_PTHREADS_SUPPORT=1&quot;
-fi
-
-CFLAGS=&quot;$CFLAGS -DPHYSFS_SUPPORTS_ZIP=1 -DZ_PREFIX=1&quot;
-
-dnl add extra flags/libs depending on system
-case $host_os in
-    darwin*)
-        LDFLAGS=&quot;$LDFLAGS -framework IOKit&quot;
-        ;;
-esac
-AC_INIT_JAM
-AC_CONFIG_FILES([Jamconfig])
-AC_OUTPUT
-
-AC_MSG_NOTICE([
-
-Notice: This project uses jam (and not make) as build tool.
-])

Deleted: trunk/netpanzer/docs/Jamfile
===================================================================
--- trunk/netpanzer/docs/Jamfile	2009-05-11 23:45:19 UTC (rev 1121)
+++ trunk/netpanzer/docs/Jamfile	2009-06-20 13:10:22 UTC (rev 1122)
@@ -1,33 +0,0 @@
-SubDir TOP docs ;
-
-InstallMan netpanzer.6 ;
-
-if $(DOXYGEN) {
-    actions DoxyGen
-    {
-        top_srcdir=$(top_srcdir) $(DOXYGEN) $(DOXGEN_FLAGS) $(&gt;)
-    }
-    
-    SEARCH on Doxyfile = $(SUBDIR) ;
-
-    NotFile doxygen ;
-    Always doxygen ;
-    Depends doc : doxygen ;
-    Depends doxygen : Doxyfile ;
-    DoxyGen doxygen : Doxyfile ;
-
-    Help doxygen : &quot;Create doxygen documentation of the project&quot; ;
-}
-
-# hack for docbook stuff (TODO need a more robust way to do this)
-DBDIR = &quot;/usr/share/sgml/docbook/xsl-stylesheets-1.66.1&quot; ;
-actions XsltProc
-{
-    xsltproc -o $(&lt;) $(DBDIR)/html/docbook.xsl $(&gt;)
-}
-SEARCH on serverhowto.xml = $(SUBDIR)/docbook ;
-LOCATE on serverhowto.html = $(SUBDIR) ;
-XsltProc serverhowto.html : serverhowto.xml ;
-Depends serverhowto.html : serverhowto.xml ;
-Depends docbook : serverhowto.html ;
-Help docbook : &quot;Update docbook documentation&quot; ;

Deleted: trunk/netpanzer/fonts/Jamfile
===================================================================
--- trunk/netpanzer/fonts/Jamfile	2009-05-11 23:45:19 UTC (rev 1121)
+++ trunk/netpanzer/fonts/Jamfile	2009-06-20 13:10:22 UTC (rev 1122)
@@ -1,4 +0,0 @@
-SubDir TOP fonts ;
-
-InstallData [ Wildcard *.pcf ] : fonts ;
-

Deleted: trunk/netpanzer/maps/Jamfile
===================================================================
--- trunk/netpanzer/maps/Jamfile	2009-05-11 23:45:19 UTC (rev 1121)
+++ trunk/netpanzer/maps/Jamfile	2009-06-20 13:10:22 UTC (rev 1122)
@@ -1,3 +0,0 @@
-SubDir TOP maps ;
-
-InstallData [ Wildcard *.npm *.opt *.spn ] : maps ;

Deleted: trunk/netpanzer/pics/Jamfile
===================================================================
--- trunk/netpanzer/pics/Jamfile	2009-05-11 23:45:19 UTC (rev 1121)
+++ trunk/netpanzer/pics/Jamfile	2009-06-20 13:10:22 UTC (rev 1122)
@@ -1,27 +0,0 @@
-SubDir TOP pics ;
-
-PATHS = 
-        particles/puff/dirt/pak
-        particles/puff/smokeDark/pak
-        particles/puff/smokeLight/pak
-        particles/clouds/pak
-        particles/craters/pak
-        particles/explosion/explosion0/pak
-        particles/explosion/explosion1/pak
-        particles/lights/pak
-        particles/missles/pak
-        particles/chunks/pak
-        particles/shells/pak
-        flags
-        cursors
-        menus/vehicleSelectionView
-        backgrounds/menus/buttons/default
-        backgrounds/menus/menu/pak
-        backgrounds/menus/menu
-        .
-;
-
-for p in $(PATHS) {
-    InstallData [ Wildcard $(p) : *.bmp *.pak *.raw ] : pics $(p) ;
-}
-

Deleted: trunk/netpanzer/powerups/Jamfile
===================================================================
--- trunk/netpanzer/powerups/Jamfile	2009-05-11 23:45:19 UTC (rev 1121)
+++ trunk/netpanzer/powerups/Jamfile	2009-06-20 13:10:22 UTC (rev 1122)
@@ -1,3 +0,0 @@
-SubDir TOP powerups ;
-
-InstallData [ Wildcard *.pak ] : powerups ;

Deleted: trunk/netpanzer/scripts/Jamfile
===================================================================
--- trunk/netpanzer/scripts/Jamfile	2009-05-11 23:45:19 UTC (rev 1121)
+++ trunk/netpanzer/scripts/Jamfile	2009-06-20 13:10:22 UTC (rev 1122)
@@ -1,3 +0,0 @@
-SubDir TOP scripts ;
-
-InstallData [ Wildcard *.lua ] : scripts ;

Deleted: trunk/netpanzer/sound/Jamfile
===================================================================
--- trunk/netpanzer/sound/Jamfile	2009-05-11 23:45:19 UTC (rev 1121)
+++ trunk/netpanzer/sound/Jamfile	2009-06-20 13:10:22 UTC (rev 1122)
@@ -1,3 +0,0 @@
-SubDir TOP sound ;
-
-InstallData [ Wildcard *.wav ] : sound ;

Deleted: trunk/netpanzer/src/Jamfile
===================================================================
--- trunk/netpanzer/src/Jamfile	2009-05-11 23:45:19 UTC (rev 1121)
+++ trunk/netpanzer/src/Jamfile	2009-06-20 13:10:22 UTC (rev 1122)
@@ -1,13 +0,0 @@
-SubDir TOP src ;
-
-IncludeDir Lib ;
-IncludeDir NetPanzer ;
-
-SubInclude TOP src Lib ;
-SubInclude TOP src NetPanzer ;
-
-# eventually add additional utils
-for i in $(NETPUTILS)
-{
-    SubInclude TOP src $(i) ;
-}

Deleted: trunk/netpanzer/src/Lib/2D/Jamfile
===================================================================
--- trunk/netpanzer/src/Lib/2D/Jamfile	2009-05-11 23:45:19 UTC (rev 1121)
+++ trunk/netpanzer/src/Lib/2D/Jamfile	2009-06-20 13:10:22 UTC (rev 1122)
@@ -1,10 +0,0 @@
-SubDir TOP src Lib 2D ;
-
-Library netpanzer2d 
-    : [ Wildcard *.cpp *.hpp ]
-    : noinstall
-;
-LinkWith netpanzer2d : netpanzertypes netpanzerutil ;
-ExternalLibs netpanzer2d : XML SDL PHYSFS ;
-Help netpanzer2d : &quot;Build the netpanzer 2d support library&quot; ;
-

Deleted: trunk/netpanzer/src/Lib/ArrayUtil/Jamfile
===================================================================
--- trunk/netpanzer/src/Lib/ArrayUtil/Jamfile	2009-05-11 23:45:19 UTC (rev 1121)
+++ trunk/netpanzer/src/Lib/ArrayUtil/Jamfile	2009-06-20 13:10:22 UTC (rev 1122)
@@ -1,9 +0,0 @@
-SubDir TOP src Lib ArrayUtil ;
-
-Library netpanzerarrayutil
-    : [ Wildcard *.cpp *.hpp ]
-    : noinstall
-;
-LinkWith netpanzerarrayutil : netpanzertypes netpanzerutil ;
-ExternalLibs netpanzerarrayutil : SDL ;
-

Deleted: trunk/netpanzer/src/Lib/INIParser/Jamfile
===================================================================
--- trunk/netpanzer/src/Lib/INIParser/Jamfile	2009-05-11 23:45:19 UTC (rev 1121)
+++ trunk/netpanzer/src/Lib/INIParser/Jamfile	2009-06-20 13:10:22 UTC (rev 1122)
@@ -1,10 +0,0 @@
-SubDir TOP src Lib INIParser ;
-
-Library netpanzeriniparser
-    :   [ Wildcard *.cpp *.hpp ]
-    :   noinstall
-;
-LinkWith netpanzeriniparser : netpanzertypes ;
-ExternalLibs netpanzeriniparser : PHYSFS ;
-Help netpanzeriniparser : &quot;Build the netpanzer ini-file support library&quot; ;
-

Deleted: trunk/netpanzer/src/Lib/Jamfile
===================================================================
--- trunk/netpanzer/src/Lib/Jamfile	2009-05-11 23:45:19 UTC (rev 1121)
+++ trunk/netpanzer/src/Lib/Jamfile	2009-06-20 13:10:22 UTC (rev 1122)
@@ -1,13 +0,0 @@
-SubDir TOP src Lib ;
-
-SubInclude TOP src Lib Types ;
-SubInclude TOP src Lib Util ;
-SubInclude TOP src Lib ArrayUtil ;
-SubInclude TOP src Lib 2D ;
-SubInclude TOP src Lib optionmm ;
-# disabled for now...
-# SubInclude TOP src Lib UI ;
-SubInclude TOP src Lib INIParser ;
-SubInclude TOP src Lib Network ;
-SubInclude TOP src Lib physfs ;
-SubInclude TOP src Lib lua ;

Deleted: trunk/netpanzer/src/Lib/Network/Jamfile
===================================================================
--- trunk/netpanzer/src/Lib/Network/Jamfile	2009-05-11 23:45:19 UTC (rev 1121)
+++ trunk/netpanzer/src/Lib/Network/Jamfile	2009-06-20 13:10:22 UTC (rev 1122)
@@ -1,8 +0,0 @@
-SubDir TOP src Lib Network ;
-
-Library netpanzernetwork
-    : [ Wildcard *.cpp *.hpp ]
-    : noinstall
-;
-C++Flags netpanzernetwork : $(SDL_CFLAGS) ;
-

Deleted: trunk/netpanzer/src/Lib/Types/Jamfile
===================================================================
--- trunk/netpanzer/src/Lib/Types/Jamfile	2009-05-11 23:45:19 UTC (rev 1121)
+++ trunk/netpanzer/src/Lib/Types/Jamfile	2009-06-20 13:10:22 UTC (rev 1122)
@@ -1,9 +0,0 @@
-SubDir TOP src Lib Types ;
-
-Library netpanzertypes
-    : [ Wildcard *.cpp *.hpp ]
-    : noinstall
-;
-ExternalLibs netpanzertypes : XML SDL PHYSFS ;
-Help netpanzertypes : &quot;Build the netpanzer types support library&quot; ;
-

Deleted: trunk/netpanzer/src/Lib/Util/Jamfile
===================================================================
--- trunk/netpanzer/src/Lib/Util/Jamfile	2009-05-11 23:45:19 UTC (rev 1121)
+++ trunk/netpanzer/src/Lib/Util/Jamfile	2009-06-20 13:10:22 UTC (rev 1122)
@@ -1,9 +0,0 @@
-SubDir TOP src Lib Util ;
-
-Library netpanzerutil
-    : [ Wildcard *.cpp *.hpp ]
-    : noinstall
-;
-LinkWith netpanzerutil : netpanzertypes ;
-ExternalLibs netpanzerutil : SDL PHYSFS : export ;
-

Deleted: trunk/netpanzer/src/Lib/lua/Jamfile
===================================================================
--- trunk/netpanzer/src/Lib/lua/Jamfile	2009-05-11 23:45:19 UTC (rev 1121)
+++ trunk/netpanzer/src/Lib/lua/Jamfile	2009-06-20 13:10:22 UTC (rev 1122)
@@ -1,8 +0,0 @@
-SubDir TOP src Lib lua ;
-
-IncludeDir . ;
-
-SOURCES = [ Wildcard *.c *.h ] ;
-
-Library nplua : $(SOURCES) : noinstall ;
-

Deleted: trunk/netpanzer/src/Lib/optionmm/Jamfile
===================================================================
--- trunk/netpanzer/src/Lib/optionmm/Jamfile	2009-05-11 23:45:19 UTC (rev 1121)
+++ trunk/netpanzer/src/Lib/optionmm/Jamfile	2009-06-20 13:10:22 UTC (rev 1122)
@@ -1,8 +0,0 @@
-SubDir TOP src Lib optionmm ;
-
-Library optionmm
-    : [ Wildcard *.cpp *.hpp ]
-    : noinstall
-;
-Help optionmm : &quot;Build the optionmm support library&quot; ;
-

Deleted: trunk/netpanzer/src/Lib/physfs/Jamfile
===================================================================
--- trunk/netpanzer/src/Lib/physfs/Jamfile	2009-05-11 23:45:19 UTC (rev 1121)
+++ trunk/netpanzer/src/Lib/physfs/Jamfile	2009-06-20 13:10:22 UTC (rev 1122)
@@ -1,11 +0,0 @@
-SubDir TOP src Lib physfs ;
-
-IncludeDir . zlib123 ;
-
-SOURCES = [ Wildcard *.c *.h ] ;
-SOURCES += [ Wildcard archivers : *.c ] ;
-SOURCES += [ Wildcard platform : *.c *.cpp ] ;
-SOURCES += [ Wildcard zlib123 : *.c *.h ] ;
-
-Library npphysfs : $(SOURCES) : noinstall ;
-

Modified: trunk/netpanzer/src/NetPanzer/Interfaces/PlayerGameManager.cpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Interfaces/PlayerGameManager.cpp	2009-05-11 23:45:19 UTC (rev 1121)
+++ trunk/netpanzer/src/NetPanzer/Interfaces/PlayerGameManager.cpp	2009-06-20 13:10:22 UTC (rev 1122)
@@ -110,9 +110,7 @@
 PlayerGameManager::PlayerGameManager()
     : sdlVideo(0), heartbeat(0), infosocket(0)
 {
-    //fontManager.loadFont(&quot;fixed10&quot;, &quot;fonts/fixed10.pcf&quot;, 10);
-
-    showNewPanel = false;
+    // nothing
 }
 
 //-----------------------------------------------------------------
@@ -197,6 +195,7 @@
 
     Desktop::add(new IPAddressView());
     Desktop::add(new ServerListView());
+    Desktop::add(new DesktopView());
 
     Desktop::setVisibilityAllWindows(false);
     Desktop::setVisibility(&quot;MainView&quot;, true);
@@ -442,20 +441,6 @@
 //-----------------------------------------------------------------
 void PlayerGameManager::processSystemKeys()
 {
-    if (Desktop::getVisible(&quot;GameView&quot;))
-    {
-        if (KeyboardInterface::getKeyPressed( SDLK_F12 ))
-        {
-            showNewPanel = !showNewPanel;
-        }
-        
-        if (KeyboardInterface::getKeyPressed( SDLK_F5 ))
-        {
-            //  DEBUG VIEW
-            Desktop::toggleVisibility( &quot;LibView&quot; );
-        }
-    }
-
     if (KeyboardInterface::getKeyState( SDLK_LALT ) ||
             KeyboardInterface::getKeyState( SDLK_RALT ))
     {
@@ -466,6 +451,12 @@
         }
     } // ** LFT_ALT or RGT_ALT pressed
 
+    if (KeyboardInterface::getKeyPressed(SDLK_F3))
+    {
+        Desktop::toggleVisibility( &quot;DesktopView&quot; );
+    }
+
+
     if (Desktop::getView(&quot;GameView&quot;)-&gt;getVisible())
     {
         if (KeyboardInterface::getKeyPressed(SDLK_m))
@@ -477,17 +468,18 @@
         {
             Desktop::toggleVisibility( &quot;RankView&quot; );
         }
-        
-        if (KeyboardInterface::getKeyPressed(SDLK_F3))
-        {
-            Desktop::toggleVisibility( &quot;DesktopView&quot; );
-        }
-        
+                
         if (KeyboardInterface::getKeyPressed(SDLK_F4))
         {
             Desktop::toggleVisibility( &quot;CodeStatsView&quot; );
         }
-        
+
+        if (KeyboardInterface::getKeyPressed( SDLK_F5 ))
+        {
+            //  DEBUG VIEW
+            Desktop::toggleVisibility( &quot;LibView&quot; );
+        }
+   
         if (KeyboardInterface::getKeyPressed(SDLK_F1))
         {
             Desktop::toggleVisibility( &quot;HelpScrollView&quot; );

Modified: trunk/netpanzer/src/NetPanzer/Interfaces/PlayerGameManager.hpp
===================================================================
--- trunk/netpanzer/src/NetPanzer/Interfaces/PlayerGameManager.hpp	2009-05-11 23:45:19 UTC (rev 1121)
+++ trunk/netpanzer/src/NetPanzer/Interfaces/PlayerGameManager.hpp	2009-06-20 13:10:22 UTC (rev 1122)
@@ -58,7 +58,6 @@
     //Panels::TestPanel * testpanel;
     //UI::FontManager fontManager;
     SDLVideo* sdlVideo;
-    bool showNewPanel;
 
     Heartbeat * heartbeat;
     InfoSocket * infosocket;

Deleted: trunk/netpanzer/src/NetPanzer/Jamfile
===================================================================
--- trunk/netpanzer/src/NetPanzer/Jamfile	2009-05-11 23:45:19 UTC (rev 1121)
+++ trunk/netpanzer/src/NetPanzer/Jamfile	2009-06-20 13:10:22 UTC (rev 1122)
@@ -1,42 +0,0 @@
-SubDir TOP src NetPanzer ;
-
-SubInclude TOP src NetPanzer Views ;
-SubInclude TOP src NetPanzer Particles ;
-
-SUBDIRS =
-    .
-    Core
-    Port
-    Classes
-    Classes/AI
-    Classes/Network
-    Network
-    Resources
-    Structs
-    Scripts
-    Interfaces
-    Bot
-    System
-    PowerUps
-    Objectives
-    Units
-    Weapons
-;
-
-SOURCES = ;
-for i in $(SUBDIRS)
-{
-  SOURCES += [ Wildcard $(i) : *.cpp *.hpp ] ;
-}
-
-Application netpanzer : $(SOURCES) ;
-LinkWith netpanzer : netpanzertypes netpanzerutil netpanzeriniparser netpanzer2d
-                     netpanzerarrayutil optionmm netpanzerparticles
-                     netpanzerviews netpanzernetwork npphysfs nplua
-#                    netpanzerui
-;
-
-C++Flags netpanzer : -DNP_DATADIR=\\\&quot;$(appdatadir)\\\&quot; ;
-ExternalLibs netpanzer : SDLMIXER SDLTTF SDLIMAGE SDL READLINE ;
-Help netpanzer : &quot;Build the main netpanzer executable&quot; ;
-

Deleted: trunk/netpanzer/src/NetPanzer/Particles/Jamfile
===================================================================
--- trunk/netpanzer/src/NetPanzer/Particles/Jamfile	2009-05-11 23:45:19 UTC (rev 1121)
+++ trunk/netpanzer/src/NetPanzer/Particles/Jamfile	2009-06-20 13:10:22 UTC (rev 1122)
@@ -1,5 +0,0 @@
-SubDir TOP src NetPanzer Particles ;
-
-Library netpanzerparticles : [ Wildcard *.cpp *.hpp ] : noinstall ;
-ExternalLibs netpanzerparticles : SDL PHYSFS ;
-

Deleted: trunk/netpanzer/src/NetPanzer/Views/Jamfile
===================================================================
--- trunk/netpanzer/src/NetPanzer/Views/Jamfile	2009-05-11 23:45:19 UTC (rev 1121)
+++ trunk/netpanzer/src/NetPanzer/Views/Jamfile	2009-06-20 13:10:22 UTC (rev 1122)
@@ -1,21 +0,0 @@
-SubDir TOP src NetPanzer Views ;
-
-SUBDIRS =
-    Game
-    MainMenu
-    MainMenu/Multi
-    MainMenu/Multi/MasterServer
-    MainMenu/Options
-    Components
-    .
-;
-
-SOURCES = ;
-for i in $(SUBDIRS)
-{
-    SOURCES += [ Wildcard $(i) : *.cpp *.hpp ] ;
-}
-
-Library netpanzerviews : $(SOURCES) : noinstall ;
-ExternalLibs netpanzerviews : SDL SDLTTF PHYSFS ;
-

Deleted: trunk/netpanzer/units/Jamfile
===================================================================
--- trunk/netpanzer/units/Jamfile	2009-05-11 23:45:19 UTC (rev 1121)
+++ trunk/netpanzer/units/Jamfile	2009-06-20 13:10:22 UTC (rev 1122)
@@ -1,4 +0,0 @@
-SubDir TOP units ;
-
-InstallData [ Wildcard pics/pak : *.pak ] : units/pics/pak ;
-InstallData [ Wildcard profiles : *.pfl ] : units/profiles ;

Deleted: trunk/netpanzer/wads/Jamfile
===================================================================
--- trunk/netpanzer/wads/Jamfile	2009-05-11 23:45:19 UTC (rev 1121)
+++ trunk/netpanzer/wads/Jamfile	2009-06-20 13:10:22 UTC (rev 1122)
@@ -1,3 +0,0 @@
-SubDir TOP wads ;
-
-InstallData [ Wildcard *.act *.tls ] : wads ;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="000152.html">[Netpanzer-cvs] r1123 - trunk/netpanzer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#151">[ date ]</a>
              <a href="thread.html#151">[ thread ]</a>
              <a href="subject.html#151">[ subject ]</a>
              <a href="author.html#151">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/netpanzer-cvs">More information about the Netpanzer-cvs
mailing list</a><br>
</body></html>
